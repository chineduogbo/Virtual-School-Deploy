(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("smalltalk",function(n){var r=/[+\-\/\\*~<>=@%|&?!.,:;^]/,h=/true|false|nil|self|super|thisContext/,t=function(n,t){this.next=n;this.parent=t},i=function(n,t,i){this.name=n;this.context=t;this.eos=i},u=function(){this.context=new t(f,null);this.expectVariable=!0;this.indentation=0;this.userIndentationDelta=0};u.prototype.userIndent=function(t){this.userIndentationDelta=t>0?t/n.indentUnit-this.indentation:0};var f=function(n,u,f){var l=new i(null,u,!1),a=n.next();return a==='"'?l=e(n,new t(e,u)):a==="'"?l=o(n,new t(o,u)):a==="#"?n.peek()==="'"?(n.next(),l=s(n,new t(s,u))):l.name=n.eatWhile(/[^ .{}\[\]()]/)?"string-2":"meta":a==="$"?(n.next()==="<"&&(n.eatWhile(/[^ >]/),n.next()),l.name="string-2"):a==="|"&&f.expectVariable?l.context=new t(c,u):/[\[\]{}()]/.test(a)?(l.name="bracket",l.eos=/[\[{(]/.test(a),a==="["?f.indentation++:a==="]"&&(f.indentation=Math.max(0,f.indentation-1))):r.test(a)?(n.eatWhile(r),l.name="operator",l.eos=a!==";"):/\d/.test(a)?(n.eatWhile(/[\w\d]/),l.name="number"):/[\w_]/.test(a)?(n.eatWhile(/[\w\d_]/),l.name=f.expectVariable?h.test(n.current())?"keyword":"variable":null):l.eos=f.expectVariable,l},e=function(n,t){return n.eatWhile(/[^"]/),new i("comment",n.eat('"')?t.parent:t,!0)},o=function(n,t){return n.eatWhile(/[^']/),new i("string",n.eat("'")?t.parent:t,!1)},s=function(n,t){return n.eatWhile(/[^']/),new i("string-2",n.eat("'")?t.parent:t,!1)},c=function(n,t){var r=new i(null,t,!1),u=n.next();return u==="|"?(r.context=t.parent,r.eos=!0):(n.eatWhile(/[^|]/),r.name="variable"),r};return{startState:function(){return new u},token:function(n,t){if(t.userIndent(n.indentation()),n.eatSpace())return null;var i=t.context.next(n,t.context,t);return t.context=i.context,t.expectVariable=i.eos,i.name},blankLine:function(n){n.userIndent(0)},indent:function(t,i){var r=t.context.next===f&&i&&i.charAt(0)==="]"?-1:t.userIndentationDelta;return(t.indentation+r)*n.indentUnit},electricChars:"]"}});n.defineMIME("text/x-stsrc",{name:"smalltalk"})});
//# sourceMappingURL=smalltalk.min.js.map