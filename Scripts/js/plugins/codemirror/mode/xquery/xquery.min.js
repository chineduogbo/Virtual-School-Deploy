(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("xquery",function(){function n(n,t,i){return l=n,a=i,t}function u(n,t,i){return t.tokenize=i,i(n,t)}function i(i,f){var o=i.next(),tt=!1,a=nt(i),it,g,rt,h,ut,l;if(o=="<"){if(i.match("!--",!0))return u(i,f,w);if(i.match("![CDATA",!1))return f.tokenize=b,n("tag","tag");if(i.match("?",!1))return u(i,f,k);for(it=i.eat("/"),i.eatSpace(),g="";rt=i.eat(/[^\s\u00a0=<>\"\'\/?]/);)g+=rt;return u(i,f,p(g,it))}if(o=="{")return r(f,{type:"codeblock"}),n("",null);if(o=="}")return t(f),n("",null);if(c(f))return o==">"?n("tag","tag"):o=="/"&&i.eat(">")?(t(f),n("tag","tag")):n("word","variable");if(/\d/.test(o))return i.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/),n("number","atom");if(o==="("&&i.eat(":"))return r(f,{type:"comment"}),u(i,f,v);if(a||o!=='"'&&o!=="'"){if(o==="$")return u(i,f,y);if(o===":"&&i.eat("="))return n("operator","keyword");if(o==="(")return r(f,{type:"paren"}),n("",null);if(o===")")return t(f),n("",null);if(o==="[")return r(f,{type:"bracket"}),n("",null);if(o==="]")return t(f),n("",null);if(h=e.propertyIsEnumerable(o)&&e[o],a&&o==='"')while(i.next()!=='"');if(a&&o==="'")while(i.next()!=="'");return(h||i.eatWhile(/[\w\$_-]/),ut=i.eat(":"),!i.eat(":")&&ut&&i.eatWhile(/[\w\$_-]/),i.match(/^[ \t]*\(/,!1)&&(tt=!0),l=i.current(),h=e.propertyIsEnumerable(l)&&e[l],tt&&!h&&(h={type:"function_call",style:"variable def"}),d(f))?(t(f),n("word","variable",l)):((l=="element"||l=="attribute"||h.type=="axis_specifier")&&r(f,{type:"xmlconstructor"}),h?n(h.type,h.style,l):n("word","variable",l))}return u(i,f,s(o))}function v(i,r){for(var e=!1,o=!1,f=0,u;u=i.next();){if(u==")"&&e)if(f>0)f--;else{t(r);break}else u==":"&&o&&f++;e=u==":";o=u=="("}return n("comment","comment")}function s(u,e){return function(o,h){var c;if(g(h)&&o.current()==u)return t(h),e&&(h.tokenize=e),n("string","string");if(r(h,{type:"string",name:u,tokenize:s(u,e)}),o.match("{",!1)&&f(h))return h.tokenize=i,n("string","string");while(c=o.next())if(c==u){t(h);e&&(h.tokenize=e);break}else if(o.match("{",!1)&&f(h))return h.tokenize=i,n("string","string");return n("string","string")}}function y(t,r){var u=/[\w\$_-]/;if(t.eat('"')){while(t.next()!=='"');t.eat(":")}else t.eatWhile(u),t.match(":=",!1)||t.eat(":");return t.eatWhile(u),r.tokenize=i,n("variable","variable")}function p(u,f){return function(e,o){if(e.eatSpace(),f&&e.eat(">"))return t(o),o.tokenize=i,n("tag","tag");if(e.eat("/")||r(o,{type:"tag",name:u,tokenize:i}),e.eat(">"))o.tokenize=i;else return o.tokenize=h,n("tag","tag");return n("tag","tag")}}function h(e,o){var l=e.next();return l=="/"&&e.eat(">")?(f(o)&&t(o),c(o)&&t(o),n("tag","tag")):l==">"?(f(o)&&t(o),n("tag","tag")):l=="="?n("",null):l=='"'||l=="'"?u(e,o,s(l,h)):(f(o)||r(o,{type:"attribute",tokenize:h}),e.eat(/[a-zA-Z_:]/),e.eatWhile(/[-a-zA-Z0-9_:.]/),e.eatSpace(),(e.match(">",!1)||e.match("/",!1))&&(t(o),o.tokenize=i),n("attribute","attribute"))}function w(t,r){for(var u;u=t.next();)if(u=="-"&&t.match("->",!0))return r.tokenize=i,n("comment","comment")}function b(t,r){for(var u;u=t.next();)if(u=="]"&&t.match("]",!0))return r.tokenize=i,n("comment","comment")}function k(t,r){for(var u;u=t.next();)if(u=="?"&&t.match(">",!0))return r.tokenize=i,n("comment","comment meta")}function c(n){return o(n,"tag")}function f(n){return o(n,"attribute")}function d(n){return o(n,"xmlconstructor")}function g(n){return o(n,"string")}function nt(n){return n.current()==='"'?n.match(/^[^\"]+\"\:/,!1):n.current()==="'"?n.match(/^[^\"]+\'\:/,!1):!1}function o(n,t){return n.stack.length&&n.stack[n.stack.length-1].type==t}function r(n,t){n.stack.push(t)}function t(n){n.stack.pop();var t=n.stack.length&&n.stack[n.stack.length-1].tokenize;n.tokenize=t||i}var e=function(){function r(n){return{type:n,style:"keyword"}}for(var h,c,l,e=r("keyword a"),u=r("keyword b"),t=r("keyword c"),a=r("operator"),o={type:"atom",style:"atom"},v={type:"axis_specifier",style:"qualifier"},f={"if":e,"switch":e,"while":e,"for":e,"else":u,then:u,"try":u,"finally":u,"catch":u,element:t,attribute:t,"let":t,"implements":t,"import":t,module:t,namespace:t,"return":t,"super":t,"this":t,throws:t,where:t,"private":t,",":{type:"punctuation",style:null},"null":o,"fn:false()":o,"fn:true()":o},s=["after","ancestor","ancestor-or-self","and","as","ascending","assert","attribute","before","by","case","cast","child","comment","declare","default","define","descendant","descendant-or-self","descending","document","document-node","element","else","eq","every","except","external","following","following-sibling","follows","for","function","if","import","in","instance","intersect","item","let","module","namespace","node","node","of","only","or","order","parent","precedes","preceding","preceding-sibling","processing-instruction","ref","return","returns","satisfies","schema","schema-element","self","some","sortby","stable","text","then","to","treat","typeswitch","union","variable","version","where","xquery","empty-sequence"],n=0,i=s.length;n<i;n++)f[s[n]]=r(s[n]);for(h=["xs:string","xs:float","xs:decimal","xs:double","xs:integer","xs:boolean","xs:date","xs:dateTime","xs:time","xs:duration","xs:dayTimeDuration","xs:time","xs:yearMonthDuration","numeric","xs:hexBinary","xs:base64Binary","xs:anyURI","xs:QName","xs:byte","xs:boolean","xs:anyURI","xf:yearMonthDuration"],n=0,i=h.length;n<i;n++)f[h[n]]=o;for(c=["eq","ne","lt","le","gt","ge",":=","=",">",">=","<","<=",".","|","?","and","or","div","idiv","mod","*","/","+","-"],n=0,i=c.length;n<i;n++)f[c[n]]=a;for(l=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"],n=0,i=l.length;n<i;n++)f[l[n]]=v;return f}(),l,a;return{startState:function(){return{tokenize:i,cc:[],stack:[]}},token:function(n,t){if(n.eatSpace())return null;return t.tokenize(n,t)},blockCommentStart:"(:",blockCommentEnd:":)"}});n.defineMIME("application/xquery","xquery")});
//# sourceMappingURL=xquery.min.js.map