(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("ruby",function(n){function f(n){for(var i={},t=0,r=n.length;t<r;++t)i[n[t]]=!0;return i}function i(n,t,i){return i.tokenize.push(n),n(t,i)}function u(n,u){var f,p,c,w,h,l,o,y,s,b;if(t=null,n.sol()&&n.match("=begin")&&n.eol())return u.tokenize.push(v),"comment";if(n.eatSpace())return null;if(f=n.next(),f=="`"||f=="'"||f=='"')return i(r(f,"string",f=='"'||f=="`"),n,u);if(f=="/"){if(c=n.current().length,n.skipTo("/")){for(w=n.current().length,n.backUp(n.current().length-c),h=0;n.current().length<w;)if(l=n.next(),l=="("?h+=1:l==")"&&(h-=1),h<0)break;if(n.backUp(n.current().length-c),h==0)return i(r(f,"string-2",!0),n,u)}return"operator"}if(f=="%")return(o="string",y=!0,n.eat("s")?o="atom":n.eat(/[WQ]/)?o="string":n.eat(/[r]/)?o="string-2":n.eat(/[wxq]/)&&(o="string",y=!1),s=n.eat(/[^\w\s=]/),!s)?"operator":(e.propertyIsEnumerable(s)&&(s=e[s]),i(r(s,o,y,!0),n,u));if(f=="#")return n.skipToEnd(),"comment";if(f=="<"&&(p=n.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return i(a(p[1]),n,u);if(f=="0")return n.eat("x")?n.eatWhile(/[\da-fA-F]/):n.eat("b")?n.eatWhile(/[01]/):n.eatWhile(/[0-7]/),"number";if(/\d/.test(f))return n.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(f=="?"){while(n.match(/^\\[CM]-/));return n.eat("\\")?n.eatWhile(/\w/):n.next(),"string"}return f==":"?n.eat("'")?i(r("'","atom",!1),n,u):n.eat('"')?i(r('"',"atom",!0),n,u):n.eat(/[\<\>]/)?(n.eat(/[\<\>]/),"atom"):n.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":n.eat(/[a-zA-Z$@_]/)?(n.eatWhile(/[\w]/),n.eat(/[\?\!\=]/),"atom"):"operator":f=="@"&&n.match(/^@?[a-zA-Z_]/)?(n.eat("@"),n.eatWhile(/[\w]/),"variable-2"):f=="$"?(n.eat(/[a-zA-Z_]/)?n.eatWhile(/[\w]/):n.eat(/\d/)?n.eat(/\d/):n.next(),"variable-3"):/[a-zA-Z_]/.test(f)?(n.eatWhile(/[\w]/),n.eat(/[\?\!]/),n.eat(":"))?"atom":"ident":f=="|"&&(u.varList||u.lastTok=="{"||u.lastTok=="do")?(t="|",null):/[\(\)\[\]{}\\;]/.test(f)?(t=f,null):f=="-"&&n.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(f)?(b=n.eatWhile(/[=+\-\/*:\.^%<>~|]/),f!="."||b||(t="."),"operator"):null}function c(){var n=1;return function(t,i){if(t.peek()=="}"){if(n--,n==0)return i.tokenize.pop(),i.tokenize[i.tokenize.length-1](t,i)}else t.peek()=="{"&&n++;return u(t,i)}}function l(){var n=!1;return function(t,i){return n?(i.tokenize.pop(),i.tokenize[i.tokenize.length-1](t,i)):(n=!0,u(t,i))}}function r(n,t,i,r){return function(u,f){var e=!1,o;for(f.context.type==="read-quoted-paused"&&(f.context=f.context.prev,u.eat("}"));(o=u.next())!=null;){if(o==n&&(r||!e)){f.tokenize.pop();break}if(i&&o=="#"&&!e)if(u.eat("{")){n=="}"&&(f.context={prev:f.context,type:"read-quoted-paused"});f.tokenize.push(c());break}else if(/[@\$]/.test(u.peek())){f.tokenize.push(l());break}e=!e&&o=="\\"}return t}}function a(n){return function(t,i){return t.match(n)?i.tokenize.pop():t.skipToEnd(),"string"}}function v(n,t){return n.sol()&&n.match("=end")&&n.eol()&&t.tokenize.pop(),n.skipToEnd(),"comment"}var o=f(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),s=f(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),h=f(["end","until"]),e={"[":"]","{":"}","(":")"},t;return{startState:function(){return{tokenize:[u],indented:0,context:{type:"top",indented:-n.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(n,i){var r,f,e,u;return n.sol()&&(i.indented=n.indentation()),r=i.tokenize[i.tokenize.length-1](n,i),e=t,r=="ident"&&(u=n.current(),r=i.lastTok=="."?"property":o.propertyIsEnumerable(n.current())?"keyword":/^[A-Z]/.test(u)?"tag":i.lastTok=="def"||i.lastTok=="class"||i.varList?"def":"variable",r=="keyword"&&(e=u,s.propertyIsEnumerable(u)?f="indent":h.propertyIsEnumerable(u)?f="dedent":(u=="if"||u=="unless")&&n.column()==n.indentation()?f="indent":u=="do"&&i.context.indented<i.indented&&(f="indent"))),(t||r&&r!="comment")&&(i.lastTok=e),t=="|"&&(i.varList=!i.varList),f=="indent"||/[\(\[\{]/.test(t)?i.context={prev:i.context,type:t||r,indented:i.indented}:(f=="dedent"||/[\)\]\}]/.test(t))&&i.context.prev&&(i.context=i.context.prev),n.eol()&&(i.continuedLine=t=="\\"||r=="operator"),r},indent:function(t,i){if(t.tokenize[t.tokenize.length-1]!=u)return 0;var f=i&&i.charAt(0),r=t.context,o=r.type==e[f]||r.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(i);return r.indented+(o?0:n.indentUnit)+(t.continuedLine?n.indentUnit:0)},electricChars:"}de",lineComment:"#"}});n.defineMIME("text/x-ruby","ruby")});
//# sourceMappingURL=ruby.min.js.map