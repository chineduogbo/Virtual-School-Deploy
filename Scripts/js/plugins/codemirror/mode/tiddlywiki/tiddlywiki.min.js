(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("tiddlywiki",function(){function i(n,t,i){return t.tokenize=i,i(n,t)}function n(n,t,i){return k=n,d=i,t}function t(t,u){var d=t.sol(),w,b,k;if(u.block=!1,w=t.peek(),d&&/[<\/\*{}\-]/.test(w)){if(t.match(p))return u.block=!0,i(t,u,f);if(t.match(c))return n("quote","quote");if(t.match(s)||t.match(h)||t.match(l)||t.match(a)||t.match(v)||t.match(y))return n("code","comment");if(t.match(o))return n("hr","hr")}if(w=t.next(),d&&/[\/\*!#;:>|]/.test(w)){if(w=="!")return t.skipToEnd(),n("header","header");if(w=="*")return t.eatWhile("*"),n("list","comment");if(w=="#")return t.eatWhile("#"),n("list","comment");if(w==";")return t.eatWhile(";"),n("list","comment");if(w==":")return t.eatWhile(":"),n("list","comment");if(w==">")return t.eatWhile(">"),n("quote","quote");if(w=="|")return n("table","header")}if(w=="{"&&t.match(/\{\{/))return i(t,u,f);if(/[hf]/i.test(w)&&/[ti]/i.test(t.peek())&&t.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i))return n("link","link");if(w=='"')return n("string","string");if(w=="~")return n("text","brace");if(/[\[\]]/.test(w)&&t.peek()==w)return t.next(),n("brace","brace");if(w=="@")return t.eatWhile(e),n("link","link");if(/\d/.test(w))return t.eatWhile(/\d/),n("number","number");if(w=="/"){if(t.eat("%"))return i(t,u,g);if(t.eat("/"))return i(t,u,tt)}if(w=="_"&&t.eat("_"))return i(t,u,it);if(w=="-"&&t.eat("-")){if(t.peek()!=" ")return i(t,u,rt);if(t.peek()==" ")return n("text","brace")}if(w=="'"&&t.eat("'"))return i(t,u,nt);if(w=="<"){if(t.eat("<"))return i(t,u,ut)}else return n(w);return t.eatWhile(/[\w\$_]/),b=t.current(),k=r.propertyIsEnumerable(b)&&r[b],k?n(k.type,k.style,b):n("text",null,b)}function g(i,r){for(var f=!1,u;u=i.next();){if(u=="/"&&f){r.tokenize=t;break}f=u=="%"}return n("comment","comment")}function nt(i,r){for(var f=!1,u;u=i.next();){if(u=="'"&&f){r.tokenize=t;break}f=u=="'"}return n("text","strong")}function f(i,r){var f,u=r.block;return u&&i.current()?n("code","comment"):!u&&i.match(b)?(r.tokenize=t,n("code","comment")):u&&i.sol()&&i.match(w)?(r.tokenize=t,n("code","comment")):(f=i.next(),u?n("code","comment"):n("code","comment"))}function tt(i,r){for(var f=!1,u;u=i.next();){if(u=="/"&&f){r.tokenize=t;break}f=u=="/"}return n("text","em")}function it(i,r){for(var f=!1,u;u=i.next();){if(u=="_"&&f){r.tokenize=t;break}f=u=="_"}return n("text","underlined")}function rt(i,r){for(var f=!1,u;u=i.next();){if(u=="-"&&f){r.tokenize=t;break}f=u=="-"}return n("text","strikethrough")}function ut(i,r){var e,f,o;return i.current()=="<<"?n("brace","macro"):(e=i.next(),!e)?(r.tokenize=t,n(e)):e==">"&&i.peek()==">"?(i.next(),r.tokenize=t,n("brace","macro")):(i.eatWhile(/[\w\$_]/),f=i.current(),o=u.propertyIsEnumerable(f)&&u[f],o?n(o.type,o.style,f):n("macro",null,f))}var r={},u=function(){function n(n){return{type:n,style:"macro"}}return{allTags:n("allTags"),closeAll:n("closeAll"),list:n("list"),newJournal:n("newJournal"),newTiddler:n("newTiddler"),permaview:n("permaview"),saveChanges:n("saveChanges"),search:n("search"),slider:n("slider"),tabs:n("tabs"),tag:n("tag"),tagging:n("tagging"),tags:n("tags"),tiddler:n("tiddler"),timeline:n("timeline"),today:n("today"),version:n("version"),option:n("option"),"with":n("with"),filter:n("filter")}}(),e=/[\w_\-]/i,o=/^\-\-\-\-+$/,s=/^\/\*\*\*$/,h=/^\*\*\*\/$/,c=/^<<<$/,l=/^\/\/\{\{\{$/,a=/^\/\/\}\}\}$/,v=/^<!--\{\{\{-->$/,y=/^<!--\}\}\}-->$/,p=/^\{\{\{$/,w=/^\}\}\}$/,b=/.*?\}\}\}/,k,d;return{startState:function(){return{tokenize:t,indented:0,level:0}},token:function(n,t){if(n.eatSpace())return null;return t.tokenize(n,t)},electricChars:""}});n.defineMIME("text/x-tiddlywiki","tiddlywiki")});
//# sourceMappingURL=tiddlywiki.min.js.map