(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("q",function(n){function s(n){return new RegExp("^("+n.join("|")+")$")}function i(n,r){var s=n.sol(),u=n.next(),f;if(t=null,s){if(u=="/")return(r.tokenize=h)(n,r);if(u=="\\")return n.eol()||/\s/.test(n.peek())?(n.skipToEnd(),/^\\\s*$/.test(n.current())?(r.tokenize=l)(n,r):r.tokenize=i,"comment"):(r.tokenize=i,"builtin")}return/\s/.test(u)?n.peek()=="/"?(n.skipToEnd(),"comment"):"whitespace":u=='"'?(r.tokenize=a)(n,r):u=="`"?(n.eatWhile(/[A-Z|a-z|\d|_|:|\/|\.]/),"symbol"):"."==u&&/\d/.test(n.peek())||/\d/.test(u)?(f=null,n.backUp(1),n.match(/^\d{4}\.\d{2}(m|\.\d{2}([D|T](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||n.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||n.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||n.match(/^\d+[ptuv]{1}/)?f="temporal":(n.match(/^0[NwW]{1}/)||n.match(/^0x[\d|a-f|A-F]*/)||n.match(/^[0|1]+[b]{1}/)||n.match(/^\d+[chijn]{1}/)||n.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/))&&(f="number"),f&&(!(u=n.peek())||o.test(u))?f:(n.next(),"error")):/[A-Z|a-z]|\./.test(u)?(n.eatWhile(/[A-Z|a-z|\.|_|\d]/),e.test(n.current())?"keyword":"variable"):/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(u)?null:/[{}\(\[\]\)]/.test(u)?null:"error"}function h(n,t){return n.skipToEnd(),/\/\s*$/.test(n.current())?(t.tokenize=c)(n,t):t.tokenize=i,"comment"}function c(n,t){var r=n.sol()&&n.peek()=="\\";return n.skipToEnd(),r&&/^\\\s*$/.test(n.current())&&(t.tokenize=i),"comment"}function l(n){return n.skipToEnd(),"comment"}function a(n,t){for(var r=!1,u,f=!1;u=n.next();){if(u=='"'&&!r){f=!0;break}r=!r&&u=="\\"}return f&&(t.tokenize=i),"string"}function r(n,t,i){n.context={prev:n.context,indent:n.indent,col:i,type:t}}function u(n){n.indent=n.context.indent;n.context=n.context.prev}var f=n.indentUnit,t,e=s(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),o=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;return{startState:function(){return{tokenize:i,context:null,indent:0,col:0}},token:function(n,i){n.sol()&&(i.context&&i.context.align==null&&(i.context.align=!1),i.indent=n.indentation());var f=i.tokenize(n,i);if(f!="comment"&&i.context&&i.context.align==null&&i.context.type!="pattern"&&(i.context.align=!0),t=="(")r(i,")",n.column());else if(t=="[")r(i,"]",n.column());else if(t=="{")r(i,"}",n.column());else if(/[\]\}\)]/.test(t)){while(i.context&&i.context.type=="pattern")u(i);i.context&&t==i.context.type&&u(i)}else t=="."&&i.context&&i.context.type=="pattern"?u(i):/atom|string|variable/.test(f)&&i.context&&(/[\}\]]/.test(i.context.type)?r(i,"pattern",n.column()):i.context.type!="pattern"||i.context.align||(i.context.align=!0,i.context.col=n.column()));return f},indent:function(n,t){var u=t&&t.charAt(0),i=n.context,r;if(/[\]\}]/.test(u))while(i&&i.type=="pattern")i=i.prev;return r=i&&u==i.type,i?i.type=="pattern"?i.col:i.align?i.col+(r?0:1):i.indent+(r?0:f):0}}});n.defineMIME("text/x-q","q")});
//# sourceMappingURL=q.min.js.map