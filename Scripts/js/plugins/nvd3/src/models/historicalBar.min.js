nv.models.historicalBar = function () { "use strict"; function n(g) { return g.each(function (n) { var g = c - r.left - r.right, it = l - r.top - r.bottom, rt = d3.select(this), tt, st; i.domain(b || d3.extent(n[0].values.map(e).concat(a))); y ? i.range(h || [g * .5 / n[0].values.length, g * (n[0].values.length - .5) / n[0].values.length]) : i.range(h || [0, g]); t.domain(k || d3.extent(n[0].values.map(u).concat(v))).range(d || [it, 0]); i.domain()[0] === i.domain()[1] && (i.domain()[0] ? i.domain([i.domain()[0] - i.domain()[0] * .01, i.domain()[1] + i.domain()[1] * .01]) : i.domain([-1, 1])); t.domain()[0] === t.domain()[1] && (t.domain()[0] ? t.domain([t.domain()[0] + t.domain()[0] * .01, t.domain()[1] - t.domain()[1] * .01]) : t.domain([-1, 1])); var nt = rt.selectAll("g.nv-wrap.nv-historicalBar-" + f).data([n[0].values]), ut = nt.enter().append("g").attr("class", "nvd3 nv-wrap nv-historicalBar-" + f), ft = ut.append("defs"), et = ut.append("g"), ot = nt.select("g"); et.append("g").attr("class", "nv-bars"); nt.attr("transform", "translate(" + r.left + "," + r.top + ")"); rt.on("click", function (n, t) { o.chartClick({ data: n, index: t, pos: d3.event, id: f }) }); ft.append("clipPath").attr("id", "nv-chart-clip-path-" + f).append("rect"); nt.select("#nv-chart-clip-path-" + f + " rect").attr("width", g).attr("height", it); ot.attr("clip-path", p ? "url(#nv-chart-clip-path-" + f + ")" : ""); tt = nt.select(".nv-bars").selectAll(".nv-bar").data(function (n) { return n }, function (n, t) { return e(n, t) }); tt.exit().remove(); st = tt.enter().append("rect").attr("x", 0).attr("y", function (n, i) { return nv.utils.NaNtoZero(t(Math.max(0, u(n, i)))) }).attr("height", function (n, i) { return nv.utils.NaNtoZero(Math.abs(t(u(n, i)) - t(0))) }).attr("transform", function (t, r) { return "translate(" + (i(e(t, r)) - g / n[0].values.length * .45) + ",0)" }).on("mouseover", function (r, f) { s && (d3.select(this).classed("hover", !0), o.elementMouseover({ point: r, series: n[0], pos: [i(e(r, f)), t(u(r, f))], pointIndex: f, seriesIndex: 0, e: d3.event })) }).on("mouseout", function (t, i) { s && (d3.select(this).classed("hover", !1), o.elementMouseout({ point: t, series: n[0], pointIndex: i, seriesIndex: 0, e: d3.event })) }).on("click", function (n, r) { s && (o.elementClick({ value: u(n, r), data: n, index: r, pos: [i(e(n, r)), t(u(n, r))], e: d3.event, id: f }), d3.event.stopPropagation()) }).on("dblclick", function (n, r) { s && (o.elementDblClick({ value: u(n, r), data: n, index: r, pos: [i(e(n, r)), t(u(n, r))], e: d3.event, id: f }), d3.event.stopPropagation()) }); tt.attr("fill", function (n, t) { return w(n, t) }).attr("class", function (n, t, i) { return (u(n, t) < 0 ? "nv-bar negative" : "nv-bar positive") + " nv-bar-" + i + "-" + t }).transition().attr("transform", function (t, r) { return "translate(" + (i(e(t, r)) - g / n[0].values.length * .45) + ",0)" }).attr("width", g / n[0].values.length * .9); tt.transition().attr("y", function (n, i) { var r = u(n, i) < 0 ? t(0) : t(0) - t(u(n, i)) < 1 ? t(0) - 1 : t(u(n, i)); return nv.utils.NaNtoZero(r) }).attr("height", function (n, i) { return nv.utils.NaNtoZero(Math.max(Math.abs(t(u(n, i)) - t(0)), 1)) }) }), n } var r = { top: 0, right: 0, bottom: 0, left: 0 }, c = 960, l = 500, f = Math.floor(Math.random() * 1e4), i = d3.scale.linear(), t = d3.scale.linear(), e = function (n) { return n.x }, u = function (n) { return n.y }, a = [], v = [0], y = !1, p = !0, w = nv.utils.defaultColor(), b, k, h, d, o = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout"), s = !0; return n.highlightPoint = function (n, t) { d3.select(".nv-historicalBar-" + f).select(".nv-bars .nv-bar-0-" + n).classed("hover", t) }, n.clearHighlights = function () { d3.select(".nv-historicalBar-" + f).select(".nv-bars .nv-bar.hover").classed("hover", !1) }, n.dispatch = o, n.options = nv.utils.optionsFunc.bind(n), n.x = function (t) { return arguments.length ? (e = t, n) : e }, n.y = function (t) { return arguments.length ? (u = t, n) : u }, n.margin = function (t) { return arguments.length ? (r.top = typeof t.top != "undefined" ? t.top : r.top, r.right = typeof t.right != "undefined" ? t.right : r.right, r.bottom = typeof t.bottom != "undefined" ? t.bottom : r.bottom, r.left = typeof t.left != "undefined" ? t.left : r.left, n) : r }, n.width = function (t) { return arguments.length ? (c = t, n) : c }, n.height = function (t) { return arguments.length ? (l = t, n) : l }, n.xScale = function (t) { return arguments.length ? (i = t, n) : i }, n.yScale = function (i) { return arguments.length ? (t = i, n) : t }, n.xDomain = function (t) { return arguments.length ? (b = t, n) : b }, n.yDomain = function (t) { return arguments.length ? (k = t, n) : k }, n.xRange = function (t) { return arguments.length ? (h = t, n) : h }, n.yRange = function (t) { return arguments.length ? (d = t, n) : d }, n.forceX = function (t) { return arguments.length ? (a = t, n) : a }, n.forceY = function (t) { return arguments.length ? (v = t, n) : v }, n.padData = function (t) { return arguments.length ? (y = t, n) : y }, n.clipEdge = function (t) { return arguments.length ? (p = t, n) : p }, n.color = function (t) { return arguments.length ? (w = nv.utils.getColor(t), n) : w }, n.id = function (t) { return arguments.length ? (f = t, n) : f }, n.interactive = function () { return arguments.length ? (s = !1, n) : s }, n };
//# sourceMappingURL=historicalBar.min.js.map