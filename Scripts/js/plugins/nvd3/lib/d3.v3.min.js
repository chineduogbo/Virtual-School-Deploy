d3 = function () { function ef(n) { return n != null && !isNaN(n) } function lp(n) { return n.length } function ap(n) { for (var t = 1; n * t % 1;) t *= 10; return t } function rh(n, t) { try { for (var i in t) Object.defineProperty(n.prototype, i, { value: t[i], enumerable: !1 }) } catch (r) { n.prototype = t } } function et() { } function hf() { } function vp(n, t, i) { return function () { var r = i.apply(t, arguments); return r === t ? n : r } } function cf() { } function uh(n) { function r() { for (var i = t, r = -1, f = i.length, u; ++r < f;) (u = i[r].on) && u.apply(this, arguments); return n } var t = [], i = new et; return r.on = function (r, u) { var f = i.get(r), e; return arguments.length < 2 ? f && f.on : (f && (f.on = null, t = t.slice(0, e = t.indexOf(f)).concat(t.slice(e + 1)), i.remove(r)), u && t.push(i.set(r, { on: u })), n) }, r } function it() { n.event.stopPropagation(); n.event.preventDefault() } function fh() { for (var t = n.event, i; i = t.sourceEvent;) t = i; return t } function eh(n, t) { function i() { n.on(t, null) } n.on(t, function () { it(); i() }, !0); setTimeout(i, 0) } function lf(t) { for (var i = new cf, r = 0, u = arguments.length; ++r < u;) i[arguments[r]] = uh(i); return i.of = function (r, u) { return function (f) { try { var e = f.sourceEvent = n.event; f.target = t; n.event = f; i[f.type].apply(r, u) } finally { n.event = e } } }, i } function oh(t, i) { var u = t.ownerSVGElement || t, r, f, e; return u.createSVGPoint ? (r = u.createSVGPoint(), er < 0 && (c.scrollX || c.scrollY) && (u = n.select(w.body).append("svg").style("position", "absolute").style("top", 0).style("left", 0), f = u[0][0].getScreenCTM(), er = !(f.f || f.e), u.remove()), er ? (r.x = i.pageX, r.y = i.pageY) : (r.x = i.clientX, r.y = i.clientY), r = r.matrixTransform(t.getScreenCTM().inverse()), [r.x, r.y]) : (e = t.getBoundingClientRect(), [i.clientX - e.left - t.clientLeft, i.clientY - e.top - t.clientTop]) } function yp(n) { for (var t = -1, r = n.length, i = []; ++t < r;) i.push(n[t]); return i } function pp(n) { return Array.prototype.slice.call(n) } function ht(n) { return or(n, u), n } function af(n) { return function () { return sh(n, this) } } function lh(n) { return function () { return hh(n, this) } } function ah(t, i) { function r() { this.removeAttribute(t) } function u() { this.removeAttributeNS(t.space, t.local) } function f() { this.setAttribute(t, i) } function e() { this.setAttributeNS(t.space, t.local, i) } function o() { var n = i.apply(this, arguments); n == null ? this.removeAttribute(t) : this.setAttribute(t, n) } function s() { var n = i.apply(this, arguments); n == null ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n) } return t = n.ns.qualify(t), i == null ? t.local ? u : r : typeof i == "function" ? t.local ? s : o : t.local ? e : f } function vh(n) { return n.trim().replace(/\s+/g, " ") } function ph(t) { return new RegExp("(?:^|\\s+)" + n.requote(t) + "(?:\\s+|$)", "g") } function wh(n, t) { function r() { for (var r = -1; ++r < i;) n[r](this, t) } function u() { for (var r = -1, u = t.apply(this, arguments) ; ++r < i;) n[r](this, u) } n = n.trim().split(/\s+/).map(bp); var i = n.length; return typeof t == "function" ? u : r } function bp(n) { var t = ph(n); return function (i, r) { if (u = i.classList) return r ? u.add(n) : u.remove(n); var u = i.getAttribute("class") || ""; r ? (t.lastIndex = 0, t.test(u) || i.setAttribute("class", vh(u + " " + n))) : i.setAttribute("class", vh(u.replace(t, " "))) } } function bh(n, t, i) { function r() { this.style.removeProperty(n) } function u() { this.style.setProperty(n, t, i) } function f() { var r = t.apply(this, arguments); r == null ? this.style.removeProperty(n) : this.style.setProperty(n, r, i) } return t == null ? r : typeof t == "function" ? f : u } function kh(n, t) { function i() { delete this[n] } function r() { this[n] = t } function u() { var i = t.apply(this, arguments); i == null ? delete this[n] : this[n] = i } return t == null ? i : typeof t == "function" ? u : r } function vf(n) { return { __data__: n } } function dh(n) { return function () { return ch(this, n) } } function kp(t) { return arguments.length || (t = n.ascending), function (n, i) { return !n - !i || t(n.__data__, i.__data__) } } function o() { } function gh(t, i, r) { function h() { var n = this[u]; n && (this.removeEventListener(t, n, n.$), delete this[u]) } function c() { var n = s(i, st(arguments)); h.call(this); this.addEventListener(t, this[u] = n, n.$ = r); n._ = i } function l() { var f = new RegExp("^__on([^.]+)" + n.requote(t) + "$"), u, i, r; for (i in this) (u = i.match(f)) && (r = this[i], this.removeEventListener(u[1], r, r.$), delete this[i]) } var u = "__on" + t, f = t.indexOf("."), s = nc, e; return f > 0 && (t = t.substring(0, f)), e = hr.get(t), e && (t = e, s = dp), f ? i ? c : h : i ? o : l } function nc(t, i) { return function (r) { var u = n.event; n.event = r; i[0] = this.__data__; try { t.apply(this, i) } finally { n.event = u } } } function dp(n, t) { var i = nc(n, t); return function (n) { var t = this, r = n.relatedTarget; r && (r === t || r.compareDocumentPosition(t) & 8) || i.call(t, n) } } function bt(n, t) { for (var i = 0, u = n.length; i < u; i++) for (var f = n[i], r = 0, o = f.length, e; r < o; r++) (e = f[r]) && t(e, r, i); return n } function tc(n) { return or(n, kt), n } function fi() { } function ei(n, t, i) { return new pf(n, t, i) } function pf(n, t, i) { this.h = n; this.s = t; this.l = i } function ar(n, t, i) { function e(n) { return (n > 360 ? n -= 360 : n < 0 && (n += 360), n < 60) ? r + (u - r) * n / 60 : n < 180 ? u : n < 240 ? r + (u - r) * (240 - n) / 60 : r } function f(n) { return Math.round(e(n) * 255) } var r, u; return n = n % 360, n < 0 && (n += 360), t = t < 0 ? 0 : t > 1 ? 1 : t, i = i < 0 ? 0 : i > 1 ? 1 : i, u = i <= .5 ? i * (1 + t) : i + t - i * t, r = 2 * i - u, ct(f(n + 120), f(n), f(n - 120)) } function rc(n) { return n > 0 ? 1 : n < 0 ? -1 : 0 } function gp(n) { return Math.acos(Math.max(-1, Math.min(1, n))) } function nw(n) { return n > 1 ? t / 2 : n < -1 ? -t / 2 : Math.asin(n) } function tw(n) { return (Math.exp(n) - Math.exp(-n)) / 2 } function iw(n) { return (Math.exp(n) + Math.exp(-n)) / 2 } function uc(n) { return (n = Math.sin(n / 2)) * n } function li(n, t, i) { return new vr(n, t, i) } function vr(n, t, i) { this.h = n; this.c = t; this.l = i } function wf(n, t, r) { return oi(r, Math.cos(n *= i) * t, Math.sin(n) * t) } function oi(n, t, i) { return new pr(n, t, i) } function pr(n, t, i) { this.l = n; this.a = t; this.b = i } function sc(n, t, i) { var r = (n + 16) / 116, u = r + t / 500, f = r - i / 200; return u = kf(u) * fc, r = kf(r) * ec, f = kf(f) * oc, ct(gf(3.2404542 * u - 1.5371385 * r - .4985314 * f), gf(-.969266 * u + 1.8760108 * r + .041556 * f), gf(.0556434 * u - .2040259 * r + 1.0572252 * f)) } function hc(n, t, i) { return li(Math.atan2(i, t) * e, Math.sqrt(t * t + i * i), n) } function kf(n) { return n > .206893034 ? n * n * n : (n - 4 / 29) / 7.787037 } function df(n) { return n > .008856 ? Math.pow(n, 1 / 3) : 7.787037 * n + 4 / 29 } function gf(n) { return Math.round(255 * (n <= .00304 ? 12.92 * n : 1.055 * Math.pow(n, 1 / 2.4) - .055)) } function ct(n, t, i) { return new ne(n, t, i) } function ne(n, t, i) { this.r = n; this.g = t; this.b = i } function si(n) { return n < 16 ? "0" + Math.max(0, n).toString(16) : Math.min(255, n).toString(16) } function te(n, t, i) { var r = 0, u = 0, f = 0, o, e, s; if (o = /([a-z]+)\((.*)\)/i.exec(n), o) { e = o[2].split(","); switch (o[1]) { case "hsl": return i(parseFloat(e[0]), parseFloat(e[1]) / 100, parseFloat(e[2]) / 100); case "rgb": return t(re(e[0]), re(e[1]), re(e[2])) } } return (s = vi.get(n)) ? t(s.r, s.g, s.b) : (n != null && n.charAt(0) === "#" && (n.length === 4 ? (r = n.charAt(1), r += r, u = n.charAt(2), u += u, f = n.charAt(3), f += f) : n.length === 7 && (r = n.substring(1, 3), u = n.substring(3, 5), f = n.substring(5, 7)), r = parseInt(r, 16), u = parseInt(u, 16), f = parseInt(f, 16)), t(r, u, f)) } function cc(n, t, i) { var f = Math.min(n /= 255, t /= 255, i /= 255), r = Math.max(n, t, i), u = r - f, e, o, s = (r + f) / 2; return u ? (o = s < .5 ? u / (r + f) : u / (2 - r - f), e = (n == r ? (t - i) / u + (t < i ? 6 : 0) : t == r ? (i - n) / u + 2 : (n - t) / u + 4) * 60) : o = e = 0, ei(e, o, s) } function lc(n, t, i) { n = ie(n); t = ie(t); i = ie(i); var u = df((.4124564 * n + .3575761 * t + .1804375 * i) / fc), r = df((.2126729 * n + .7151522 * t + .072175 * i) / ec), f = df((.0193339 * n + .119192 * t + .9503041 * i) / oc); return oi(116 * r - 16, 500 * (u - r), 200 * (r - f)) } function ie(n) { return (n /= 255) <= .04045 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4) } function re(n) { var t = parseFloat(n); return n.charAt(n.length - 1) === "%" ? Math.round(t * 2.55) : t } function f(n) { return typeof n == "function" ? n : function () { return n } } function d(n) { return n } function rw(n) { return n.length === 1 ? function (t, i) { n(t == null ? i : null) } : n } function ac(t, i) { function r(t, r, u) { arguments.length < 3 && (u = r, r = null); var f = n.xhr(t, i, u); return f.row = function (n) { return arguments.length ? f.response((r = n) == null ? o : s(n)) : r }, f.row(r) } function o(n) { return r.parse(n.responseText) } function s(n) { return function (t) { return r.parse(t.responseText, n) } } function h(n) { return n.map(u).join(t) } function u(n) { return f.test(n) ? '"' + n.replace(/\"/g, '""') + '"' : n } var f = new RegExp('["' + t + "\n]"), e = t.charCodeAt(0); return r.parse = function (n, t) { var i; return r.parseRows(n, function (n, r) { if (i) return i(n, r - 1); var u = new Function("d", "return {" + n.map(function (n, t) { return JSON.stringify(n) + ": d[" + t + "]" }).join(",") + "}"); i = t ? function (n, i) { return t(u(n), i) } : u }) }, r.parseRows = function (n, t) { function l() { var f, t, u, c; if (i >= s) return o; if (r) return r = !1, h; if (f = i, n.charCodeAt(f) === 34) { for (t = f; t++ < s;) if (n.charCodeAt(t) === 34) { if (n.charCodeAt(t + 1) !== 34) break; ++t } return i = t + 2, u = n.charCodeAt(t + 1), u === 13 ? (r = !0, n.charCodeAt(t + 2) === 10 && ++i) : u === 10 && (r = !0), n.substring(f + 1, t).replace(/""/g, '"') } while (i < s) { if (u = n.charCodeAt(i++), c = 1, u === 10) r = !0; else if (u === 13) r = !0, n.charCodeAt(i) === 10 && (++i, ++c); else if (u !== e) continue; return n.substring(f, i - c) } return n.substring(f) } for (var h = {}, o = {}, c = [], s = n.length, i = 0, a = 0, u, r, f; (u = l()) !== o;) { for (f = []; u !== h && u !== o;) f.push(u), u = l(); (!t || (f = t(f, a++))) && c.push(f) } return c }, r.format = function (n) { if (Array.isArray(n[0])) return r.formatRows(n); var f = new hf, i = []; return n.forEach(function (n) { for (var t in n) f.has(t) || i.push(f.add(t)) }), [i.map(u).join(t)].concat(n.map(function (n) { return i.map(function (t) { return u(n[t]) }).join(t) })).join("\n") }, r.formatRows = function (n) { return n.map(h).join("\n") }, r } function fe() { for (var i, r = Date.now(), n = hi, t; n;) i = r - n.then, i >= n.delay && (n.flush = n.callback(i)), n = n.next; t = vc() - r; t > 24 ? (isFinite(t) && (clearTimeout(kr), kr = setTimeout(fe, t)), br = 0) : (br = 1, yc(fe)) } function vc() { for (var t = null, n = hi, i = Infinity; n;) n.flush ? (delete ue[n.callback.id], n = t ? t.next = n.next : hi = n.next) : (i = Math.min(i, n.then + n.delay), n = (t = n).next); return i } function ow(n, t) { var i = Math.pow(10, Math.abs(8 - t) * 3); return { scale: t > 8 ? function (n) { return n / i } : function (n) { return n * i }, symbol: n } } function oe(n, t) { return t - (n ? Math.ceil(Math.log(n) / Math.LN10) : 1) } function sw(n) { return n + "" } function nu(n, t) { n && he.hasOwnProperty(n.type) && he[n.type](n, t) } function ce(n, t, i) { var u = -1, f = n.length - i, r; for (t.lineStart() ; ++u < f;) r = n[u], t.point(r[0], r[1]); t.lineEnd() } function kc(n, t) { var i = -1, r = n.length; for (t.polygonStart() ; ++i < r;) ce(n[i], t, 1); t.polygonEnd() } function hw() { function o(f, e) { f *= i; e = e * i / 2 + t / 4; var o = f - n, s = Math.cos(e), h = Math.sin(e), c = u * h, l = iu, a = ru, v = r * s + c * Math.cos(o), y = c * Math.sin(o); iu = l * v - a * y; ru = a * v + l * y; n = f; r = s; u = h } var f, e, n, r, u; lt.point = function (s, h) { lt.point = o; n = (f = s) * i; r = Math.cos(h = (e = h) * i / 2 + t / 4); u = Math.sin(h) }; lt.lineEnd = function () { o(f, e) } } function dc(t) { function s(n, t) { n < r && (r = n); n > f && (f = n); t < u && (u = t); t > e && (e = t) } function h() { i.point = i.lineEnd = o } var r, u, f, e, i = { point: s, lineStart: o, lineEnd: o, polygonStart: function () { i.lineEnd = h }, polygonEnd: function () { i.point = s } }; return function (o) { return e = f = -(r = u = Infinity), n.geo.stream(o, t(i)), [[r, u], [f, e]] } } function gc(n, t) { if (!l) { ++rt; n *= i; var r = Math.cos(t *= i); a += (r * Math.cos(n) - a) / rt; v += (r * Math.sin(n) - v) / rt; h += (Math.sin(t) - h) / rt } } function cw() { var n, t, i; l = 1; le(); l = 2; i = nt.point; nt.point = function (r, u) { i(n = r, t = u) }; nt.lineEnd = function () { nt.point(n, t); ae(); nt.lineEnd = ae } } function le() { function u(u, f) { u *= i; var l = Math.cos(f *= i), o = l * Math.cos(u), s = l * Math.sin(u), c = Math.sin(f), e = Math.atan2(Math.sqrt((e = t * c - r * s) * e + (e = r * o - n * c) * e + (e = n * s - t * o) * e), n * o + t * s + r * c); rt += e; a += e * (n + (n = o)); v += e * (t + (t = s)); h += e * (r + (r = c)) } var n, t, r; l > 1 || (l < 1 && (l = 1, rt = a = v = h = 0), nt.point = function (f, e) { f *= i; var o = Math.cos(e *= i); n = o * Math.cos(f); t = o * Math.sin(f); r = Math.sin(e); nt.point = u }) } function ae() { nt.point = gc } function uu(n) { var t = n[0], i = n[1], r = Math.cos(i); return [r * Math.cos(t), r * Math.sin(t), Math.sin(i)] } function fu(n, t) { return n[0] * t[0] + n[1] * t[1] + n[2] * t[2] } function nl(n, t) { return [n[1] * t[2] - n[2] * t[1], n[2] * t[0] - n[0] * t[2], n[0] * t[1] - n[1] * t[0]] } function ve(n, t) { n[0] += t[0]; n[1] += t[1]; n[2] += t[2] } function eu(n, t) { return [n[0] * t, n[1] * t, n[2] * t] } function lw(n) { var t = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]); n[0] /= t; n[1] /= t; n[2] /= t } function yi() { return !0 } function ye(n) { return [Math.atan2(n[1], n[0]), Math.asin(Math.max(-1, Math.min(1, n[2])))] } function ou(n, t) { return Math.abs(n[0] - t[0]) < r && Math.abs(n[1] - t[1]) < r } function tl(n, t, i, r, u) { var h = [], o = [], l, f, s, c, e; if (n.forEach(function (n) { var s, i, r, e, t, f; if (!((s = n.length - 1) <= 0)) { if (i = n[0], r = n[s], ou(i, r)) { for (u.lineStart(), e = 0; e < s; ++e) u.point((i = n[e])[0], i[1]); u.lineEnd(); return } t = { point: i, points: n, other: null, visited: !1, entry: !0, subject: !0 }; f = { point: i, points: [i], other: t, visited: !1, entry: !1, subject: !1 }; t.other = f; h.push(t); o.push(f); t = { point: r, points: [r], other: null, visited: !1, entry: !1, subject: !0 }; f = { point: r, points: [r], other: t, visited: !1, entry: !0, subject: !1 }; t.other = f; h.push(t); o.push(f) } }), o.sort(t), il(h), il(o), h.length) { if (i) for (var e = 1, a = !i(o[0].point), v = o.length; e < v; ++e) o[e].entry = a = !a; for (l = h[0]; ;) { for (f = l; f.visited;) if ((f = f.next) === l) return; s = f.points; u.lineStart(); do { if (f.visited = f.other.visited = !0, f.entry) { if (f.subject) for (e = 0; e < s.length; e++) u.point((c = s[e])[0], c[1]); else r(f.point, f.next.point, 1, u); f = f.next } else { if (f.subject) for (s = f.prev.points, e = s.length; --e >= 0;) u.point((c = s[e])[0], c[1]); else r(f.point, f.prev.point, -1, u); f = f.prev } f = f.other; s = f.points } while (!f.visited); u.lineEnd() } } } function il(n) { if (r = n.length) { for (var r, u = 0, t = n[0], i; ++u < r;) t.next = i = n[u], i.prev = t, t = i; t.next = i = n[0]; i.prev = t } } function rl(t, i, u) { return function (f) { function l(n, i) { t(n, i) && f.point(n, i) } function d(n, t) { c.point(n, t) } function p() { e.point = d; c.lineStart() } function w() { e.point = l; c.lineEnd() } function k(n, t) { h.point(n, t); s.push([n, t]) } function g() { h.lineStart(); s = [] } function nt() { var i, r, e; k(s[0][0], s[0][1]); h.lineEnd(); var u = h.clean(), n = b.buffer(), t, i = n.length; if (!i) { y = !0; v += fl(s, -1); s = null; return } if (s = null, u & 1) { for (t = n[0], a += fl(t, 1), i = t.length - 1, r = -1, f.lineStart() ; ++r < i;) f.point((e = t[r])[0], e[1]); f.lineEnd(); return } i > 1 && u & 2 && n.push(n.pop().concat(n.shift())); o.push(n.filter(aw)) } var c = i(f), e = { point: l, lineStart: p, lineEnd: w, polygonStart: function () { e.point = k; e.lineStart = g; e.lineEnd = nt; y = !1; v = a = 0; o = []; f.polygonStart() }, polygonEnd: function () { e.point = l; e.lineStart = p; e.lineEnd = w; o = n.merge(o); o.length ? tl(o, vw, null, u, f) : (a < -r || y && v < -r) && (f.lineStart(), u(null, null, 1, f), f.lineEnd()); f.polygonEnd(); o = null }, sphere: function () { f.polygonStart(); f.lineStart(); u(null, null, 1, f); f.lineEnd(); f.polygonEnd() } }, o, a, v, y, b = ul(), h = i(b), s; return e } } function aw(n) { return n.length > 1 } function ul() { var n = [], t; return { lineStart: function () { n.push(t = []) }, point: function (n, i) { t.push([n, i]) }, lineEnd: o, buffer: function () { var i = n; return n = [], t = null, i }, rejoin: function () { n.length > 1 && n.push(n.pop().concat(n.shift())) } } } function fl(n, i) { if (!(v = n.length)) return 0; for (var v, y = 0, a = 0, s = n[0], c = s[0], l = s[1], h = Math.cos(l), u = Math.atan2(i * Math.sin(c) * h, Math.sin(l)), f = 1 - i * Math.cos(c) * h, p = u, e, o; ++y < v;) (s = n[y], h = Math.cos(l = s[1]), e = Math.atan2(i * Math.sin(c = s[0]) * h, Math.sin(l)), o = 1 - i * Math.cos(c) * h, Math.abs(f - 2) < r && Math.abs(o - 2) < r) || (Math.abs(o) < r || Math.abs(f) < r || (Math.abs(Math.abs(e - u) - t) < r ? o + f > 2 && (a += 4 * (e - u)) : a += Math.abs(f - 2) < r ? 4 * (e - p) : ((3 * t + e - u) % (2 * t) - t) * (f + o)), p = u, u = e, f = o); return a } function vw(n, i) { return ((n = n.point)[0] < 0 ? n[1] - t / 2 - r : t / 2 - n[1]) - ((i = i.point)[0] < 0 ? i[1] - t / 2 - r : t / 2 - i[1]) } function yw(n) { var u = NaN, i = NaN, f = NaN, e; return { lineStart: function () { n.lineStart(); e = 1 }, point: function (o, s) { var h = o > 0 ? t : -t, c = Math.abs(o - u); Math.abs(c - t) < r ? (n.point(u, i = (i + s) / 2 > 0 ? t / 2 : -t / 2), n.point(f, i), n.lineEnd(), n.lineStart(), n.point(h, i), n.point(o, i), e = 0) : f !== h && c >= t && (Math.abs(u - f) < r && (u -= f * r), Math.abs(o - h) < r && (o -= h * r), i = pw(u, i, o, s), n.point(f, i), n.lineEnd(), n.lineStart(), n.point(h, i), e = 0); n.point(u = o, i = s); f = h }, lineEnd: function () { n.lineEnd(); u = i = NaN }, clean: function () { return 2 - e } } } function pw(n, t, i, u) { var f, e, o = Math.sin(n - i); return Math.abs(o) > r ? Math.atan((Math.sin(t) * (e = Math.cos(u)) * Math.sin(i) - Math.sin(u) * (f = Math.cos(t)) * Math.sin(n)) / (f * e * o)) : (t + u) / 2 } function ww(n, i, u, f) { var e, o; n == null ? (e = u * t / 2, f.point(-t, e), f.point(0, e), f.point(t, e), f.point(t, 0), f.point(t, -e), f.point(0, -e), f.point(-t, -e), f.point(-t, 0), f.point(-t, e)) : Math.abs(n[0] - i[0]) > r ? (o = (n[0] < i[0] ? 1 : -1) * t, e = u * o / 2, f.point(-o, e), f.point(0, e), f.point(o, e)) : f.point(i[0], i[1]) } function bw(n) { function o(n, t) { return Math.cos(n) * Math.cos(t) > u } function l(n) { var i, a, u, l, c; return { lineStart: function () { l = u = !1; c = 1 }, point: function (v, y) { var p = [v, y], w, b = o(v, y), d = f ? b ? 0 : s(v, y) : b ? s(v + (v < 0 ? t : -t), y) : 0, k; !i && (l = u = b) && n.lineStart(); b !== u && (w = e(i, p), (ou(i, w) || ou(p, w)) && (p[0] += r, p[1] += r, b = o(p[0], p[1]))); b !== u ? (c = 0, b ? (n.lineStart(), w = e(p, i), n.point(w[0], w[1])) : (w = e(i, p), n.point(w[0], w[1]), n.lineEnd()), i = w) : h && i && f ^ b && (d & a || !(k = e(p, i, !0)) || (c = 0, f ? (n.lineStart(), n.point(k[0][0], k[0][1]), n.point(k[1][0], k[1][1]), n.lineEnd()) : (n.point(k[1][0], k[1][1]), n.lineEnd(), n.lineStart(), n.point(k[0][0], k[0][1])))); !b || i && ou(i, p) || n.point(p[0], p[1]); i = p; u = b; a = d }, lineEnd: function () { u && n.lineEnd(); i = null }, clean: function () { return c | (l && u) << 1 } } } function e(n, i, f) { var ft = uu(n), et = uu(i), it = [1, 0, 0], l = nl(ft, et), rt = fu(l, l), w = l[0], b = rt - w * w, d, e, tt; if (!b) return !f && n; var ot = u * rt / b, st = -u * w / b, ht = nl(it, l), o = eu(it, ot), ct = eu(l, st); ve(o, ct); var a = ht, y = fu(o, a), k = fu(a, a), ut = y * y - k * (fu(o, o) - 1); if (!(ut < 0)) { if (d = Math.sqrt(ut), e = eu(a, (-y - d) / k), ve(e, o), e = ye(e), !f) return e; var s = n[0], v = i[0], h = n[1], c = i[1], p; v < s && (p = s, s = v, v = p); var g = v - s, nt = Math.abs(g - t) < r, lt = nt || g < r; return !nt && c < h && (p = h, h = c, c = p), (lt ? nt ? h + c > 0 ^ e[1] < (Math.abs(e[0] - s) < r ? h : c) : h <= e[1] && e[1] <= c : g > t ^ (s <= e[0] && e[0] <= v)) ? (tt = eu(a, (-y + d) / k), ve(tt, o), [e, ye(tt)]) : void 0 } } function s(i, r) { var e = f ? n : t - n, u = 0; return i < -e ? u |= 1 : i > e && (u |= 2), r < -e ? u |= 4 : r > e && (u |= 8), u } var u = Math.cos(n), f = u > 0, h = Math.abs(u) > r, c = ke(n, 6 * i); return rl(o, l, c) } function kw(t, i, u, f) { function e(n, f) { return Math.abs(n[0] - t) < r ? f > 0 ? 0 : 3 : Math.abs(n[0] - u) < r ? f > 0 ? 2 : 1 : Math.abs(n[1] - i) < r ? f > 0 ? 1 : 0 : f > 0 ? 3 : 2 } function s(n, t) { return o(n.point, t.point) } function o(n, t) { var i = e(n, 1), r = e(t, 1); return i !== r ? i - r : i === 0 ? t[1] - n[1] : i === 1 ? n[0] - t[0] : i === 2 ? n[1] - t[1] : t[0] - n[0] } function h(n, e) { var s = e[0] - n[0], h = e[1] - n[1], o = [0, 1]; return Math.abs(s) < r && Math.abs(h) < r ? t <= n[0] && n[0] <= u && i <= n[1] && n[1] <= f : su(t - n[0], s, o) && su(n[0] - u, -s, o) && su(i - n[1], h, o) && su(n[1] - f, -h, o) ? (o[1] < 1 && (e[0] = n[0] + o[1] * s, e[1] = n[1] + o[1] * h), o[0] > 0 && (n[0] += o[0] * s, n[1] += o[0] * h), !0) : !1 } return function (r) { function ht(n) { var r = e(n, -1); return g([r === 0 || r === 3 ? t : u, r > 1 ? f : i]) } function g(n) { for (var i = 0, o = l.length, r = n[1], u = 0; u < o; ++u) for (var f = 1, e = l[u], s = e.length, t = e[0]; f < s; ++f) b = e[f], t[1] <= r ? b[1] > r && nt(t, b, n) > 0 && ++i : b[1] <= r && nt(t, b, n) < 0 && --i, t = b; return i !== 0 } function nt(n, t, i) { return (t[0] - n[0]) * (i[1] - n[1]) - (i[0] - n[0]) * (t[1] - n[1]) } function tt(n, r, s, h) { var c = 0, l = 0; if (n == null || (c = e(n, s)) !== (l = e(r, s)) || o(n, r) < 0 ^ s > 0) { do h.point(c === 0 || c === 3 ? t : u, c > 1 ? f : i); while ((c = (c + s + 4) % 4) !== l) } else h.point(r[0], r[1]) } function it(n, r) { return t <= n && n <= u && i <= r && r <= f } function rt(n, t) { it(n, t) && r.point(n, t) } function ct() { p.point = ot; l && l.push(y = []); d = !0; a = !1; w = k = NaN } function lt() { c && (ot(ut, ft), et && a && v.rejoin(), c.push(v.buffer())); p.point = rt; a && r.lineEnd() } function ot(n, t) { var i, u, f; n = Math.max(-pi, Math.min(pi, n)); t = Math.max(-pi, Math.min(pi, t)); i = it(n, t); l && y.push([n, t]); d ? (ut = n, ft = t, et = i, d = !1, i && (r.lineStart(), r.point(n, t))) : i && a ? r.point(n, t) : (u = [w, k], f = [n, t], h(u, f) ? (a || (r.lineStart(), r.point(u[0], u[1])), r.point(f[0], f[1]), i || r.lineEnd()) : (r.lineStart(), r.point(n, t))); w = n; k = t; a = i } var st = r, v = ul(), c, l, y, p = { point: rt, lineStart: ct, lineEnd: lt, polygonStart: function () { r = v; c = []; l = [] }, polygonEnd: function () { r = st; (c = n.merge(c)).length ? (r.polygonStart(), tl(c, s, ht, tt, r), r.polygonEnd()) : g([t, i]) && (r.polygonStart(), r.lineStart(), tt(null, null, 1, r), r.lineEnd(), r.polygonEnd()); c = l = y = null } }, ut, ft, et, w, k, a, d; return p } } function su(n, t, i) { if (Math.abs(t) < r) return n <= 0; var u = n / t; if (t > 0) { if (u > i[1]) return !1; u > i[0] && (i[0] = u) } else { if (u < i[0]) return !1; u < i[1] && (i[1] = u) } return !0 } function el(n, t) { function i(i, r) { return i = n(i, r), t(i[0], i[1]) } return n.invert && t.invert && (i.invert = function (i, r) { return i = t.invert(i, r), i && n.invert(i[0], i[1]) }), i } function ol(n) { function f(t) { function y(i, r) { i = n(i, r); t.point(i[0], i[1]) } function l() { f = NaN; r.point = a; t.lineStart() } function a(r, l) { var a = uu([r, l]), v = n(r, l); i(f, e, c, o, s, h, f = v[0], e = v[1], c = r, o = a[0], s = a[1], h = a[2], u, t); t.point(f, e) } function v() { r.point = y; t.lineEnd() } function p() { var n, d, y, p, w, b, k; l(); r.point = function (t, i) { a(n = t, d = i); y = f; p = e; w = o; b = s; k = h; r.point = a }; r.lineEnd = function () { i(f, e, c, o, s, h, y, p, n, w, b, k, u, t); r.lineEnd = v; v() } } var c, f, e, o, s, h, r = { point: y, lineStart: l, lineEnd: v, polygonStart: function () { t.polygonStart(); r.lineStart = p }, polygonEnd: function () { t.polygonEnd(); r.lineStart = l } }; return r } function i(u, f, e, o, s, h, c, l, a, v, y, p, w, b) { var nt = c - u, tt = l - f, ut = nt * nt + tt * tt; if (ut > 4 * t && w--) { var d = o + v, g = s + y, k = h + p, ft = Math.sqrt(d * d + g * g + k * k), lt = Math.asin(k /= ft), et = Math.abs(Math.abs(k) - 1) < r ? (e + a) / 2 : Math.atan2(g, d), ot = n(et, lt), it = ot[0], rt = ot[1], st = it - u, ht = rt - f, ct = tt * st - nt * ht; (ct * ct / ut > t || Math.abs((nt * st + tt * ht) / ut - .5) > .3) && (i(u, f, e, o, s, h, it, rt, et, d /= ft, g /= ft, k, w, b), b.point(it, rt), i(it, rt, et, d, g, k, c, l, a, v, y, p, w, b)) } } var t = .5, u = 16; return f.precision = function (n) { return arguments.length ? (u = (t = n * n) > 0 && 16, f) : Math.sqrt(t) }, f } function dt(n) { return we(function () { return n })() } function we(t) { function r(n) { return n = c(n[0] * i, n[1] * i), [n[0] * u + s, h - n[1] * u] } function ut(n) { return n = c.invert((n[0] - s) / u, (h - n[1]) / u), n && [n[0] * e, n[1] * e] } function o() { c = el(g = be(p, w, b), f); var n = f(v, y); return s = l - n[0] * u, h = a + n[1] * u, r } var f, g, c, nt = ol(function (n, t) { return n = f(n, t), [n[0] * u + s, h - n[1] * u] }), u = 150, l = 480, a = 250, v = 0, y = 0, p = 0, w = 0, b = 0, s, h, tt = pe, it = d, k = null, rt = null; return r.stream = function (n) { return dw(g, tt(nt(it(n)))) }, r.clipAngle = function (n) { return arguments.length ? (tt = n == null ? (k = n, pe) : bw((k = +n) * i), r) : k }, r.clipExtent = function (n) { return arguments.length ? (rt = n, it = n == null ? d : kw(n[0][0], n[0][1], n[1][0], n[1][1]), r) : rt }, r.scale = function (n) { return arguments.length ? (u = +n, o()) : u }, r.translate = function (n) { return arguments.length ? (l = +n[0], a = +n[1], o()) : [l, a] }, r.center = function (n) { return arguments.length ? (v = n[0] % 360 * i, y = n[1] % 360 * i, o()) : [v * e, y * e] }, r.rotate = function (n) { return arguments.length ? (p = n[0] % 360 * i, w = n[1] % 360 * i, b = n.length > 2 ? n[2] % 360 * i : 0, o()) : [p * e, w * e, b * e] }, n.rebind(r, nt, "precision"), function () { return f = t.apply(this, arguments), r.invert = f.invert && ut, o() } } function dw(n, r) { return { point: function (u, f) { f = n(u * i, f * i); u = f[0]; r.point(u > t ? u - 2 * t : u < -t ? u + 2 * t : u, f[1]) }, sphere: function () { r.sphere() }, lineStart: function () { r.lineStart() }, lineEnd: function () { r.lineEnd() }, polygonStart: function () { r.polygonStart() }, polygonEnd: function () { r.polygonEnd() } } } function wi(n, t) { return [n, t] } function be(n, t, i) { return n ? t || i ? el(hl(n), cl(t, i)) : hl(n) : t || i ? cl(t, i) : wi } function sl(n) { return function (i, r) { return i += n, [i > t ? i - 2 * t : i < -t ? i + 2 * t : i, r] } } function hl(n) { var t = sl(n); return t.invert = sl(-n), t } function cl(n, t) { function e(n, t) { var e = Math.cos(t), o = Math.cos(n) * e, s = Math.sin(n) * e, h = Math.sin(t), c = h * i + o * r; return [Math.atan2(s * u - c * f, o * i - h * r), Math.asin(Math.max(-1, Math.min(1, c * u + s * f)))] } var i = Math.cos(n), r = Math.sin(n), u = Math.cos(t), f = Math.sin(t); return e.invert = function (n, t) { var e = Math.cos(t), o = Math.cos(n) * e, s = Math.sin(n) * e, h = Math.sin(t), c = h * u - s * f; return [Math.atan2(s * u + h * f, o * i + c * r), Math.asin(Math.max(-1, Math.min(1, c * i - o * r)))] }, e } function ke(n, i) { var r = Math.cos(n), u = Math.sin(n); return function (f, e, o, s) { var c, l, h; for (f != null ? (f = ll(r, f), e = ll(r, e), (o > 0 ? f < e : f > e) && (f += o * 2 * t)) : (f = n + o * 2 * t, e = n), l = o * i, h = f; o > 0 ? h > e : h < e; h -= l) s.point((c = ye([r, -u * Math.cos(h), -u * Math.sin(h)]))[0], c[1]) } } function ll(n, t) { var i = uu(t), u; return i[0] -= n, lw(i), u = gp(-i[1]), ((-i[2] < 0 ? -u : u) + 2 * Math.PI - r) % (2 * Math.PI) } function al(t, i, u) { var f = n.range(t, i - r, u).concat(i); return function (n) { return f.map(function (t) { return [n, t] }) } } function vl(t, i, u) { var f = n.range(t, i - r, u).concat(i); return function (n) { return f.map(function (t) { return [t, n] }) } } function de(n) { return n.source } function ge(n) { return n.target } function gw(n, t, i, r) { var f = Math.cos(t), c = Math.sin(t), o = Math.cos(r), l = Math.sin(r), a = f * Math.cos(n), v = f * Math.sin(n), y = o * Math.cos(i), p = o * Math.sin(i), u = 2 * Math.asin(Math.sqrt(uc(r - t) + f * o * uc(i - n))), s = 1 / Math.sin(u), h = u ? function (n) { var t = Math.sin(n *= u) * s, i = Math.sin(u - n) * s, r = i * a + t * y, f = i * v + t * p, o = i * c + t * l; return [Math.atan2(f, r) * e, Math.atan2(o, Math.sqrt(r * r + f * f)) * e] } : function () { return [n * e, t * e] }; return h.distance = u, h } function nb() { function u(u, f) { var s = Math.sin(f *= i), o = Math.cos(f), e = Math.abs((u *= i) - r), h = Math.cos(e); no += Math.atan2(Math.sqrt((e = o * Math.sin(e)) * e + (e = t * s - n * o * h) * e), n * s + t * o * h); r = u; n = s; t = o } var r, n, t; ni.point = function (f, e) { r = f * i; n = Math.sin(e *= i); t = Math.cos(e); ni.point = u }; ni.lineEnd = function () { ni.point = ni.lineEnd = o } } function to(n) { var i = 0, r = t / 3, u = we(n), f = u(i, r); return f.parallels = function (n) { return arguments.length ? u(i = n[0] * t / 180, r = n[1] * t / 180) : [i / t * 180, r / t * 180] }, f } function yl(n, t) { function e(n, t) { var r = Math.sqrt(u - 2 * i * Math.sin(t)) / i; return [r * Math.sin(n *= i), f - r * Math.cos(n)] } var r = Math.sin(n), i = (r + Math.sin(t)) / 2, u = 1 + r * (2 * i - r), f = Math.sqrt(u) / i; return e.invert = function (n, t) { var r = f - t; return [Math.atan2(n, r) / i, Math.asin((u - (n * n + r * r) * i * i) / (2 * i))] }, e } function io(n, t) { var i = n(t[0]), r = n([.5 * (t[0][0] + t[1][0]), t[0][1]]), u = n([t[1][0], t[0][1]]), v = n(t[1]), y = r[1] - i[1], p = r[0] - i[0], w = u[1] - r[1], b = u[0] - r[0], f = y / p, o = w / b, e = .5 * (f * o * (i[1] - u[1]) + o * (i[0] + r[0]) - f * (r[0] + u[0])) / (o - f), s = (.5 * (i[0] + r[0]) - e) / f + .5 * (i[1] + r[1]), h = v[0] - e, c = v[1] - s, l = i[0] - e, a = i[1] - s, k = h * h + c * c, d = l * l + a * a, g = Math.atan2(c, h), nt = Math.atan2(a, l); return function (t) { var i = t[0] - e, r = t[1] - s, u = i * i + r * r, f = Math.atan2(r, i); if (k < u && u < d && g < f && f < nt) return n.invert(t) } } function tb() { function u(i, r) { uo += t * i - n * r; n = i; t = r } var i, r, n, t; at.point = function (f, e) { at.point = u; i = n = f; r = t = e }; at.lineEnd = function () { u(i, r) } } function ib() { function i(n, i) { t.push("M", n, ",", i, r) } function f(i, r) { t.push("M", i, ",", r); n.point = e } function e(n, i) { t.push("L", n, ",", i) } function u() { n.point = i } function o() { t.push("Z") } var r = bl(4.5), t = [], n = { point: i, lineStart: function () { n.point = f }, lineEnd: u, polygonStart: function () { n.lineEnd = o }, polygonEnd: function () { n.lineEnd = u; n.point = i }, pointRadius: function (t) { return r = bl(t), n }, result: function () { if (t.length) { var n = t.join(""); return t = [], n } } }; return n } function fo(n, t) { l || (a += n, v += t, ++h) } function pl() { function i(i, r) { var f = i - n, e = r - t, u = Math.sqrt(f * f + e * e); a += u * (n + i) / 2; v += u * (t + r) / 2; h += u; n = i; t = r } var n, t; if (l !== 1) if (l < 1) l = 1, a = v = h = 0; else return; tt.point = function (r, u) { tt.point = i; n = r; t = u } } function wl() { tt.point = fo } function rb() { function u(i, r) { var u = t * i - n * r; a += u * (n + i); v += u * (t + r); h += u * 3; n = i; t = r } var i, r, n, t; l < 2 && (l = 2, a = v = h = 0); tt.point = function (f, e) { tt.point = u; i = n = f; r = t = e }; tt.lineEnd = function () { u(i, r) } } function ub(n) { function r(i, r) { n.moveTo(i, r); n.arc(i, r, u, 0, 2 * t) } function e(t, r) { n.moveTo(t, r); i.point = s } function s(t, i) { n.lineTo(t, i) } function f() { i.point = r } function h() { n.closePath() } var u = 4.5, i = { point: r, lineStart: function () { i.point = e }, lineEnd: f, polygonStart: function () { i.lineEnd = h }, polygonEnd: function () { i.lineEnd = f; i.point = r }, pointRadius: function (n) { return u = n, i }, result: o }; return i } function bl(n) { return "m0," + n + "a" + n + "," + n + " 0 1,1 0," + -2 * n + "a" + n + "," + n + " 0 1,1 0," + 2 * n + "z" } function fb(n) { var t = ol(function (t, i) { return n([t * e, i * e]) }); return function (n) { return n = t(n), { point: function (t, r) { n.point(t * i, r * i) }, sphere: function () { n.sphere() }, lineStart: function () { n.lineStart() }, lineEnd: function () { n.lineEnd() }, polygonStart: function () { n.polygonStart() }, polygonEnd: function () { n.polygonEnd() } } } } function bi(n, t) { function i(t, i) { var f = Math.cos(t), r = Math.cos(i), u = n(f * r); return [u * r * Math.sin(t), u * Math.sin(i)] } return i.invert = function (n, i) { var r = Math.sqrt(n * n + i * i), u = t(r), f = Math.sin(u), e = Math.cos(u); return [Math.atan2(n * f, r * e), Math.asin(r && i * f / r)] }, i } function kl(n, i) { function s(n, i) { var o = Math.abs(Math.abs(i) - t / 2) < r ? 0 : e / Math.pow(f(i), u); return [o * Math.sin(u * n), e - o * Math.cos(u * n)] } var o = Math.cos(n), f = function (n) { return Math.tan(t / 4 + n / 2) }, u = n === i ? Math.sin(n) : Math.log(o / Math.cos(i)) / Math.log(f(i) / f(n)), e = o * Math.pow(f(n), u) / u; return u ? (s.invert = function (n, i) { var r = e - i, f = rc(u) * Math.sqrt(n * n + r * r); return [Math.atan2(n, r) / u, 2 * Math.atan(Math.pow(e / f, 1 / u)) - t / 2] }, s) : hu } function dl(n, t) { function e(n, t) { var r = u - t; return [r * Math.sin(i * n), u - r * Math.cos(i * n)] } var f = Math.cos(n), i = n === t ? Math.sin(n) : (f - Math.cos(t)) / (t - n), u = f / i + n; return Math.abs(i) < r ? wi : (e.invert = function (n, t) { var r = u - t; return [Math.atan2(n, r) / i, u - rc(i) * Math.sqrt(n * n + r * r)] }, e) } function hu(n, i) { return [n, Math.log(Math.tan(t / 4 + i / 2))] } function gl(n) { var i = dt(n), u = i.scale, f = i.translate, e = i.clipExtent, r; return i.scale = function () { var n = u.apply(i, arguments); return n === i ? r ? i.clipExtent(null) : i : n }, i.translate = function () { var n = f.apply(i, arguments); return n === i ? r ? i.clipExtent(null) : i : n }, i.clipExtent = function (n) { var h = e.apply(i, arguments), o, s; return h === i ? (r = n == null) && (o = t * u(), s = f(), e([[s[0] - o, s[1] - o], [s[0] + o, s[1] + o]])) : r && (h = null), h }, i.clipExtent(null) } function lo(n, t) { var i = Math.cos(t) * Math.sin(n); return [Math.log((1 + i) / (1 - i)) / 2, Math.atan2(Math.tan(t), Math.cos(n))] } function na(n) { function t(t) { function a() { c.push("M", i(n(o), s)) } for (var c = [], o = [], h = -1, v = t.length, l, y = f(r), p = f(u) ; ++h < v;) e.call(this, l = t[h], h) ? o.push([+y.call(this, l, h), +p.call(this, l, h)]) : o.length && (a(), o = []); return o.length && a(), c.length ? c.join("") : null } var r = ut, u = vt, e = yi, i = g, o = i.key, s = .7; return t.x = function (n) { return arguments.length ? (r = n, t) : r }, t.y = function (n) { return arguments.length ? (u = n, t) : u }, t.defined = function (n) { return arguments.length ? (e = n, t) : e }, t.interpolate = function (n) { return arguments.length ? (o = typeof n == "function" ? i = n : (i = cu.get(n) || g).key, t) : o }, t.tension = function (n) { return arguments.length ? (s = n, t) : s }, t } function ut(n) { return n[0] } function vt(n) { return n[1] } function g(n) { return n.join("L") } function eb(n) { return g(n) + "Z" } function ao(n) { for (var i = 0, u = n.length, t = n[0], r = [t[0], ",", t[1]]; ++i < u;) r.push("V", (t = n[i])[1], "H", t[0]); return r.join("") } function vo(n) { for (var i = 0, u = n.length, t = n[0], r = [t[0], ",", t[1]]; ++i < u;) r.push("H", (t = n[i])[0], "V", t[1]); return r.join("") } function ob(n, t) { return n.length < 4 ? g(n) : n[1] + lu(n.slice(1, n.length - 1), yo(n, t)) } function sb(n, t) { return n.length < 3 ? g(n) : n[0] + lu((n.push(n[0]), n), yo([n[n.length - 2]].concat(n, [n[1]]), t)) } function hb(n, t) { return n.length < 3 ? g(n) : n[0] + lu(n, yo(n, t)) } function lu(n, t) { var o, h; if (t.length < 1 || n.length != t.length && n.length != t.length + 2) return g(n); var c = n.length != t.length, f = "", s = n[0], i = n[1], e = t[0], r = e, u = 1; if (c && (f += "Q" + (i[0] - e[0] * 2 / 3) + "," + (i[1] - e[1] * 2 / 3) + "," + i[0] + "," + i[1], s = n[1], u = 2), t.length > 1) for (r = t[1], i = n[u], u++, f += "C" + (s[0] + e[0]) + "," + (s[1] + e[1]) + "," + (i[0] - r[0]) + "," + (i[1] - r[1]) + "," + i[0] + "," + i[1], o = 2; o < t.length; o++, u++) i = n[u], r = t[o], f += "S" + (i[0] - r[0]) + "," + (i[1] - r[1]) + "," + i[0] + "," + i[1]; return c && (h = n[u], f += "Q" + (i[0] + r[0] * 2 / 3) + "," + (i[1] + r[1] * 2 / 3) + "," + h[0] + "," + h[1]), f } function yo(n, t) { for (var u = [], f = (1 - t) / 2, r, e = n[0], i = n[1], o = 1, s = n.length; ++o < s;) r = e, e = i, i = n[o], u.push([f * (i[0] - r[0]), f * (i[1] - r[1])]); return u } function ta(n) { if (n.length < 3) return g(n); var u = 1, s = n.length, t = n[0], f = t[0], e = t[1], i = [f, f, f, (t = n[1])[0]], r = [e, e, e, t[1]], o = [f, ",", e]; for (ki(o, i, r) ; ++u < s;) t = n[u], i.shift(), i.push(t[0]), r.shift(), r.push(t[1]), ki(o, i, r); for (u = -1; ++u < 2;) i.shift(), i.push(t[0]), r.shift(), r.push(t[1]), ki(o, i, r); return o.join("") } function cb(n) { if (n.length < 4) return g(n); for (var f = [], i = -1, e = n.length, t, r = [0], u = [0]; ++i < 3;) t = n[i], r.push(t[0]), u.push(t[1]); for (f.push(ft(ci, r) + "," + ft(ci, u)), --i; ++i < e;) t = n[i], r.shift(), r.push(t[0]), u.shift(), u.push(t[1]), ki(f, r, u); return f.join("") } function lb(n) { for (var f, i = -1, e = n.length, o = e + 4, t, r = [], u = []; ++i < 4;) t = n[i % e], r.push(t[0]), u.push(t[1]); for (f = [ft(ci, r), ",", ft(ci, u)], --i; ++i < o;) t = n[i % e], r.shift(), r.push(t[0]), u.shift(), u.push(t[1]), ki(f, r, u); return f.join("") } function ab(n, t) { var i = n.length - 1; if (i) for (var e = n[0][0], o = n[0][1], s = n[i][0] - e, h = n[i][1] - o, u = -1, r, f; ++u <= i;) r = n[u], f = u / i, r[0] = t * r[0] + (1 - t) * (e + f * s), r[1] = t * r[1] + (1 - t) * (o + f * h); return ta(n) } function ft(n, t) { return n[0] * t[0] + n[1] * t[1] + n[2] * t[2] + n[3] * t[3] } function ki(n, t, i) { n.push("C", ft(ia, t), ",", ft(ia, i), ",", ft(ra, t), ",", ft(ra, i), ",", ft(ci, t), ",", ft(ci, i)) } function po(n, t) { return (t[1] - n[1]) / (t[0] - n[0]) } function vb(n) { for (var t = 0, e = n.length - 1, i = [], f = n[0], r = n[1], u = i[0] = po(f, r) ; ++t < e;) i[t] = (u + (u = po(f = r, r = n[t + 1]))) / 2; return i[t] = u, i } function yb(n) { for (var s = [], u, f, e, i, r = vb(n), t = -1, o = n.length - 1; ++t < o;) u = po(n[t], n[t + 1]), Math.abs(u) < 1e-6 ? r[t] = r[t + 1] = 0 : (f = r[t] / u, e = r[t + 1] / u, i = f * f + e * e, i > 9 && (i = u * 3 / Math.sqrt(i), r[t] = i * f, r[t + 1] = i * e)); for (t = -1; ++t <= o;) i = (n[Math.min(o, t + 1)][0] - n[Math.max(0, t - 1)][0]) / (6 * (1 + r[t] * r[t])), s.push([i || 0, r[t] * i || 0]); return s } function pb(n) { return n.length < 3 ? g(n) : n[0] + lu(n, yb(n)) } function wb(n, t, i, r) { var u, f, e, o, s, h, c; return u = r[n], f = u[0], e = u[1], u = r[t], o = u[0], s = u[1], u = r[i], h = u[0], c = u[1], (c - e) * (o - f) - (s - e) * (h - f) > 0 } function wo(n, t, i) { return (i[0] - t[0]) * (n[1] - t[1]) < (i[1] - t[1]) * (n[0] - t[0]) } function ua(n, t, i, r) { var u = n[0], e = i[0], o = t[0] - u, s = r[0] - e, f = n[1], h = i[1], c = t[1] - f, l = r[1] - h, a = (s * (f - h) - l * (u - e)) / (l * o - s * c); return [u + a * o, f + a * c] } function bo(n, t) { var l = { list: n.map(function (n, t) { return { index: t, x: n[0], y: n[1] } }).sort(function (n, t) { return n.y < t.y ? -1 : n.y > t.y ? 1 : n.x < t.x ? -1 : n.x > t.x ? 1 : 0 }), bottomSite: null }, i = { list: [], leftEnd: null, rightEnd: null, init: function () { i.leftEnd = i.createHalfEdge(null, "l"); i.rightEnd = i.createHalfEdge(null, "l"); i.leftEnd.r = i.rightEnd; i.rightEnd.l = i.leftEnd; i.list.unshift(i.leftEnd, i.rightEnd) }, createHalfEdge: function (n, t) { return { edge: n, side: t, vertex: null, l: null, r: null } }, insert: function (n, t) { t.l = n; t.r = n.r; n.r.l = t; n.r = t }, leftBound: function (n) { var t = i.leftEnd; do t = t.r; while (t != i.rightEnd && e.rightOf(t, n)); return t.l }, del: function (n) { n.l.r = n.r; n.r.l = n.l; n.edge = null }, right: function (n) { return n.r }, left: function (n) { return n.l }, leftRegion: function (n) { return n.edge == null ? l.bottomSite : n.edge.region[n.side] }, rightRegion: function (n) { return n.edge == null ? l.bottomSite : n.edge.region[au[n.side]] } }, e = { bisect: function (n, t) { var u = { region: { l: n, r: t }, ep: { l: null, r: null } }, i = t.x - n.x, r = t.y - n.y, f = i > 0 ? i : -i, e = r > 0 ? r : -r; return u.c = n.x * i + n.y * r + (i * i + r * r) * .5, f > e ? (u.a = 1, u.b = r / i, u.c /= i) : (u.b = 1, u.a = i / r, u.c /= r), u }, intersect: function (n, t) { var i = n.edge, r = t.edge, u, h; if (!i || !r || i.region.r == r.region.r || (u = i.a * r.b - i.b * r.a, Math.abs(u) < 1e-10)) return null; var c = (i.c * r.b - r.c * i.b) / u, l = (r.c * i.a - i.c * r.a) / u, e = i.region.r, o = r.region.r, f, s; return (e.y < o.y || e.y == o.y && e.x < o.x ? (f = n, s = i) : (f = t, s = r), h = c >= s.region.r.x, h && f.side === "l" || !h && f.side === "r") ? null : { x: c, y: l } }, rightOf: function (n, t) { var i = n.edge, u = i.region.r, f = t.x > u.x, h; if (f && n.side === "l") return 1; if (!f && n.side === "r") return 0; if (i.a === 1) { var e = t.y - u.y, o = t.x - u.x, s = 0, r = 0; !f && i.b < 0 || f && i.b >= 0 ? r = s = e >= i.b * o : (r = t.x + t.y * i.b > i.c, i.b < 0 && (r = !r), r || (s = 1)); s || (h = u.x - i.region.l.x, r = i.b * (o * o - e * e) < h * e * (1 + 2 * o / h + i.b * i.b), i.b < 0 && (r = !r)) } else { var c = i.c - i.a * t.x, l = t.y - c, a = t.x - u.x, v = c - u.y; r = l * l > a * a + v * v } return n.side === "l" ? r : !r }, endPoint: function (n, i, r) { (n.ep[i] = r, n.ep[au[i]]) && t(n) }, distance: function (n, t) { var i = n.x - t.x, r = n.y - t.y; return Math.sqrt(i * i + r * r) } }, u = { list: [], insert: function (n, t, i) { var f; n.vertex = t; n.ystar = t.y + i; for (var r = 0, e = u.list, o = e.length; r < o; r++) if (f = e[r], n.ystar > f.ystar || n.ystar == f.ystar && t.x > f.vertex.x) continue; else break; e.splice(r, 0, n) }, del: function (n) { for (var t = 0, i = u.list, r = i.length; t < r && i[t] != n; ++t); i.splice(t, 1) }, empty: function () { return u.list.length === 0 }, nextEvent: function (n) { for (var t = 0, i = u.list, r = i.length; t < r; ++t) if (i[t] == n) return i[t + 1]; return null }, min: function () { var n = u.list[0]; return { x: n.vertex.x, y: n.ystar } }, extractMin: function () { return u.list.shift() } }, s, p, r, h, v, k, o, c, y, d, f, w, a, b; for (i.init(), l.bottomSite = l.list.shift(), s = l.list.shift() ; ;) if (u.empty() || (p = u.min()), s && (u.empty() || s.y < p.y || s.y == p.y && s.x < p.x)) r = i.leftBound(s), h = i.right(r), c = i.rightRegion(r), a = e.bisect(c, s), o = i.createHalfEdge(a, "l"), i.insert(r, o), f = e.intersect(r, o), f && (u.del(r), u.insert(r, f, e.distance(f, s))), r = o, o = i.createHalfEdge(a, "r"), i.insert(r, o), f = e.intersect(o, h), f && u.insert(o, f, e.distance(f, s)), s = l.list.shift(); else if (u.empty()) break; else r = u.extractMin(), v = i.left(r), h = i.right(r), k = i.right(h), c = i.leftRegion(r), y = i.rightRegion(h), w = r.vertex, e.endPoint(r.edge, r.side, w), e.endPoint(h.edge, h.side, w), i.del(r), u.del(h), i.del(h), b = "l", c.y > y.y && (d = c, c = y, y = d, b = "r"), a = e.bisect(c, y), o = i.createHalfEdge(a, b), i.insert(v, o), e.endPoint(a, au[b], w), f = e.intersect(v, o), f && (u.del(v), u.insert(v, f, e.distance(f, c))), f = e.intersect(o, k), f && u.insert(o, f, e.distance(f, c)); for (r = i.right(i.leftEnd) ; r != i.rightEnd; r = i.right(r)) t(r.edge) } function bb(n) { return n.x } function kb(n) { return n.y } function fa() { return { leaf: !0, nodes: [], point: null, x: null, y: null } } function di(n, t, i, r, u, f) { if (!n(t, i, r, u, f)) { var o = (i + u) * .5, s = (r + f) * .5, e = t.nodes; e[0] && di(n, e[0], i, r, o, s); e[1] && di(n, e[1], o, r, u, s); e[2] && di(n, e[2], i, s, o, f); e[3] && di(n, e[3], o, s, u, f) } } function ko(t, i) { t = n.rgb(t); i = n.rgb(i); var r = t.r, u = t.g, f = t.b, e = i.r - r, o = i.g - u, s = i.b - f; return function (n) { return "#" + si(Math.round(r + e * n)) + si(Math.round(u + o * n)) + si(Math.round(f + s * n)) } } function ea(n) { var t = [n.a, n.b], i = [n.c, n.d], r = sa(t), u = oa(t, i), f = sa(db(i, t, -u)) || 0; t[0] * i[1] < i[0] * t[1] && (t[0] *= -1, t[1] *= -1, r *= -1, u *= -1); this.rotate = (r ? Math.atan2(t[1], t[0]) : Math.atan2(-i[0], i[1])) * e; this.translate = [n.e, n.f]; this.scale = [r, f]; this.skew = f ? Math.atan2(u, f) * e : 0 } function oa(n, t) { return n[0] * t[0] + n[1] * t[1] } function sa(n) { var t = Math.sqrt(oa(n, n)); return t && (n[0] /= t, n[1] /= t), t } function db(n, t, i) { return n[0] += i * t[0], n[1] += i * t[1], n } function yt(n, t) { return t -= n = +n, function (i) { return n + t * i } } function ca(t, i) { var r = [], o = [], s, c = n.transform(t), l = n.transform(i), a = c.translate, u = l.translate, h = c.rotate, f = l.rotate, p = c.skew, v = l.skew, y = c.scale, e = l.scale; return a[0] != u[0] || a[1] != u[1] ? (r.push("translate(", null, ",", null, ")"), o.push({ i: 1, x: yt(a[0], u[0]) }, { i: 3, x: yt(a[1], u[1]) })) : u[0] || u[1] ? r.push("translate(" + u + ")") : r.push(""), h != f ? (h - f > 180 ? f += 360 : f - h > 180 && (h += 360), o.push({ i: r.push(r.pop() + "rotate(", null, ")") - 2, x: yt(h, f) })) : f && r.push(r.pop() + "rotate(" + f + ")"), p != v ? o.push({ i: r.push(r.pop() + "skewX(", null, ")") - 2, x: yt(p, v) }) : v && r.push(r.pop() + "skewX(" + v + ")"), y[0] != e[0] || y[1] != e[1] ? (s = r.push(r.pop() + "scale(", null, ",", null, ")"), o.push({ i: s - 4, x: yt(y[0], e[0]) }, { i: s - 2, x: yt(y[1], e[1]) })) : (e[0] != 1 || e[1] != 1) && r.push(r.pop() + "scale(" + e + ")"), s = o.length, function (n) { for (var t = -1, i; ++t < s;) r[(i = o[t]).i] = i.x(n); return r.join("") } } function la(n, t) { var u = {}, r = {}; for (var i in n) i in t ? u[i] = go(i)(n[i], t[i]) : r[i] = n[i]; for (i in t) i in n || (r[i] = t[i]); return function (n) { for (i in u) r[i] = u[i](n); return r } } function aa(n, t) { var s, u, f, h = 0, c = 0, r = [], e = [], o, i; for (n = n + "", t = t + "", gi.lastIndex = 0, u = 0; s = gi.exec(t) ; ++u) s.index && r.push(t.substring(h, c = s.index)), e.push({ i: r.length, x: s[0] }), r.push(null), h = gi.lastIndex; for (h < t.length && r.push(t.substring(h)), u = 0, o = e.length; (s = gi.exec(n)) && u < o; ++u) if (i = e[u], i.x == s[0]) { if (i.i) if (r[i.i + 1] == null) for (r[i.i - 1] += i.x, r.splice(i.i, 1), f = u + 1; f < o; ++f) e[f].i--; else for (r[i.i - 1] += i.x + r[i.i + 1], r.splice(i.i, 2), f = u + 1; f < o; ++f) e[f].i -= 2; else if (r[i.i + 1] == null) r[i.i] = i.x; else for (r[i.i] = i.x + r[i.i + 1], r.splice(i.i + 1, 1), f = u + 1; f < o; ++f) e[f].i--; e.splice(u, 1); o--; u-- } else i.x = yt(parseFloat(s[0]), parseFloat(i.x)); while (u < o) i = e.pop(), r[i.i + 1] == null ? r[i.i] = i.x : (r[i.i] = i.x + r[i.i + 1], r.splice(i.i + 1, 1)), o--; return r.length === 1 ? r[0] == null ? e[0].x : function () { return t } : function (n) { for (u = 0; u < o; ++u) r[(i = e[u]).i] = i.x(n); return r.join("") } } function nr(t, i) { for (var r = n.interpolators.length, u; --r >= 0 && !(u = n.interpolators[r](t, i)) ;); return u } function go(n) { return n == "transform" ? ca : nr } function va(n, t) { for (var u = [], r = [], e = n.length, o = t.length, f = Math.min(n.length, t.length), i = 0; i < f; ++i) u.push(nr(n[i], t[i])); for (; i < e; ++i) r[i] = n[i]; for (; i < o; ++i) r[i] = t[i]; return function (n) { for (i = 0; i < f; ++i) r[i] = u[i](n); return r } } function tk(n) { return function (t) { return t <= 0 ? 0 : t >= 1 ? 1 : n(t) } } function pa(n) { return function (t) { return 1 - n(1 - t) } } function wa(n) { return function (t) { return .5 * (t < .5 ? n(2 * t) : 2 - n(2 - 2 * t)) } } function ik(n) { return n * n } function rk(n) { return n * n * n } function uk(n) { if (n <= 0) return 0; if (n >= 1) return 1; var t = n * n, i = t * n; return 4 * (n < .5 ? i : 3 * (n - t) + i - .75) } function fk(n) { return function (t) { return Math.pow(t, n) } } function ek(n) { return 1 - Math.cos(n * t / 2) } function ok(n) { return Math.pow(2, 10 * (n - 1)) } function sk(n) { return 1 - Math.sqrt(1 - n * n) } function hk(n, i) { var r; return arguments.length < 2 && (i = .45), arguments.length ? r = i / (2 * t) * Math.asin(1 / n) : (n = 1, r = i / 4), function (u) { return 1 + n * Math.pow(2, 10 * -u) * Math.sin((u - r) * 2 * t / i) } } function ck(n) { return n || (n = 1.70158), function (t) { return t * t * ((n + 1) * t - n) } } function lk(n) { return n < 1 / 2.75 ? 7.5625 * n * n : n < 2 / 2.75 ? 7.5625 * (n -= 1.5 / 2.75) * n + .75 : n < 2.5 / 2.75 ? 7.5625 * (n -= 2.25 / 2.75) * n + .9375 : 7.5625 * (n -= 2.625 / 2.75) * n + .984375 } function ak(t, i) { t = n.hcl(t); i = n.hcl(i); var u = t.h, f = t.c, e = t.l, r = i.h - u, o = i.c - f, s = i.l - e; return r > 180 ? r -= 360 : r < -180 && (r += 360), function (n) { return wf(u + r * n, f + o * n, e + s * n) + "" } } function vk(t, i) { t = n.hsl(t); i = n.hsl(i); var u = t.h, f = t.s, e = t.l, r = i.h - u, o = i.s - f, s = i.l - e; return r > 180 ? r -= 360 : r < -180 && (r += 360), function (n) { return ar(u + r * n, f + o * n, e + s * n) + "" } } function yk(t, i) { t = n.lab(t); i = n.lab(i); var r = t.l, u = t.a, f = t.b, e = i.l - r, o = i.a - u, s = i.b - f; return function (n) { return sc(r + e * n, u + o * n, f + s * n) + "" } } function ba(n, t) { return t -= n, function (i) { return Math.round(n + t * i) } } function pk(n, t) { return t = t - (n = +n) ? 1 / (t - n) : 0, function (i) { return (i - n) * t } } function wk(n, t) { return t = t - (n = +n) ? 1 / (t - n) : 0, function (i) { return Math.max(0, Math.min(1, (i - n) * t)) } } function bk(n) { for (var t = n.source, i = n.target, u = kk(t, i), r = [t], f; t !== u;) t = t.parent, r.push(t); for (f = r.length; i !== u;) r.splice(f, 0, i), i = i.parent; return r } function ka(n) { for (var i = [], t = n.parent; t != null;) i.push(n), n = t, t = t.parent; return i.push(n), i } function kk(n, t) { if (n === t) return n; for (var r = ka(n), u = ka(t), i = r.pop(), f = u.pop(), e = null; i === f;) e = i, i = r.pop(), f = u.pop(); return e } function dk(n) { n.fixed |= 2 } function gk(n) { n.fixed &= -7 } function nd(n) { n.fixed |= 4; n.px = n.x; n.py = n.y } function td(n) { n.fixed &= -5 } function da(n, t, i) { var f = 0, e = 0, u; if (n.charge = 0, !n.leaf) for (var o = n.nodes, h = o.length, s = -1, r; ++s < h;) (r = o[s], r != null) && (da(r, t, i), n.charge += r.charge, f += r.charge * r.cx, e += r.charge * r.cy); n.point && (n.leaf || (n.point.x += Math.random() - .5, n.point.y += Math.random() - .5), u = t * i[n.point.index], n.charge += n.pointCharge = u, f += u * n.point.x, e += u * n.point.y); n.cx = f / n.charge; n.cy = e / n.charge } function tr(t, i) { return n.rebind(t, i, "sort", "children", "value"), t.nodes = t, t.links = fd, t } function id(n) { return n.children } function rd(n) { return n.value } function ud(n, t) { return t.value - n.value } function fd(t) { return n.merge(t.map(function (n) { return (n.children || []).map(function (t) { return { source: n, target: t } }) })) } function ed(n) { return n.x } function od(n) { return n.y } function sd(n, t, i) { n.y0 = t; n.y = i } function ts(t) { return n.range(t.length) } function is(n) { for (var t = -1, r = n[0].length, i = []; ++t < r;) i[t] = 0; return i } function hd(n) { for (var t = 1, i = 0, r = n[0][1], u, f = n.length; t < f; ++t) (u = n[t][1]) > r && (i = t, r = u); return i } function cd(n) { return n.reduce(ld, 0) } function ld(n, t) { return n + t[1] } function ad(n, t) { return rv(n, Math.ceil(Math.log(t.length) / Math.LN2 + 1)) } function rv(n, t) { for (var i = -1, r = +n[0], f = (n[1] - r) / t, u = []; ++i <= t;) u[i] = f * i + r; return u } function vd(t) { return [n.min(t), n.max(t)] } function uv(n, t) { return n.parent == t.parent ? 1 : 2 } function rs(n) { var t = n.children; return t && t.length ? t[0] : n._tree.thread } function us(n) { var t = n.children, i; return t && (i = t.length) ? t[i - 1] : n._tree.thread } function vu(n, t) { var i = n.children, u, f, r; if (i && (f = i.length)) for (r = -1; ++r < f;) t(u = vu(i[r], t), n) > 0 && (n = u); return n } function yd(n, t) { return n.x - t.x } function pd(n, t) { return t.x - n.x } function wd(n, t) { return n.depth - t.depth } function pt(n, t) { function i(n, r) { var u = n.children, f, e, o, s; if (u && (s = u.length)) for (e = null, o = -1; ++o < s;) f = u[o], i(f, e), e = f; t(n, r) } i(n, null) } function bd(n) { for (var i = 0, f = 0, r = n.children, u = r.length, t; --u >= 0;) t = r[u]._tree, t.prelim += i, t.mod += i, i += t.shift + (f += t.change) } function kd(n, t, i) { n = n._tree; t = t._tree; var r = i / (t.number - n.number); n.change += r; t.change -= r; t.shift += i; t.prelim += i; t.mod += i } function dd(n, t, i) { return n._tree.ancestor.parent == t.parent ? n._tree.ancestor : i } function gd(n, t) { return n.value - t.value } function fs(n, t) { var i = n._pack_next; n._pack_next = t; t._pack_prev = n; t._pack_next = i; i._pack_prev = t } function fv(n, t) { n._pack_next = t; t._pack_prev = n } function ev(n, t) { var i = t.x - n.x, r = t.y - n.y, u = n.r + t.r; return u * u - i * i - r * r > .001 } function ov(n) { function h(n) { c = Math.min(n.x - n.r, c); l = Math.max(n.x + n.r, l); a = Math.min(n.y - n.r, a); v = Math.max(n.y + n.r, v) } if ((u = n.children) && (s = u.length)) { var u, c = Infinity, l = -Infinity, a = Infinity, v = -Infinity, i, r, t, f, e, o, s; if (u.forEach(ng), i = u[0], i.x = -i.r, i.y = 0, h(i), s > 1 && (r = u[1], r.x = r.r, r.y = 0, h(r), s > 2)) for (t = u[2], hv(i, r, t), h(t), fs(i, t), i._pack_prev = t, fs(t, r), r = i._pack_next, f = 3; f < s; f++) { hv(i, r, t = u[f]); var y = 0, p = 1, w = 1; for (e = r._pack_next; e !== r; e = e._pack_next, p++) if (ev(e, t)) { y = 1; break } if (y == 1) for (o = i._pack_prev; o !== e._pack_prev; o = o._pack_prev, w++) if (ev(o, t)) break; y ? (p < w || p == w && r.r < i.r ? fv(i, r = e) : fv(i = o, r), f--) : (fs(i, t), r = t, h(t)) } var k = (c + l) / 2, d = (a + v) / 2, b = 0; for (f = 0; f < s; f++) t = u[f], t.x -= k, t.y -= d, b = Math.max(b, t.r + Math.sqrt(t.x * t.x + t.y * t.y)); n.r = b; u.forEach(tg) } } function ng(n) { n._pack_next = n._pack_prev = n } function tg(n) { delete n._pack_next; delete n._pack_prev } function sv(n, t, i, r) { var u = n.children, f, e; if (n.x = t += r * n.x, n.y = i += r * n.y, n.r *= r, u) for (f = -1, e = u.length; ++f < e;) sv(u[f], t, i, r) } function hv(n, t, i) { var r = n.r + i.r, f = t.x - n.x, e = t.y - n.y, u, o, s, h; r && (f || e) ? (u = t.r + i.r, o = f * f + e * e, u *= u, r *= r, s = .5 + (r - u) / (2 * o), h = Math.sqrt(Math.max(0, 2 * u * (r + o) - (r -= o) * r - u * u)) / (2 * o), i.x = n.x + s * f + h * e, i.y = n.y + s * e - h * f) : (i.x = n.x + r, i.y = n.y) } function ig(t) { return 1 + n.max(t, function (n) { return n.y }) } function rg(n) { return n.reduce(function (n, t) { return n + t.x }, 0) / n.length } function cv(n) { var t = n.children; return t && t.length ? cv(t[0]) : n } function lv(n) { var t = n.children, i; return t && (i = t.length) ? lv(t[i - 1]) : n } function es(n) { return { x: n.x, y: n.y, dx: n.dx, dy: n.dy } } function av(n, t) { var u = n.x + t[3], f = n.y + t[0], i = n.dx - t[1] - t[3], r = n.dy - t[0] - t[2]; return i < 0 && (u += i / 2, i = 0), r < 0 && (f += r / 2, r = 0), { x: u, y: f, dx: i, dy: r } } function ir(n) { var t = n[0], i = n[n.length - 1]; return t < i ? [t, i] : [i, t] } function yu(n) { return n.rangeExtent ? n.rangeExtent() : ir(n.range()) } function ug(n, t, i, r) { var u = i(n[0], n[1]), f = r(t[0], t[1]); return function (n) { return f(u(n)) } } function pu(n, t) { var u = 0, f = n.length - 1, i = n[u], r = n[f], e; return r < i && (e = u, u = f, f = e, e = i, i = r, r = e), (t = t(r - i)) && (n[u] = t.floor(i), n[f] = t.ceil(r)), n } function fg(t, i, r, u) { var o = [], s = [], f = 0, e = Math.min(t.length, i.length) - 1; for (t[e] < t[0] && (t = t.slice().reverse(), i = i.slice().reverse()) ; ++f <= e;) o.push(r(t[f - 1], t[f])), s.push(u(i[f - 1], i[f])); return function (i) { var r = n.bisect(t, i, 1, e) - 1; return s[r](o[r](i)) } } function vv(n, t, i, r) { function f() { var f = Math.min(n.length, t.length) > 2 ? fg : ug, s = r ? wk : pk; return e = f(n, t, s, i), o = f(t, n, s, nr), u } function u(n) { return e(n) } var e, o; return u.invert = function (n) { return o(n) }, u.domain = function (t) { return arguments.length ? (n = t.map(Number), f()) : n }, u.range = function (n) { return arguments.length ? (t = n, f()) : t }, u.rangeRound = function (n) { return u.range(n).interpolate(ba) }, u.clamp = function (n) { return arguments.length ? (r = n, f()) : r }, u.interpolate = function (n) { return arguments.length ? (i = n, f()) : i }, u.ticks = function (t) { return os(n, t) }, u.tickFormat = function (t, i) { return ss(n, t, i) }, u.nice = function () { return pu(n, pv), f() }, u.copy = function () { return vv(n, t, i, r) }, f() } function yv(t, i) { return n.rebind(t, i, "range", "rangeRound", "interpolate", "clamp") } function pv(n) { return n = Math.pow(10, Math.round(Math.log(n) / Math.LN10) - 1), n && { floor: function (t) { return Math.floor(t / n) * n }, ceil: function (t) { return Math.ceil(t / n) * n } } } function wv(n, t) { var r = ir(n), f = r[1] - r[0], i = Math.pow(10, Math.floor(Math.log(f / t) / Math.LN10)), u = t / f * i; return u <= .15 ? i *= 10 : u <= .35 ? i *= 5 : u <= .75 && (i *= 2), r[0] = Math.ceil(r[0] / i) * i, r[1] = Math.floor(r[1] / i) * i + i * .5, r[2] = i, r } function os(t, i) { return n.range.apply(n, wv(t, i)) } function ss(t, i, r) { var u = -Math.floor(Math.log(wv(t, i)[2]) / Math.LN10 + .01); return n.format(r ? r.replace(ee, function (n, t, i, r, f, e, o, s, h, c) { return [t, i, r, f, e, o, s, h || "." + (u - (c === "%") * 2), c].join("") }) : ",." + u + "f") } function bv(n, t, i, r) { function u(t) { return n(i(t)) } return u.invert = function (t) { return r(n.invert(t)) }, u.domain = function (t) { return arguments.length ? (t[0] < 0 ? (i = hs, r = eg) : (i = dv, r = gv), n.domain(t.map(i)), u) : n.domain().map(r) }, u.base = function (n) { return arguments.length ? (t = +n, u) : t }, u.nice = function () { return n.domain(pu(n.domain(), og(t))), u }, u.ticks = function () { var s = ir(n.domain()), f = [], e; if (s.every(isFinite)) { var h = Math.log(t), u = Math.floor(s[0] / h), o = Math.ceil(s[1] / h), l = r(s[0]), a = r(s[1]), c = t % 1 ? 2 : t; if (i === hs) for (f.push(-Math.pow(t, -u)) ; u++ < o;) for (e = c - 1; e > 0; e--) f.push(-Math.pow(t, -u) * e); else { for (; u < o; u++) for (e = 1; e < c; e++) f.push(Math.pow(t, u) * e); f.push(Math.pow(t, u)) } for (u = 0; f[u] < l; u++); for (o = f.length; f[o - 1] > a; o--); f = f.slice(u, o) } return f }, u.tickFormat = function (n, f) { if (arguments.length < 2 && (f = kv), !arguments.length) return f; var o = Math.log(t), s = Math.max(.1, n / u.ticks().length), h = i === hs ? (e = -1e-12, Math.floor) : (e = 1e-12, Math.ceil), e; return function (n) { return n / r(o * h(i(n) / o + e)) <= s ? f(n) : "" } }, u.copy = function () { return bv(n.copy(), t, i, r) }, yv(u, n) } function dv(n) { return Math.log(n < 0 ? 0 : n) } function gv(n) { return Math.exp(n) } function hs(n) { return -Math.log(n > 0 ? 0 : -n) } function eg(n) { return -Math.exp(-n) } function og(n) { n = Math.log(n); var t = { floor: function (t) { return Math.floor(t / n) * n }, ceil: function (t) { return Math.ceil(t / n) * n } }; return function () { return t } } function ny(n, t) { function i(t) { return n(r(t)) } var r = wu(t), u = wu(1 / t); return i.invert = function (t) { return u(n.invert(t)) }, i.domain = function (t) { return arguments.length ? (n.domain(t.map(r)), i) : n.domain().map(u) }, i.ticks = function (n) { return os(i.domain(), n) }, i.tickFormat = function (n, t) { return ss(i.domain(), n, t) }, i.nice = function () { return i.domain(pu(i.domain(), pv)) }, i.exponent = function (n) { if (!arguments.length) return t; var f = i.domain(); return r = wu(t = n), u = wu(1 / t), i.domain(f) }, i.copy = function () { return ny(n.copy(), t) }, yv(i, n) } function wu(n) { return function (t) { return t < 0 ? -Math.pow(-t, n) : Math.pow(t, n) } } function ty(t, i) { function r(n) { return u[((f.get(n) || f.set(n, t.push(n))) - 1) % u.length] } function o(i, r) { return n.range(t.length).map(function (n) { return i + r * n }) } var f, u, e; return r.domain = function (n) { if (!arguments.length) return t; t = []; f = new et; for (var e = -1, o = n.length, u; ++e < o;) f.has(u = n[e]) || f.set(u, t.push(u)); return r[i.t].apply(r, i.a) }, r.range = function (n) { return arguments.length ? (u = n, e = 0, i = { t: "range", a: arguments }, r) : u }, r.rangePoints = function (n, f) { arguments.length < 2 && (f = 0); var s = n[0], h = n[1], c = (h - s) / (Math.max(1, t.length - 1) + f); return u = o(t.length < 2 ? (s + h) / 2 : s + c * f / 2, c), e = 0, i = { t: "rangePoints", a: arguments }, r }, r.rangeBands = function (n, f, s) { arguments.length < 2 && (f = 0); arguments.length < 3 && (s = f); var h = n[1] < n[0], l = n[+h], a = n[1 - h], c = (a - l) / (t.length - f + 2 * s); return u = o(l + c * s, c), h && u.reverse(), e = c * (1 - f), i = { t: "rangeBands", a: arguments }, r }, r.rangeRoundBands = function (n, f, s) { arguments.length < 2 && (f = 0); arguments.length < 3 && (s = f); var h = n[1] < n[0], c = n[+h], a = n[1 - h], l = Math.floor((a - c) / (t.length - f + 2 * s)), v = a - c - (t.length - f) * l; return u = o(c + Math.round(v / 2), l), h && u.reverse(), e = Math.round(l * (1 - f)), i = { t: "rangeRoundBands", a: arguments }, r }, r.rangeBand = function () { return e }, r.rangeExtent = function () { return ir(i.a[0]) }, r.copy = function () { return ty(t, i) }, r.domain(t) } function iy(t, i) { function f() { var f = 0, e = i.length; for (u = []; ++f < e;) u[f - 1] = n.quantile(t, f / e); return r } function r(t) { return isNaN(t = +t) ? NaN : i[n.bisect(u, t)] } var u; return r.domain = function (i) { return arguments.length ? (t = i.filter(function (n) { return !isNaN(n) }).sort(n.ascending), f()) : t }, r.range = function (n) { return arguments.length ? (i = n, f()) : i }, r.quantiles = function () { return u }, r.copy = function () { return iy(t, i) }, f() } function ry(n, t, i) { function r(t) { return i[Math.max(0, Math.min(e, Math.floor(f * (t - n))))] } function u() { return f = i.length / (t - n), e = i.length - 1, r } var f, e; return r.domain = function (i) { return arguments.length ? (n = +i[0], t = +i[i.length - 1], u()) : [n, t] }, r.range = function (n) { return arguments.length ? (i = n, u()) : i }, r.copy = function () { return ry(n, t, i) }, u() } function uy(t, i) { function r(r) { return i[n.bisect(t, r)] } return r.domain = function (n) { return arguments.length ? (t = n, r) : t }, r.range = function (n) { return arguments.length ? (i = n, r) : i }, r.copy = function () { return uy(t, i) }, r } function fy(n) { function t(n) { return +n } return t.invert = t, t.domain = t.range = function (i) { return arguments.length ? (n = i.map(t), t) : n }, t.ticks = function (t) { return os(n, t) }, t.tickFormat = function (t, i) { return ss(n, t, i) }, t.copy = function () { return fy(n) }, t } function ag(n) { return n.innerRadius } function vg(n) { return n.outerRadius } function oy(n) { return n.startAngle } function sy(n) { return n.endAngle } function hy(n) { for (var t, u = -1, f = n.length, i, r; ++u < f;) t = n[u], i = t[0], r = t[1] + gt, t[0] = i * Math.cos(r), t[1] = i * Math.sin(r); return n } function cy(n) { function t(t) { function d() { p.push("M", i(n(w), s), a, l(n(v.reverse()), s), "Z") } for (var p = [], v = [], w = [], c = -1, g = t.length, y, nt = f(e), tt = f(o), it = e === r ? function () { return b } : f(r), rt = o === u ? function () { return k } : f(u), b, k; ++c < g;) h.call(this, y = t[c], c) ? (v.push([b = +nt.call(this, y, c), k = +tt.call(this, y, c)]), w.push([+it.call(this, y, c), +rt.call(this, y, c)])) : v.length && (d(), v = [], w = []); return v.length && d(), p.length ? p.join("") : null } var e = ut, r = ut, o = 0, u = vt, h = yi, i = g, c = i.key, l = i, a = "L", s = .7; return t.x = function (n) { return arguments.length ? (e = r = n, t) : r }, t.x0 = function (n) { return arguments.length ? (e = n, t) : e }, t.x1 = function (n) { return arguments.length ? (r = n, t) : r }, t.y = function (n) { return arguments.length ? (o = u = n, t) : u }, t.y0 = function (n) { return arguments.length ? (o = n, t) : o }, t.y1 = function (n) { return arguments.length ? (u = n, t) : u }, t.defined = function (n) { return arguments.length ? (h = n, t) : h }, t.interpolate = function (n) { return arguments.length ? (c = typeof n == "function" ? i = n : (i = cu.get(n) || g).key, l = i.reverse || i, a = i.closed ? "M" : "L", t) : c }, t.tension = function (n) { return arguments.length ? (s = n, t) : s }, t } function yg(n) { return n.radius } function ly(n) { return [n.x, n.y] } function pg(n) { return function () { var t = n.apply(this, arguments), i = t[0], r = t[1] + gt; return [i * Math.cos(r), i * Math.sin(r)] } } function wg() { return 64 } function bg() { return "circle" } function ay(n) { var i = Math.sqrt(n / t); return "M0," + i + "A" + i + "," + i + " 0 1,1 0," + -i + "A" + i + "," + i + " 0 1,1 0," + i + "Z" } function ur(n, t) { return or(n, s), n.id = t, n } function as(n, t, i, r) { var u = n.id; return bt(n, typeof i == "function" ? function (n, f, e) { n.__transition__[u].tween.set(t, r(i.call(n, n.__data__, f, e))) } : (i = r(i), function (n) { n.__transition__[u].tween.set(t, i) })) } function kg(n) { return n == null && (n = ""), function () { this.textContent = n } } function ku(t, i, r, u) { var f = t.__transition__ || (t.__transition__ = { active: 0, count: 0 }), e = f[r], o; if (!e) return o = u.time, e = f[r] = { tween: new et, event: n.dispatch("start", "end"), time: o, ease: u.ease, delay: u.delay, duration: u.duration }, ++f.count, n.timer(function (u) { function v(u) { return f.active > r ? l() : (f.active = r, a.start.call(t, s, i), e.tween.forEach(function (n, r) { (r = r.call(t, s, i)) && c.push(r) }), y(u) || n.timer(y, 0, o), 1) } function y(n) { if (f.active !== r) return l(); for (var u = (n - h) / w, o = p(u), e = c.length; e > 0;) c[--e].call(t, o); if (u >= 1) return l(), a.end.call(t, s, i), 1 } function l() { return --f.count ? delete f[r] : delete t.__transition__, 1 } var s = t.__data__, p = e.ease, a = e.event, h = e.delay, w = e.duration, c = []; return h <= u ? v(u) : n.timer(v, h, o), 1 }, 0, o), e } function py(n, t) { n.attr("transform", function (n) { return "translate(" + t(n) + ",0)" }) } function wy(n, t) { n.attr("transform", function (n) { return "translate(0," + t(n) + ")" }) } function dg(n, t, i) { if (u = [], i && t.length > 1) { for (var o = ir(n.domain()), u, f = -1, h = t.length, s = (t[1] - t[0]) / ++i, r, e; ++f < h;) for (r = i; --r > 0;) (e = +t[f] - r * s) >= o[0] && u.push(e); for (--f, r = 0; ++r < i && (e = +t[f] + r * s) < o[1];) u.push(e) } return u } function ti() { this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]) } function ii(n, t, i) { function e(t) { var i = n(t), r = f(i, 1); return t - i < r - t ? i : r } function u(i) { return t(i = n(new y(i - 1)), 1), i } function f(n, i) { return t(n = new y(+n), i), n } function o(n, r, f) { var e = u(n), o = []; if (f > 1) while (e < r) i(e) % f || o.push(new Date(+e)), t(e, 1); else while (e < r) o.push(new Date(+e)), t(e, 1); return o } function s(n, t, i) { try { y = ti; var r = new ti; return r._ = n, o(r, t, i) } finally { y = Date } } n.floor = n; n.round = e; n.ceil = u; n.offset = f; n.range = o; var r = n.utc = gu(n); return r.floor = r, r.round = gu(e), r.ceil = gu(u), r.offset = gu(f), r.range = s, n } function gu(n) { return function (t, i) { try { y = ti; var r = new ti; return r._ = t, n(r, i)._ } finally { y = Date } } } function nf(n, t, i, r) { for (var u, f, e = 0, o = t.length, s = i.length; e < o;) { if (r >= s) return -1; if (u = t.charCodeAt(e++), u === 37) { if (f = rn[t.charAt(e++)], !f || (r = f(n, i, r)) < 0) return -1 } else if (u != i.charCodeAt(r++)) return -1 } return r } function tf(t) { return new RegExp("^(?:" + t.map(n.requote).join("|") + ")", "i") } function np(n) { for (var i = new et, t = -1, r = n.length; ++t < r;) i.set(n[t].toLowerCase(), t); return i } function k(n, t, i) { n += ""; var r = n.length; return r < i ? new Array(i - r + 1).join(t) + n : n } function un(n, t, i) { ip.lastIndex = 0; var r = ip.exec(t.substring(i)); return r ? i += r[0].length : -1 } function fn(n, t, i) { tp.lastIndex = 0; var r = tp.exec(t.substring(i)); return r ? i += r[0].length : -1 } function en(n, t, i) { up.lastIndex = 0; var r = up.exec(t.substring(i)); return r ? (n.m = nn.get(r[0].toLowerCase()), i += r[0].length) : -1 } function on(n, t, i) { rp.lastIndex = 0; var r = rp.exec(t.substring(i)); return r ? (n.m = gg.get(r[0].toLowerCase()), i += r[0].length) : -1 } function sn(n, t, i) { return nf(n, rf.c.toString(), t, i) } function hn(n, t, i) { return nf(n, rf.x.toString(), t, i) } function cn(n, t, i) { return nf(n, rf.X.toString(), t, i) } function ln(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 4)); return r ? (n.y = +r[0], i += r[0].length) : -1 } function an(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 2)); return r ? (n.y = vn(+r[0]), i += r[0].length) : -1 } function vn(n) { return n + (n > 68 ? 1900 : 2e3) } function yn(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 2)); return r ? (n.m = r[0] - 1, i += r[0].length) : -1 } function fp(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 2)); return r ? (n.d = +r[0], i += r[0].length) : -1 } function ep(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 2)); return r ? (n.H = +r[0], i += r[0].length) : -1 } function pn(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 2)); return r ? (n.M = +r[0], i += r[0].length) : -1 } function wn(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 2)); return r ? (n.S = +r[0], i += r[0].length) : -1 } function bn(n, t, i) { p.lastIndex = 0; var r = p.exec(t.substring(i, i + 3)); return r ? (n.L = +r[0], i += r[0].length) : -1 } function kn(n, t, i) { var r = op.get(t.substring(i, i += 2).toLowerCase()); return r == null ? -1 : (n.p = r, i) } function dn(n) { var t = n.getTimezoneOffset(), i = t > 0 ? "-" : "+", r = ~~(Math.abs(t) / 60), u = Math.abs(t) % 60; return i + k(r, "0", 2) + k(u, "0", 2) } function bs(n) { return n.toISOString() } function ks(t, i, r) { function u(n) { return t(n) } return u.invert = function (n) { return ds(t.invert(n)) }, u.domain = function (n) { return arguments.length ? (t.domain(n), u) : t.domain().map(ds) }, u.nice = function (n) { return u.domain(pu(u.domain(), function () { return n })) }, u.ticks = function (r, f) { var o = gn(u.domain()); if (typeof r != "function") { var h = o[1] - o[0], s = h / r, e = n.bisect(uf, s); if (e == uf.length) return i.year(o, r); if (!e) return t.ticks(r).map(ds); Math.log(s / uf[e - 1]) < Math.log(uf[e] / s) && --e; r = i[e]; f = r[1]; r = r[0].range } return r(o[0], new Date(+o[1] + 1), f) }, u.tickFormat = function () { return r }, u.copy = function () { return ks(t.copy(), i, r) }, n.rebind(u, t, "range", "rangeRound", "interpolate", "clamp") } function gn(n) { var t = n[0], i = n[n.length - 1]; return t < i ? [t, i] : [i, t] } function ds(n) { return new Date(n) } function sp(n) { return function (t) { for (var r = n.length - 1, i = n[r]; !i[1](t) ;) i = n[--r]; return i[0](t) } } function gs(n) { var t = new Date(n, 0, 1); return t.setFullYear(n), t } function ntt(n) { var t = n.getFullYear(), i = gs(t), r = gs(t + 1); return t + (n - i) / (r - i) } function th(n) { var t = new Date(Date.UTC(n, 0, 1)); return t.setUTCFullYear(n), t } function ftt(n) { var t = n.getUTCFullYear(), i = th(t), r = th(t + 1); return t + (n - i) / (r - i) } function ett(n) { return n.responseText } function ott(n) { return JSON.parse(n.responseText) } function stt(n) { var t = w.createRange(); return t.selectNode(w.body), t.createContextualFragment(n.responseText) } function htt(n) { return n.responseXML } var n = { version: "3.1.5" }, w, c, ff, ih, of, ot, sf, er, st, or, u, sr, yh, hr, kt, ui, yf, cr, ic, lr, yr, ai, vi, ee, wc, gr, bc, se, he, tu, iu, ru, lt, l, rt, a, v, h, nt, pe, pi, no, ni, ro, uo, at, tt, eo, oo, so, ho, co, cu, au, ha, gi, ga, nv, ns, tv, iv, kv, gt, ey, cs, rr, ls, vs, yy, by, du, y, ky, p, op, ws; Date.now || (Date.now = function () { return +new Date }); w = document; c = window; try { w.createElement("div").style.setProperty("opacity", 0, "") } catch (ctt) { ff = c.CSSStyleDeclaration.prototype; ih = ff.setProperty; ff.setProperty = function (n, t, i) { ih.call(this, n, t + "", i) } } n.ascending = function (n, t) { return n < t ? -1 : n > t ? 1 : n >= t ? 0 : NaN }; n.descending = function (n, t) { return t < n ? -1 : t > n ? 1 : t >= n ? 0 : NaN }; n.min = function (n, t) { var r = -1, f = n.length, i, u; if (arguments.length === 1) { while (++r < f && ((i = n[r]) == null || i != i)) i = undefined; while (++r < f) (u = n[r]) != null && i > u && (i = u) } else { while (++r < f && ((i = t.call(n, n[r], r)) == null || i != i)) i = undefined; while (++r < f) (u = t.call(n, n[r], r)) != null && i > u && (i = u) } return i }; n.max = function (n, t) { var r = -1, f = n.length, i, u; if (arguments.length === 1) { while (++r < f && ((i = n[r]) == null || i != i)) i = undefined; while (++r < f) (u = n[r]) != null && u > i && (i = u) } else { while (++r < f && ((i = t.call(n, n[r], r)) == null || i != i)) i = undefined; while (++r < f) (u = t.call(n, n[r], r)) != null && u > i && (i = u) } return i }; n.extent = function (n, t) { var r = -1, e = n.length, i, u, f; if (arguments.length === 1) { while (++r < e && ((i = f = n[r]) == null || i != i)) i = f = undefined; while (++r < e) (u = n[r]) != null && (i > u && (i = u), f < u && (f = u)) } else { while (++r < e && ((i = f = t.call(n, n[r], r)) == null || i != i)) i = undefined; while (++r < e) (u = t.call(n, n[r], r)) != null && (i > u && (i = u), f < u && (f = u)) } return [i, f] }; n.sum = function (n, t) { var u = 0, f = n.length, r, i = -1; if (arguments.length === 1) while (++i < f) isNaN(r = +n[i]) || (u += r); else while (++i < f) isNaN(r = +t.call(n, n[i], i)) || (u += r); return u }; n.mean = function (n, t) { var e = n.length, u, i = 0, r = -1, f = 0; if (arguments.length === 1) while (++r < e) ef(u = n[r]) && (i += (u - i) / ++f); else while (++r < e) ef(u = t.call(n, n[r], r)) && (i += (u - i) / ++f); return f ? i : undefined }; n.quantile = function (n, t) { var u = (n.length - 1) * t + 1, i = Math.floor(u), r = +n[i - 1], f = u - i; return f ? r + f * (n[i] - r) : r }; n.median = function (t, i) { return arguments.length > 1 && (t = t.map(i)), t = t.filter(ef), t.length ? n.quantile(t.sort(n.ascending), .5) : undefined }; n.bisector = function (n) { return { left: function (t, i, r, u) { for (arguments.length < 3 && (r = 0), arguments.length < 4 && (u = t.length) ; r < u;) { var f = r + u >>> 1; n.call(t, t[f], f) < i ? r = f + 1 : u = f } return r }, right: function (t, i, r, u) { for (arguments.length < 3 && (r = 0), arguments.length < 4 && (u = t.length) ; r < u;) { var f = r + u >>> 1; i < n.call(t, t[f], f) ? u = f : r = f + 1 } return r } } }; of = n.bisector(function (n) { return n }); n.bisectLeft = of.left; n.bisect = n.bisectRight = of.right; n.shuffle = function (n) { for (var t = n.length, r, i; t;) i = Math.random() * t-- | 0, r = n[t], n[t] = n[i], n[i] = r; return n }; n.permute = function (n, t) { for (var r = [], i = -1, u = t.length; ++i < u;) r[i] = n[t[i]]; return r }; n.zip = function () { var t, r, e; if (!(r = arguments.length)) return []; for (var i = -1, u = n.min(arguments, lp), f = new Array(u) ; ++i < u;) for (t = -1, e = f[i] = new Array(r) ; ++t < r;) e[t] = arguments[t][i]; return f }; n.transpose = function (t) { return n.zip.apply(n, t) }; n.keys = function (n) { var t = []; for (var i in n) t.push(i); return t }; n.values = function (n) { var t = []; for (var i in n) t.push(n[i]); return t }; n.entries = function (n) { var t = []; for (var i in n) t.push({ key: i, value: n[i] }); return t }; n.merge = function (n) { return Array.prototype.concat.apply([], n) }; n.range = function (n, t, i) { if (arguments.length < 3 && (i = 1, arguments.length < 2 && (t = n, n = 0)), (t - n) / i == Infinity) throw new Error("infinite range"); var f = [], r = ap(Math.abs(i)), e = -1, u; if (n *= r, t *= r, i *= r, i < 0) while ((u = n + i * ++e) > t) f.push(u / r); else while ((u = n + i * ++e) < t) f.push(u / r); return f }; n.map = function (n) { var t = new et; for (var i in n) t.set(i, n[i]); return t }; rh(et, { has: function (n) { return ot + n in this }, get: function (n) { return this[ot + n] }, set: function (n, t) { return this[ot + n] = t }, remove: function (n) { return n = ot + n, n in this && delete this[n] }, keys: function () { var n = []; return this.forEach(function (t) { n.push(t) }), n }, values: function () { var n = []; return this.forEach(function (t, i) { n.push(i) }), n }, entries: function () { var n = []; return this.forEach(function (t, i) { n.push({ key: t, value: i }) }), n }, forEach: function (n) { for (var t in this) t.charCodeAt(0) === sf && n.call(this, t.substring(1), this[t]) } }); ot = "\0"; sf = ot.charCodeAt(0); n.nest = function () { function r(n, e, o) { if (o >= i.length) return f ? f.call(t, e) : u ? e.sort(u) : e; for (var l = -1, y = e.length, p = i[o++], a, s, h, c = new et, v; ++l < y;) (v = c.get(a = p(s = e[l]))) ? v.push(s) : c.set(a, [s]); return n ? (s = n(), h = function (t, i) { s.set(t, r(n, i, o)) }) : (s = {}, h = function (t, i) { s[t] = r(n, i, o) }), c.forEach(h), s } function o(n, t) { if (t >= i.length) return n; var r = [], u = e[t++]; return n.forEach(function (n, i) { r.push({ key: n, values: o(i, t) }) }), u ? r.sort(function (n, t) { return u(n.key, t.key) }) : r } var t = {}, i = [], e = [], u, f; return t.map = function (n, t) { return r(t, n, 0) }, t.entries = function (t) { return o(r(n.map, t, 0), 0) }, t.key = function (n) { return i.push(n), t }, t.sortKeys = function (n) { return e[i.length - 1] = n, t }, t.sortValues = function (n) { return u = n, t }, t.rollup = function (n) { return f = n, t }, t }; n.set = function (n) { var i = new hf, t; if (n) for (t = 0; t < n.length; t++) i.add(n[t]); return i }; rh(hf, { has: function (n) { return ot + n in this }, add: function (n) { return this[ot + n] = !0, n }, remove: function (n) { return n = ot + n, n in this && delete this[n] }, values: function () { var n = []; return this.forEach(function (t) { n.push(t) }), n }, forEach: function (n) { for (var t in this) t.charCodeAt(0) === sf && n.call(this, t.substring(1)) } }); n.behavior = {}; n.rebind = function (n, t) { for (var i = 1, u = arguments.length, r; ++i < u;) n[r = arguments[i]] = vp(n, t, t[r]); return n }; n.dispatch = function () { for (var n = new cf, t = -1, i = arguments.length; ++t < i;) n[arguments[t]] = uh(n); return n }; cf.prototype.on = function (n, t) { var r = n.indexOf("."), i = ""; if (r >= 0 && (i = n.substring(r + 1), n = n.substring(0, r)), n) return arguments.length < 2 ? this[n].on(i) : this[n].on(i, t); if (arguments.length === 2) { if (t == null) for (n in this) if (this.hasOwnProperty(n)) this[n].on(i, null); return this } }; n.event = null; n.mouse = function (n) { return oh(n, fh()) }; er = /WebKit/.test(c.navigator.userAgent) ? -1 : 0; st = pp; try { st(w.documentElement.childNodes)[0].nodeType } catch (ltt) { st = yp } or = [].__proto__ ? function (n, t) { n.__proto__ = t } : function (n, t) { for (var i in t) n[i] = t[i] }; n.touches = function (n, t) { return arguments.length < 2 && (t = fh().touches), t ? st(t).map(function (t) { var i = oh(n, t); return i.identifier = t.identifier, i }) : [] }; n.behavior.drag = function () { function i() { this.on("mousedown.drag", u).on("touchstart.drag", u) } function u() { function l() { var t = e.parentNode; return i != null ? n.touches(t).filter(function (n) { return n.identifier === i })[0] : n.mouse(t) } function y() { if (!e.parentNode) return a(); var n = l(), t = n[0] - f[0], i = n[1] - f[1]; s |= t | i; f = n; it(); o({ type: "drag", x: n[0] + u[0], y: n[1] + u[1], dx: t, dy: i }) } function a() { o({ type: "dragend" }); s && (it(), n.event.target === v && eh(h, "click")); h.on(i != null ? "touchmove.drag-" + i : "mousemove.drag", null).on(i != null ? "touchend.drag-" + i : "mouseup.drag", null) } var e = this, o = r.of(e, arguments), v = n.event.target, i = n.event.touches ? n.event.changedTouches[0].identifier : null, u, f = l(), s = 0, h = n.select(c).on(i != null ? "touchmove.drag-" + i : "mousemove.drag", y).on(i != null ? "touchend.drag-" + i : "mouseup.drag", a, !0); t ? (u = t.apply(e, arguments), u = [u.x - f[0], u.y - f[1]]) : u = [0, 0]; i == null && it(); o({ type: "dragstart" }) } var r = lf(i, "drag", "dragstart", "dragend"), t = null; return i.origin = function (n) { return arguments.length ? (t = n, i) : t }, n.rebind(i, r, "on") }; var sh = function (n, t) { return t.querySelector(n) }, hh = function (n, t) { return t.querySelectorAll(n) }, ri = w.documentElement, wp = ri.matchesSelector || ri.webkitMatchesSelector || ri.mozMatchesSelector || ri.msMatchesSelector || ri.oMatchesSelector, ch = function (n, t) { return wp.call(n, t) }; typeof Sizzle == "function" && (sh = function (n, t) { return Sizzle(n, t)[0] || null }, hh = function (n, t) { return Sizzle.uniqueSort(Sizzle(n, t)) }, ch = Sizzle.matchesSelector); u = []; n.selection = function () { return ui }; n.selection.prototype = u; u.select = function (n) { var o = [], i, u, f, t, e, s, r, h; for (typeof n != "function" && (n = af(n)), e = -1, s = this.length; ++e < s;) for (o.push(i = []), i.parentNode = (f = this[e]).parentNode, r = -1, h = f.length; ++r < h;) (t = f[r]) ? (i.push(u = n.call(t, t.__data__, r)), u && "__data__" in t && (u.__data__ = t.__data__)) : i.push(null); return ht(o) }; u.selectAll = function (n) { var u = [], f, t, i, e; for (typeof n != "function" && (n = lh(n)), i = -1, e = this.length; ++i < e;) for (var o = this[i], r = -1, s = o.length; ++r < s;) (t = o[r]) && (u.push(f = st(n.call(t, t.__data__, r))), f.parentNode = t); return ht(u) }; sr = { svg: "http://www.w3.org/2000/svg", xhtml: "http://www.w3.org/1999/xhtml", xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" }; n.ns = { prefix: sr, qualify: function (n) { var t = n.indexOf(":"), i = n; return t >= 0 && (i = n.substring(0, t), n = n.substring(t + 1)), sr.hasOwnProperty(i) ? { space: sr[i], local: n } : n } }; u.attr = function (t, i) { if (arguments.length < 2) { if (typeof t == "string") { var r = this.node(); return t = n.ns.qualify(t), t.local ? r.getAttributeNS(t.space, t.local) : r.getAttribute(t) } for (i in t) this.each(ah(i, t[i])); return this } return this.each(ah(t, i)) }; n.requote = function (n) { return n.replace(yh, "\\$&") }; yh = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g; u.classed = function (n, t) { if (arguments.length < 2) { if (typeof n == "string") { var r = this.node(), u = (n = n.trim().split(/^|\s+/g)).length, i = -1; if (t = r.classList) { while (++i < u) if (!t.contains(n[i])) return !1 } else for (t = r.getAttribute("class") ; ++i < u;) if (!ph(n[i]).test(t)) return !1; return !0 } for (t in n) this.each(wh(t, n[t])); return this } return this.each(wh(n, t)) }; u.style = function (n, t, i) { var r = arguments.length; if (r < 3) { if (typeof n != "string") { r < 2 && (t = ""); for (i in n) this.each(bh(i, n[i], t)); return this } if (r < 2) return c.getComputedStyle(this.node(), null).getPropertyValue(n); i = "" } return this.each(bh(n, t, i)) }; u.property = function (n, t) { if (arguments.length < 2) { if (typeof n == "string") return this.node()[n]; for (t in n) this.each(kh(t, n[t])); return this } return this.each(kh(n, t)) }; u.text = function (n) { return arguments.length ? this.each(typeof n == "function" ? function () { var t = n.apply(this, arguments); this.textContent = t == null ? "" : t } : n == null ? function () { this.textContent = "" } : function () { this.textContent = n }) : this.node().textContent }; u.html = function (n) { return arguments.length ? this.each(typeof n == "function" ? function () { var t = n.apply(this, arguments); this.innerHTML = t == null ? "" : t } : n == null ? function () { this.innerHTML = "" } : function () { this.innerHTML = n }) : this.node().innerHTML }; u.append = function (t) { function i() { return this.appendChild(w.createElementNS(this.namespaceURI, t)) } function r() { return this.appendChild(w.createElementNS(t.space, t.local)) } return t = n.ns.qualify(t), this.select(t.local ? r : i) }; u.insert = function (t, i) { function r(n, r) { return this.insertBefore(w.createElementNS(this.namespaceURI, t), i.call(this, n, r)) } function u(n, r) { return this.insertBefore(w.createElementNS(t.space, t.local), i.call(this, n, r)) } return t = n.ns.qualify(t), typeof i != "function" && (i = af(i)), this.select(t.local ? u : r) }; u.remove = function () { return this.each(function () { var n = this.parentNode; n && n.removeChild(this) }) }; u.data = function (n, t) { function o(n, i) { var r, l = n.length, a = i.length, k = Math.min(l, a), v = new Array(a), c = new Array(a), y = new Array(l), u, o; if (t) { var p = new et, w = new et, b = [], e; for (r = -1; ++r < l;) e = t.call(u = n[r], u.__data__, r), p.has(e) ? y[r] = u : p.set(e, u), b.push(e); for (r = -1; ++r < a;) e = t.call(i, o = i[r], r), (u = p.get(e)) ? (v[r] = u, u.__data__ = o) : w.has(e) || (c[r] = vf(o)), w.set(e, o), p.remove(e); for (r = -1; ++r < l;) p.has(b[r]) && (y[r] = n[r]) } else { for (r = -1; ++r < k;) u = n[r], o = i[r], u ? (u.__data__ = o, v[r] = u) : c[r] = vf(o); for (; r < a; ++r) c[r] = vf(i[r]); for (; r < l; ++r) y[r] = n[r] } c.update = v; c.parentNode = v.parentNode = y.parentNode = n.parentNode; s.push(c); f.push(v); h.push(y) } var i = -1, u = this.length, r, e; if (!arguments.length) { for (n = new Array(u = (r = this[0]).length) ; ++i < u;) (e = r[i]) && (n[i] = e.__data__); return n } var s = tc([]), f = ht([]), h = ht([]); if (typeof n == "function") while (++i < u) o(r = this[i], n.call(r, r.parentNode.__data__, i)); else while (++i < u) o(r = this[i], n); return f.enter = function () { return s }, f.exit = function () { return h }, f }; u.datum = function (n) { return arguments.length ? this.property("__data__", n) : this.property("__data__") }; u.filter = function (n) { var e = [], u, f, i, r, o, t, s; for (typeof n != "function" && (n = dh(n)), r = 0, o = this.length; r < o; r++) for (e.push(u = []), u.parentNode = (f = this[r]).parentNode, t = 0, s = f.length; t < s; t++) (i = f[t]) && n.call(i, i.__data__, t) && u.push(i); return ht(e) }; u.order = function () { for (var i = -1, f = this.length; ++i < f;) for (var r = this[i], u = r.length - 1, n = r[u], t; --u >= 0;) (t = r[u]) && (n && n !== t.nextSibling && n.parentNode.insertBefore(t, n), n = t); return this }; u.sort = function (n) { n = kp.apply(this, arguments); for (var t = -1, i = this.length; ++t < i;) this[t].sort(n); return this.order() }; u.on = function (n, t, i) { var r = arguments.length; if (r < 3) { if (typeof n != "string") { r < 2 && (t = !1); for (i in n) this.each(gh(i, n[i], t)); return this } if (r < 2) return (r = this.node()["__on" + n]) && r._; i = !1 } return this.each(gh(n, t, i)) }; hr = n.map({ mouseenter: "mouseover", mouseleave: "mouseout" }); hr.forEach(function (n) { "on" + n in w && hr.remove(n) }); u.each = function (n) { return bt(this, function (t, i, r) { n.call(t, t.__data__, i, r) }) }; u.call = function (n) { var t = st(arguments); return n.apply(t[0] = this, t), this }; u.empty = function () { return !this.node() }; u.node = function () { for (var i, n = 0, r = this.length; n < r; n++) for (var u = this[n], t = 0, f = u.length; t < f; t++) if (i = u[t], i) return i; return null }; kt = []; n.selection.enter = tc; n.selection.enter.prototype = kt; kt.append = u.append; kt.insert = u.insert; kt.empty = u.empty; kt.node = u.node; kt.select = function (n) { for (var i, h, f = [], r, e, o, t, u, s = -1, c = this.length; ++s < c;) for (o = (t = this[s]).update, f.push(r = []), r.parentNode = t.parentNode, i = -1, h = t.length; ++i < h;) (u = t[i]) ? (r.push(o[i] = e = n.call(t.parentNode, u.__data__, i)), e.__data__ = u.__data__) : r.push(null); return ht(f) }; u.transition = function () { var r = fr || ++vy, u = [], f, n, e = Object.create(bu), t, o; for (e.time = Date.now(), t = -1, o = this.length; ++t < o;) { u.push(f = []); for (var s = this[t], i = -1, h = s.length; ++i < h;) (n = s[i]) && ku(n, i, r, e), f.push(n) } return ur(u, r) }; ui = ht([[w]]); ui[0].parentNode = ri; n.select = function (n) { return typeof n == "string" ? ui.select(n) : ht([[n]]) }; n.selectAll = function (n) { return typeof n == "string" ? ui.selectAll(n) : ht([st(n)]) }; n.behavior.zoom = function () { function r() { this.on("mousedown.zoom", nt).on("mousemove.zoom", rt).on(ic + ".zoom", tt).on("dblclick.zoom", ut).on("touchstart.zoom", d).on("touchmove.zoom", ft).on("touchend.zoom", d) } function e(n) { return [(n[0] - i[0]) / t, (n[1] - i[1]) / t] } function g(n) { return [n[0] * t + i[0], n[1] * t + i[1]] } function v(n) { t = Math.max(h[0], Math.min(h[1], n)) } function o(n, t) { t = g(t); i[0] += n[0] - t[0]; i[1] += n[1] - t[1] } function b() { l && l.domain(y.range().map(function (n) { return (n - i[0]) / t }).map(y.invert)); a && a.domain(p.range().map(function (n) { return (n - i[1]) / t }).map(p.invert)) } function s(r) { b(); n.event.preventDefault(); r({ type: "zoom", scale: t, translate: i }) } function nt() { function a() { i = 1; o(n.mouse(t), l); s(u) } function v() { i && it(); r.on("mousemove.zoom", null).on("mouseup.zoom", null); i && n.event.target === h && eh(r, "click.zoom") } var t = this, u = f.of(t, arguments), h = n.event.target, i = 0, r = n.select(c).on("mousemove.zoom", a).on("mouseup.zoom", v), l = e(n.mouse(t)); c.focus(); it() } function tt() { u || (u = e(n.mouse(this))); v(Math.pow(2, cr() * .002) * t); o(n.mouse(this), u); s(f.of(this, arguments)) } function rt() { u = null } function ut() { var i = n.mouse(this), u = e(i), r = Math.log(t) / Math.LN2; v(Math.pow(2, n.event.shiftKey ? Math.ceil(r) - 1 : Math.floor(r) + 1)); o(i, u); s(f.of(this, arguments)) } function d() { var i = n.touches(this), r = Date.now(), h, c; k = t; u = {}; i.forEach(function (n) { u[n.identifier] = e(n) }); it(); i.length === 1 && (r - w < 500 && (h = i[0], c = e(i[0]), v(t * 2), o(h, c), s(f.of(this, arguments))), w = r) } function ft() { var h = n.touches(this), t = h[0], i = u[t.identifier], r, e; (r = h[1]) && (e = u[r.identifier], t = [(t[0] + r[0]) / 2, (t[1] + r[1]) / 2], i = [(i[0] + e[0]) / 2, (i[1] + e[1]) / 2], v(n.event.scale * k)); o(t, i); w = null; s(f.of(this, arguments)) } var i = [0, 0], u, t = 1, k, h = yf, f = lf(r, "zoom"), y, l, p, a, w; return r.translate = function (n) { return arguments.length ? (i = n.map(Number), b(), r) : i }, r.scale = function (n) { return arguments.length ? (t = +n, b(), r) : t }, r.scaleExtent = function (n) { return arguments.length ? (h = n == null ? yf : n.map(Number), r) : h }, r.x = function (n) { return arguments.length ? (l = n, y = n.copy(), i = [0, 0], t = 1, r) : l }, r.y = function (n) { return arguments.length ? (a = n, p = n.copy(), i = [0, 0], t = 1, r) : a }, n.rebind(r, f, "on") }; yf = [0, Infinity]; ic = "onwheel" in w ? (cr = function () { return -n.event.deltaY * (n.event.deltaMode ? 120 : 1) }, "wheel") : "onmousewheel" in w ? (cr = function () { return n.event.wheelDelta }, "mousewheel") : (cr = function () { return -n.event.detail }, "MozMousePixelScroll"); fi.prototype.toString = function () { return this.rgb() + "" }; n.hsl = function (n, t, i) { return arguments.length === 1 ? n instanceof pf ? ei(n.h, n.s, n.l) : te("" + n, cc, ei) : ei(+n, +t, +i) }; lr = pf.prototype = new fi; lr.brighter = function (n) { return n = Math.pow(.7, arguments.length ? n : 1), ei(this.h, this.s, this.l / n) }; lr.darker = function (n) { return n = Math.pow(.7, arguments.length ? n : 1), ei(this.h, this.s, n * this.l) }; lr.rgb = function () { return ar(this.h, this.s, this.l) }; var t = Math.PI, r = 1e-6, i = t / 180, e = 180 / t; n.hcl = function (t, i, r) { return arguments.length === 1 ? t instanceof vr ? li(t.h, t.c, t.l) : t instanceof pr ? hc(t.l, t.a, t.b) : hc((t = lc((t = n.rgb(t)).r, t.g, t.b)).l, t.a, t.b) : li(+t, +i, +r) }; yr = vr.prototype = new fi; yr.brighter = function (n) { return li(this.h, this.c, Math.min(100, this.l + wr * (arguments.length ? n : 1))) }; yr.darker = function (n) { return li(this.h, this.c, Math.max(0, this.l - wr * (arguments.length ? n : 1))) }; yr.rgb = function () { return wf(this.h, this.c, this.l).rgb() }; n.lab = function (t, i, r) { return arguments.length === 1 ? t instanceof pr ? oi(t.l, t.a, t.b) : t instanceof vr ? wf(t.l, t.c, t.h) : lc((t = n.rgb(t)).r, t.g, t.b) : oi(+t, +i, +r) }; var wr = 18, fc = .95047, ec = 1, oc = 1.08883, bf = pr.prototype = new fi; bf.brighter = function (n) { return oi(Math.min(100, this.l + wr * (arguments.length ? n : 1)), this.a, this.b) }; bf.darker = function (n) { return oi(Math.max(0, this.l - wr * (arguments.length ? n : 1)), this.a, this.b) }; bf.rgb = function () { return sc(this.l, this.a, this.b) }; n.rgb = function (n, t, i) { return arguments.length === 1 ? n instanceof ne ? ct(n.r, n.g, n.b) : te("" + n, ct, ar) : ct(~~n, ~~t, ~~i) }; ai = ne.prototype = new fi; ai.brighter = function (n) { n = Math.pow(.7, arguments.length ? n : 1); var i = this.r, r = this.g, u = this.b, t = 30; return !i && !r && !u ? ct(t, t, t) : (i && i < t && (i = t), r && r < t && (r = t), u && u < t && (u = t), ct(Math.min(255, Math.floor(i / n)), Math.min(255, Math.floor(r / n)), Math.min(255, Math.floor(u / n)))) }; ai.darker = function (n) { return n = Math.pow(.7, arguments.length ? n : 1), ct(Math.floor(n * this.r), Math.floor(n * this.g), Math.floor(n * this.b)) }; ai.hsl = function () { return cc(this.r, this.g, this.b) }; ai.toString = function () { return "#" + si(this.r) + si(this.g) + si(this.b) }; vi = n.map({ aliceblue: "#f0f8ff", antiquewhite: "#faebd7", aqua: "#00ffff", aquamarine: "#7fffd4", azure: "#f0ffff", beige: "#f5f5dc", bisque: "#ffe4c4", black: "#000000", blanchedalmond: "#ffebcd", blue: "#0000ff", blueviolet: "#8a2be2", brown: "#a52a2a", burlywood: "#deb887", cadetblue: "#5f9ea0", chartreuse: "#7fff00", chocolate: "#d2691e", coral: "#ff7f50", cornflowerblue: "#6495ed", cornsilk: "#fff8dc", crimson: "#dc143c", cyan: "#00ffff", darkblue: "#00008b", darkcyan: "#008b8b", darkgoldenrod: "#b8860b", darkgray: "#a9a9a9", darkgreen: "#006400", darkgrey: "#a9a9a9", darkkhaki: "#bdb76b", darkmagenta: "#8b008b", darkolivegreen: "#556b2f", darkorange: "#ff8c00", darkorchid: "#9932cc", darkred: "#8b0000", darksalmon: "#e9967a", darkseagreen: "#8fbc8f", darkslateblue: "#483d8b", darkslategray: "#2f4f4f", darkslategrey: "#2f4f4f", darkturquoise: "#00ced1", darkviolet: "#9400d3", deeppink: "#ff1493", deepskyblue: "#00bfff", dimgray: "#696969", dimgrey: "#696969", dodgerblue: "#1e90ff", firebrick: "#b22222", floralwhite: "#fffaf0", forestgreen: "#228b22", fuchsia: "#ff00ff", gainsboro: "#dcdcdc", ghostwhite: "#f8f8ff", gold: "#ffd700", goldenrod: "#daa520", gray: "#808080", green: "#008000", greenyellow: "#adff2f", grey: "#808080", honeydew: "#f0fff0", hotpink: "#ff69b4", indianred: "#cd5c5c", indigo: "#4b0082", ivory: "#fffff0", khaki: "#f0e68c", lavender: "#e6e6fa", lavenderblush: "#fff0f5", lawngreen: "#7cfc00", lemonchiffon: "#fffacd", lightblue: "#add8e6", lightcoral: "#f08080", lightcyan: "#e0ffff", lightgoldenrodyellow: "#fafad2", lightgray: "#d3d3d3", lightgreen: "#90ee90", lightgrey: "#d3d3d3", lightpink: "#ffb6c1", lightsalmon: "#ffa07a", lightseagreen: "#20b2aa", lightskyblue: "#87cefa", lightslategray: "#778899", lightslategrey: "#778899", lightsteelblue: "#b0c4de", lightyellow: "#ffffe0", lime: "#00ff00", limegreen: "#32cd32", linen: "#faf0e6", magenta: "#ff00ff", maroon: "#800000", mediumaquamarine: "#66cdaa", mediumblue: "#0000cd", mediumorchid: "#ba55d3", mediumpurple: "#9370db", mediumseagreen: "#3cb371", mediumslateblue: "#7b68ee", mediumspringgreen: "#00fa9a", mediumturquoise: "#48d1cc", mediumvioletred: "#c71585", midnightblue: "#191970", mintcream: "#f5fffa", mistyrose: "#ffe4e1", moccasin: "#ffe4b5", navajowhite: "#ffdead", navy: "#000080", oldlace: "#fdf5e6", olive: "#808000", olivedrab: "#6b8e23", orange: "#ffa500", orangered: "#ff4500", orchid: "#da70d6", palegoldenrod: "#eee8aa", palegreen: "#98fb98", paleturquoise: "#afeeee", palevioletred: "#db7093", papayawhip: "#ffefd5", peachpuff: "#ffdab9", peru: "#cd853f", pink: "#ffc0cb", plum: "#dda0dd", powderblue: "#b0e0e6", purple: "#800080", red: "#ff0000", rosybrown: "#bc8f8f", royalblue: "#4169e1", saddlebrown: "#8b4513", salmon: "#fa8072", sandybrown: "#f4a460", seagreen: "#2e8b57", seashell: "#fff5ee", sienna: "#a0522d", silver: "#c0c0c0", skyblue: "#87ceeb", slateblue: "#6a5acd", slategray: "#708090", slategrey: "#708090", snow: "#fffafa", springgreen: "#00ff7f", steelblue: "#4682b4", tan: "#d2b48c", teal: "#008080", thistle: "#d8bfd8", tomato: "#ff6347", turquoise: "#40e0d0", violet: "#ee82ee", wheat: "#f5deb3", white: "#ffffff", whitesmoke: "#f5f5f5", yellow: "#ffff00", yellowgreen: "#9acd32" }); vi.forEach(function (n, t) { vi.set(n, te(t, ct, ar)) }); n.functor = f; n.xhr = function (t, i, r) { function h() { var n = f.status; !n && f.responseText || n >= 200 && n < 300 || n === 304 ? o.load.call(u, s.call(u, f)) : o.error.call(u, f) } var u = {}, o = n.dispatch("progress", "load", "error"), e = {}, s = d, f = new (c.XDomainRequest && /^(http(s)?:)?\/\//.test(t) ? XDomainRequest : XMLHttpRequest); return "onload" in f ? f.onload = f.onerror = h : f.onreadystatechange = function () { f.readyState > 3 && h() }, f.onprogress = function (t) { var i = n.event; n.event = t; try { o.progress.call(u, f) } finally { n.event = i } }, u.header = function (n, t) { return (n = (n + "").toLowerCase(), arguments.length < 2) ? e[n] : (t == null ? delete e[n] : e[n] = t + "", u) }, u.mimeType = function (n) { return arguments.length ? (i = n == null ? null : n + "", u) : i }, u.response = function (n) { return s = n, u }, ["get", "post"].forEach(function (n) { u[n] = function () { return u.send.apply(u, [n].concat(st(arguments))) } }), u.send = function (n, r, o) { if (arguments.length === 2 && typeof r == "function" && (o = r, r = null), f.open(n, t, !0), i == null || "accept" in e || (e.accept = i + ",*/*"), f.setRequestHeader) for (var s in e) f.setRequestHeader(s, e[s]); if (i != null && f.overrideMimeType && f.overrideMimeType(i), o != null) u.on("error", o).on("load", function (n) { o(null, n) }); return f.send(r == null ? null : r), u }, u.abort = function () { return f.abort(), u }, n.rebind(u, o, "on"), arguments.length === 2 && typeof i == "function" && (r = i, i = null), r == null ? u : u.get(rw(r)) }; n.csv = ac(",", "text/csv"); n.tsv = ac("\t", "text/tab-separated-values"); var uw = 0, ue = {}, hi = null, br, kr; n.timer = function (n, t, i) { if (arguments.length < 3) { if (arguments.length < 2) t = 0; else if (!isFinite(t)) return; i = Date.now() } var r = ue[n.id]; r && r.callback === n ? (r.then = i, r.delay = t) : ue[n.id = ++uw] = hi = { callback: n, then: i, delay: t, next: hi }; br || (kr = clearTimeout(kr), br = 1, yc(fe)) }; n.timer.flush = function () { for (var t, i = Date.now(), n = hi; n;) t = i - n.then, n.delay || (n.flush = n.callback(t)), n = n.next; vc() }; var yc = c.requestAnimationFrame || c.webkitRequestAnimationFrame || c.mozRequestAnimationFrame || c.oRequestAnimationFrame || c.msRequestAnimationFrame || function (n) { setTimeout(n, 17) }, pc = ".", fw = ",", dr = [3, 3], ew = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(ow); n.formatPrefix = function (t, i) { var r = 0; return t && (t < 0 && (t *= -1), i && (t = n.round(t, oe(t, i))), r = 1 + Math.floor(1e-12 + Math.log(t) / Math.LN10), r = Math.max(-24, Math.min(24, Math.floor((r <= 0 ? r + 1 : r - 1) / 3) * 3))), ew[8 + r / 3] }; n.round = function (n, t) { return t ? Math.round(n * (t = Math.pow(10, t))) / t : Math.round(n) }; n.format = function (t) { var u = ee.exec(t), v = u[1] || " ", e = u[2] || ">", p = u[3] || "", f = u[4] || "", s = u[5], h = +u[6], c = u[7], r = u[8], i = u[9], o = 1, l = "", y = !1, a; r && (r = +r.substring(1)); (s || v === "0" && e === "=") && (s = v = "0", e = "=", c && (h -= Math.floor((h - 1) / 4))); switch (i) { case "n": c = !0; i = "g"; break; case "%": o = 100; l = "%"; i = "f"; break; case "p": o = 100; l = "%"; i = "r"; break; case "b": case "o": case "x": case "X": f && (f = "0" + i.toLowerCase()); case "c": case "d": y = !0; r = 0; break; case "s": o = -1; i = "r" } return f === "#" && (f = ""), i != "r" || r || (i = "g"), r != null && (i == "g" ? r = Math.max(1, Math.min(21, r)) : (i == "e" || i == "f") && (r = Math.max(0, Math.min(20, r)))), i = wc.get(i) || sw, a = s && c, function (t) { var u, k, b, w; return y && t % 1 ? "" : (u = t < 0 || t === 0 && 1 / t < 0 ? (t = -t, "-") : p, o < 0 ? (k = n.formatPrefix(t, r), t = k.scale(t), l = k.symbol) : t *= o, t = i(t, r), !s && c && (t = gr(t)), b = f.length + t.length + (a ? 0 : u.length), w = b < h ? new Array(b = h - b + 1).join(v) : "", a && (t = gr(w + t)), pc && t.replace(".", pc), u += f, (e === "<" ? u + t + w : e === ">" ? w + u + t : e === "^" ? w.substring(0, b >>= 1) + u + t + w.substring(b) : u + (a ? t : w + t)) + l) } }; ee = /(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i; wc = n.map({ b: function (n) { return n.toString(2) }, c: function (n) { return String.fromCharCode(n) }, o: function (n) { return n.toString(8) }, x: function (n) { return n.toString(16) }, X: function (n) { return n.toString(16).toUpperCase() }, g: function (n, t) { return n.toPrecision(t) }, e: function (n, t) { return n.toExponential(t) }, f: function (n, t) { return n.toFixed(t) }, r: function (t, i) { return (t = n.round(t, oe(t, i))).toFixed(Math.max(0, Math.min(20, oe(t * (1 + 1e-15), i)))) } }); gr = d; dr && (bc = dr.length, gr = function (n) { for (var t = n.lastIndexOf("."), f = t >= 0 ? "." + n.substring(t + 1) : (t = n.length, ""), r = [], u = 0, i = dr[0]; t > 0 && i > 0;) r.push(n.substring(t -= i, t + i)), i = dr[u = (u + 1) % bc]; return r.reverse().join(fw || "") + f }); n.geo = {}; n.geo.stream = function (n, t) { n && se.hasOwnProperty(n.type) ? se[n.type](n, t) : nu(n, t) }; se = { Feature: function (n, t) { nu(n.geometry, t) }, FeatureCollection: function (n, t) { for (var i = n.features, r = -1, u = i.length; ++r < u;) nu(i[r].geometry, t) } }; he = { Sphere: function (n, t) { t.sphere() }, Point: function (n, t) { var i = n.coordinates; t.point(i[0], i[1]) }, MultiPoint: function (n, t) { for (var r = n.coordinates, u = -1, f = r.length, i; ++u < f;) i = r[u], t.point(i[0], i[1]) }, LineString: function (n, t) { ce(n.coordinates, t, 0) }, MultiLineString: function (n, t) { for (var i = n.coordinates, r = -1, u = i.length; ++r < u;) ce(i[r], t, 0) }, Polygon: function (n, t) { kc(n.coordinates, t) }, MultiPolygon: function (n, t) { for (var i = n.coordinates, r = -1, u = i.length; ++r < u;) kc(i[r], t) }, GeometryCollection: function (n, t) { for (var i = n.geometries, r = -1, u = i.length; ++r < u;) nu(i[r], t) } }; n.geo.area = function (t) { return tu = 0, n.geo.stream(t, lt), tu }; lt = { sphere: function () { tu += 4 * t }, point: o, lineStart: o, lineEnd: o, polygonStart: function () { iu = 1; ru = 0; lt.lineStart = hw }, polygonEnd: function () { var n = 2 * Math.atan2(ru, iu); tu += n < 0 ? 4 * t + n : n; lt.lineStart = lt.lineEnd = lt.point = o } }; n.geo.bounds = dc(d); n.geo.centroid = function (t) { l = rt = a = v = h = 0; n.geo.stream(t, nt); var i; if (rt && Math.abs(i = Math.sqrt(a * a + v * v + h * h)) > r) return [Math.atan2(v, a) * e, Math.asin(Math.max(-1, Math.min(1, h / i))) * e] }; nt = { sphere: function () { l < 2 && (l = 2, rt = a = v = h = 0) }, point: gc, lineStart: le, lineEnd: ae, polygonStart: function () { l < 2 && (l = 2, rt = a = v = h = 0); nt.lineStart = cw }, polygonEnd: function () { nt.lineStart = le } }; pe = rl(yi, yw, ww); pi = 1e9; n.geo.projection = dt; n.geo.projectionMutator = we; (n.geo.equirectangular = function () { return dt(wi) }).raw = wi.invert = wi; n.geo.rotation = function (n) { function t(t) { return t = n(t[0] * i, t[1] * i), t[0] *= e, t[1] *= e, t } return n = be(n[0] % 360 * i, n[1] * i, n.length > 2 ? n[2] * i : 0), t.invert = function (t) { return t = n.invert(t[0] * i, t[1] * i), t[0] *= e, t[1] *= e, t }, t }; n.geo.circle = function () { function n() { var n = typeof t == "function" ? t.apply(this, arguments) : t, u = be(-n[0] * i, -n[1] * i, 0).invert, r = []; return f(null, null, 1, { point: function (n, t) { r.push(n = u(n, t)); n[0] *= e; n[1] *= e } }), { type: "Polygon", coordinates: [r] } } var t = [0, 0], r, u = 6, f; return n.origin = function (i) { return arguments.length ? (t = i, n) : t }, n.angle = function (t) { return arguments.length ? (f = ke((r = +t) * i, u * i), n) : r }, n.precision = function (t) { return arguments.length ? (f = ke(r * i, (u = +t) * i), n) : u }, n.angle(90) }; n.geo.distance = function (n, t) { var f = (t[0] - n[0]) * i, e = n[1] * i, o = t[1] * i, a = Math.sin(f), s = Math.cos(f), h = Math.sin(e), c = Math.cos(e), l = Math.sin(o), u = Math.cos(o), r; return Math.atan2(Math.sqrt((r = u * a) * r + (r = c * l - h * u * s) * r), h * l + c * u * s) }; n.geo.graticule = function () { function t() { return { type: "MultiLineString", coordinates: g() } } function g() { return n.range(Math.ceil(u / a) * a, i, a).map(w).concat(n.range(Math.ceil(e / v) * v, f, v).map(b)).concat(n.range(Math.ceil(s / l) * l, o, l).filter(function (n) { return Math.abs(n % a) > r }).map(k)).concat(n.range(Math.ceil(c / p) * p, h, p).filter(function (n) { return Math.abs(n % v) > r }).map(d)) } var o, s, i, u, h, c, f, e, l = 10, p = l, a = 90, v = 360, k, d, w, b, y = 2.5; return t.lines = function () { return g().map(function (n) { return { type: "LineString", coordinates: n } }) }, t.outline = function () { return { type: "Polygon", coordinates: [w(u).concat(b(f).slice(1), w(i).reverse().slice(1), b(e).reverse().slice(1))] } }, t.extent = function (n) { return arguments.length ? t.majorExtent(n).minorExtent(n) : t.minorExtent() }, t.majorExtent = function (n) { return arguments.length ? (u = +n[0][0], i = +n[1][0], e = +n[0][1], f = +n[1][1], u > i && (n = u, u = i, i = n), e > f && (n = e, e = f, f = n), t.precision(y)) : [[u, e], [i, f]] }, t.minorExtent = function (n) { return arguments.length ? (s = +n[0][0], o = +n[1][0], c = +n[0][1], h = +n[1][1], s > o && (n = s, s = o, o = n), c > h && (n = c, c = h, h = n), t.precision(y)) : [[s, c], [o, h]] }, t.step = function (n) { return arguments.length ? t.majorStep(n).minorStep(n) : t.minorStep() }, t.majorStep = function (n) { return arguments.length ? (a = +n[0], v = +n[1], t) : [a, v] }, t.minorStep = function (n) { return arguments.length ? (l = +n[0], p = +n[1], t) : [l, p] }, t.precision = function (n) { return arguments.length ? (y = +n, k = al(c, h, 90), d = vl(s, o, y), w = al(e, f, 90), b = vl(u, i, y), t) : y }, t.majorExtent([[-180, -90 + r], [180, 90 - r]]).minorExtent([[-180, -80 - r], [180, 80 + r]]) }; n.geo.greatArc = function () { function t() { return { type: "LineString", coordinates: [u || i.apply(this, arguments), f || r.apply(this, arguments)] } } var i = de, u, r = ge, f; return t.distance = function () { return n.geo.distance(u || i.apply(this, arguments), f || r.apply(this, arguments)) }, t.source = function (n) { return arguments.length ? (i = n, u = typeof n == "function" ? null : n, t) : i }, t.target = function (n) { return arguments.length ? (r = n, f = typeof n == "function" ? null : n, t) : r }, t.precision = function () { return arguments.length ? t : 0 }, t }; n.geo.interpolate = function (n, t) { return gw(n[0] * i, n[1] * i, t[0] * i, t[1] * i) }; n.geo.length = function (t) { return no = 0, n.geo.stream(t, ni), no }; ni = { sphere: o, point: o, lineStart: nb, lineEnd: o, polygonStart: o, polygonEnd: o }; (n.geo.conicEqualArea = function () { return to(yl) }).raw = yl; n.geo.albersUsa = function () { function i(n) { return h(n)(n) } function h(n) { var e = n[0], i = n[1]; return i > 50 ? r : e < -140 ? u : i < 21 ? f : t } var t = n.geo.conicEqualArea().rotate([98, 0]).center([0, 38]).parallels([29.5, 45.5]), r = n.geo.conicEqualArea().rotate([160, 0]).center([0, 60]).parallels([55, 65]), u = n.geo.conicEqualArea().rotate([160, 0]).center([0, 20]).parallels([8, 18]), f = n.geo.conicEqualArea().rotate([60, 0]).center([0, 10]).parallels([8, 18]), e, o, s; return i.invert = function (n) { return e(n) || o(n) || s(n) || t.invert(n) }, i.scale = function (n) { return arguments.length ? (t.scale(n), r.scale(n * .6), u.scale(n), f.scale(n * 1.5), i.translate(t.translate())) : t.scale() }, i.translate = function (n) { if (!arguments.length) return t.translate(); var h = t.scale(), c = n[0], l = n[1]; return t.translate(n), r.translate([c - .4 * h, l + .17 * h]), u.translate([c - .19 * h, l + .2 * h]), f.translate([c + .58 * h, l + .43 * h]), e = io(r, [[-180, 50], [-130, 72]]), o = io(u, [[-164, 18], [-154, 24]]), s = io(f, [[-67.5, 17.5], [-65, 19]]), i }, i.scale(1e3) }; at = { point: o, lineStart: o, lineEnd: o, polygonStart: function () { uo = 0; at.lineStart = tb }, polygonEnd: function () { at.lineStart = at.lineEnd = at.point = o; ro += Math.abs(uo / 2) } }; tt = { point: fo, lineStart: pl, lineEnd: wl, polygonStart: function () { tt.lineStart = rb }, polygonEnd: function () { tt.point = fo; tt.lineStart = pl; tt.lineEnd = wl } }; n.geo.path = function () { function t(t) { return t && n.geo.stream(t, r(u.pointRadius(typeof i == "function" ? +i.apply(this, arguments) : i))), u.result() } var i = 4.5, f, e, r, u; return t.area = function (t) { return ro = 0, n.geo.stream(t, r(at)), ro }, t.centroid = function (t) { return l = a = v = h = 0, n.geo.stream(t, r(tt)), h ? [a / h, v / h] : undefined }, t.bounds = function (n) { return dc(r)(n) }, t.projection = function (n) { return arguments.length ? (r = (f = n) ? n.stream || fb(n) : d, t) : f }, t.context = function (n) { return arguments.length ? (u = (e = n) == null ? new ib : new ub(n), t) : e }, t.pointRadius = function (n) { return arguments.length ? (i = typeof n == "function" ? n : +n, t) : i }, t.projection(n.geo.albersUsa()).context(null) }; n.geo.albers = function () { return n.geo.conicEqualArea().parallels([29.5, 45.5]).rotate([98, 0]).center([0, 38]).scale(1e3) }; eo = bi(function (n) { return Math.sqrt(2 / (1 + n)) }, function (n) { return 2 * Math.asin(n / 2) }); (n.geo.azimuthalEqualArea = function () { return dt(eo) }).raw = eo; oo = bi(function (n) { var t = Math.acos(n); return t && t / Math.sin(t) }, d); (n.geo.azimuthalEquidistant = function () { return dt(oo) }).raw = oo; (n.geo.conicConformal = function () { return to(kl) }).raw = kl; (n.geo.conicEquidistant = function () { return to(dl) }).raw = dl; so = bi(function (n) { return 1 / n }, Math.atan); (n.geo.gnomonic = function () { return dt(so) }).raw = so; hu.invert = function (n, i) { return [n, 2 * Math.atan(Math.exp(i)) - t / 2] }; (n.geo.mercator = function () { return gl(hu) }).raw = hu; ho = bi(function () { return 1 }, Math.asin); (n.geo.orthographic = function () { return dt(ho) }).raw = ho; co = bi(function (n) { return 1 / (1 + n) }, function (n) { return 2 * Math.atan(n) }); (n.geo.stereographic = function () { return dt(co) }).raw = co; lo.invert = function (n, t) { return [Math.atan2(tw(n), Math.cos(t)), nw(Math.sin(t) / iw(n))] }; (n.geo.transverseMercator = function () { return gl(lo) }).raw = lo; n.geom = {}; n.svg = {}; n.svg.line = function () { return na(d) }; cu = n.map({ linear: g, "linear-closed": eb, "step-before": ao, "step-after": vo, basis: ta, "basis-open": cb, "basis-closed": lb, bundle: ab, cardinal: hb, "cardinal-open": ob, "cardinal-closed": sb, monotone: pb }); cu.forEach(function (n, t) { t.key = n; t.closed = /-closed$/.test(n) }); var ia = [0, 2 / 3, 1 / 3, 0], ra = [0, 1 / 3, 2 / 3, 0], ci = [0, 1 / 6, 2 / 3, 1 / 6]; n.geom.hull = function (n) { function t(n) { var d; if (n.length < 3) return []; var g = f(r), it = f(i), y = n.length, u, nt = y - 1, e = [], h = [], tt, t, o, s = 0, l, a, b, k, p, v, w, c; if (g === ut && i === vt) u = n; else for (t = 0, u = []; t < y; ++t) u.push([+g.call(this, tt = n[t], t), +it.call(this, tt, t)]); for (t = 1; t < y; ++t) u[t][1] < u[s][1] ? s = t : u[t][1] == u[s][1] && (s = u[t][0] < u[s][0] ? t : s); for (t = 0; t < y; ++t) t !== s && (a = u[t][1] - u[s][1], l = u[t][0] - u[s][0], e.push({ angle: Math.atan2(a, l), index: t })); for (e.sort(function (n, t) { return n.angle - t.angle }), w = e[0].angle, v = e[0].index, p = 0, t = 1; t < nt; ++t) o = e[t].index, w == e[t].angle ? (l = u[v][0] - u[s][0], a = u[v][1] - u[s][1], b = u[o][0] - u[s][0], k = u[o][1] - u[s][1], l * l + a * a >= b * b + k * k ? e[t].index = -1 : (e[p].index = -1, w = e[t].angle, p = t, v = o)) : (w = e[t].angle, p = t, v = o); for (h.push(s), t = 0, o = 0; t < 2; ++o) e[o].index !== -1 && (h.push(e[o].index), t++); for (c = h.length; o < nt; ++o) if (e[o].index !== -1) { while (!wb(h[c - 2], h[c - 1], e[o].index, u))--c; h[c++] = e[o].index } for (d = [], t = 0; t < c; ++t) d.push(n[h[t]]); return d } var r = ut, i = vt; return arguments.length ? t(n) : (t.x = function (n) { return arguments.length ? (r = n, t) : r }, t.y = function (n) { return arguments.length ? (i = n, t) : i }, t) }; n.geom.polygon = function (n) { return n.area = function () { for (var t = 0, i = n.length, r = n[i - 1][1] * n[0][0] - n[i - 1][0] * n[0][1]; ++t < i;) r += n[t - 1][1] * n[t][0] - n[t - 1][0] * n[t][1]; return r * .5 }, n.centroid = function (t) { var f = -1, e = n.length, o = 0, s = 0, r, i = n[e - 1], u; for (arguments.length || (t = -1 / (6 * n.area())) ; ++f < e;) r = i, i = n[f], u = r[0] * i[1] - i[0] * r[1], o += (r[0] + i[0]) * u, s += (r[1] + i[1]) * u; return [o * t, s * t] }, n.clip = function (t) { for (var e, s = -1, h = n.length, o, c, r = n[h - 1], i, u, f; ++s < h;) { for (e = t.slice(), t.length = 0, i = n[s], u = e[(c = e.length) - 1], o = -1; ++o < c;) f = e[o], wo(f, r, i) ? (wo(u, r, i) || t.push(ua(u, f, r, i)), t.push(f)) : wo(u, r, i) && t.push(ua(u, f, r, i)), u = f; r = i } return t }, n }; n.geom.delaunay = function (n) { var t = n.map(function () { return [] }), i = []; return bo(n, function (i) { t[i.region.l.index].push(n[i.region.r.index]) }), t.forEach(function (t, r) { var f = n[r], o = f[0], s = f[1], u, e; for (t.forEach(function (n) { n.angle = Math.atan2(n[0] - o, n[1] - s) }), t.sort(function (n, t) { return n.angle - t.angle }), u = 0, e = t.length - 1; u < e; u++) i.push([f, t[u], t[u + 1]]) }), i }; n.geom.voronoi = function (t) { function i(t) { var c, h = t.map(function () { return [] }), a = f(u), v = f(e), y, o, l = t.length, i = 1e6; if (a === ut && v === vt) c = t; else for (c = [], o = 0; o < l; ++o) c.push([+a.call(this, y = t[o], o), +v.call(this, y, o)]); if (bo(c, function (n) { var t, r, u, f, e, o, s, c; n.a === 1 && n.b >= 0 ? (t = n.ep.r, r = n.ep.l) : (t = n.ep.l, r = n.ep.r); n.a === 1 ? (e = t ? t.y : -i, u = n.c - n.b * e, o = r ? r.y : i, f = n.c - n.b * o) : (u = t ? t.x : -i, e = n.c - n.a * u, f = r ? r.x : i, o = n.c - n.a * f); s = [u, e]; c = [f, o]; h[n.region.l.index].push(s, c); h[n.region.r.index].push(s, c) }), h = h.map(function (t, i) { var e = c[i][0], o = c[i][1], u = t.map(function (n) { return Math.atan2(n[0] - e, n[1] - o) }), f = n.range(t.length).sort(function (n, t) { return u[n] - u[t] }); return f.filter(function (n, t) { return !t || u[n] - u[f[t - 1]] > r }).map(function (n) { return t[n] }) }), h.forEach(function (n, t) { var l = n.length, s, u, h; if (!l) return n.push([-i, -i], [-i, i], [i, i], [i, -i]); if (!(l > 2)) { var a = c[t], v = n[0], y = n[1], p = a[0], w = a[1], f = v[0], e = v[1], b = y[0], k = y[1], d = Math.abs(b - f), o = k - e; Math.abs(o) < r ? (u = w < e ? -i : i, n.push([-i, u], [i, u])) : d < r ? (s = p < f ? -i : i, n.push([s, -i], [s, i])) : (u = (b - f) * (e - w) < (f - p) * (k - e) ? i : -i, h = Math.abs(o) - d, Math.abs(h) < r ? n.push([o < 0 ? u : -u, u]) : (h > 0 && (u *= -1), n.push([-i, u], [i, u]))) } }), s) for (o = 0; o < l; ++o) s(h[o]); for (o = 0; o < l; ++o) h[o].point = t[o]; return h } var o = null, u = ut, e = vt, s; return arguments.length ? i(t) : (i.x = function (n) { return arguments.length ? (u = n, i) : u }, i.y = function (n) { return arguments.length ? (e = n, i) : e }, i.size = function (t) { return arguments.length ? (t == null ? s = null : (o = [+t[0], +t[1]], s = n.geom.polygon([[0, 0], [0, o[1]], o, [o[0], 0]]).clip), i) : o }, i.links = function (n) { var i, r = n.map(function () { return [] }), o = [], s = f(u), h = f(e), c, t, l = n.length; if (s === ut && h === vt) i = n; else for (t = 0; t < l; ++t) i.push([+s.call(this, c = n[t], t), +h.call(this, c, t)]); return bo(i, function (t) { var i = t.region.l.index, u = t.region.r.index; r[i][u] || (r[i][u] = r[u][i] = !0, o.push({ source: n[i], target: n[u] })) }), o }, i.triangles = function (t) { if (u === ut && e === vt) return n.geom.delaunay(t); var r, o, c = f(u), l = f(e), s, i, h; for (i = 0, r = [], h = t.length; i < h; ++i) o = [+c.call(this, s = t[i], i), +l.call(this, s, i)], o.data = s, r.push(o); return n.geom.delaunay(r).map(function (n) { return n.map(function (n) { return n.data }) }) }, i) }; au = { l: "r", r: "l" }; n.geom.quadtree = function (n, t, i, r, u) { function e(n) { function rt(n, t, i, r, u, f, e, o) { var s, h, c; isNaN(i) || isNaN(r) || (n.leaf ? (s = n.x, h = n.y, s != null ? Math.abs(s - i) + Math.abs(h - r) < .01 ? nt(n, t, i, r, u, f, e, o) : (c = n.point, n.x = n.y = n.point = null, nt(n, c, s, h, u, f, e, o), nt(n, t, i, r, u, f, e, o)) : (n.x = i, n.y = r, n.point = t)) : nt(n, t, i, r, u, f, e, o)) } function nt(n, t, i, r, u, f, e, o) { var s = (u + e) * .5, h = (f + o) * .5, c = i >= s, l = r >= h, a = (l << 1) + c; n.leaf = !1; n = n.nodes[a] || (n.nodes[a] = fa()); c ? u = s : e = s; l ? f = h : o = h; rt(n, t, i, r, u, f, e, o) } var c, ut = f(o), ft = f(s), k, d, e, g, l, a, v, y, w, b, tt, it, p; if (t != null) l = t, a = i, v = r, y = u; else if (v = y = -(l = a = Infinity), k = [], d = [], g = n.length, h) for (e = 0; e < g; ++e) c = n[e], c.x < l && (l = c.x), c.y < a && (a = c.y), c.x > v && (v = c.x), c.y > y && (y = c.y), k.push(c.x), d.push(c.y); else for (e = 0; e < g; ++e) w = +ut(c = n[e], e), b = +ft(c, e), w < l && (l = w), b < a && (a = b), w > v && (v = w), b > y && (y = b), k.push(w), d.push(b); if (tt = v - l, it = y - a, tt > it ? y = a + tt : v = l + it, p = fa(), p.add = function (n) { rt(p, n, +ut(n, ++e), +ft(n, e), l, a, v, y) }, p.visit = function (n) { di(n, p, l, a, v, y) }, e = -1, t == null) { while (++e < g) rt(p, n[e], k[e], d[e], l, a, v, y); --e } else n.forEach(p.add); return k = d = n = c = null, p } var o = ut, s = vt, h; return (h = arguments.length) ? (o = bb, s = kb, h === 3 && (u = i, r = t, i = t = 0), e(n)) : (e.x = function (n) { return arguments.length ? (o = n, e) : o }, e.y = function (n) { return arguments.length ? (s = n, e) : s }, e.size = function (n) { return arguments.length ? (n == null ? t = i = r = u = null : (t = i = 0, r = +n[0], u = +n[1]), e) : t == null ? null : [r, u] }, e) }; n.interpolateRgb = ko; n.transform = function (t) { var i = w.createElementNS(n.ns.prefix.svg, "g"); return (n.transform = function (n) { i.setAttribute("transform", n); var t = i.transform.baseVal.consolidate(); return new ea(t ? t.matrix : ha) })(t) }; ea.prototype.toString = function () { return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")" }; ha = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }; n.interpolateNumber = yt; n.interpolateTransform = ca; n.interpolateObject = la; n.interpolateString = aa; gi = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g; n.interpolate = nr; n.interpolators = [function (n, t) { var i = typeof t; return (i === "string" || i !== typeof n ? vi.has(t) || /^(#|rgb\(|hsl\()/.test(t) ? ko : aa : t instanceof fi ? ko : i === "object" ? Array.isArray(t) ? va : la : yt)(n, t) }]; n.interpolateArray = va; var ya = function () { return d }, gb = n.map({ linear: ya, poly: fk, quad: function () { return ik }, cubic: function () { return rk }, sin: function () { return ek }, exp: function () { return ok }, circle: function () { return sk }, elastic: hk, back: ck, bounce: function () { return lk } }), nk = n.map({ "in": d, out: pa, "in-out": wa, "out-in": function (n) { return wa(pa(n)) } }); n.ease = function (n) { var t = n.indexOf("-"), i = t >= 0 ? n.substring(0, t) : n, r = t >= 0 ? n.substring(t + 1) : "in"; return i = gb.get(i) || ya, r = nk.get(r) || d, tk(r(i.apply(null, Array.prototype.slice.call(arguments, 1)))) }; n.interpolateHcl = ak; n.interpolateHsl = vk; n.interpolateLab = yk; n.interpolateRound = ba; n.layout = {}; n.layout.bundle = function () { return function (n) { for (var t = [], i = -1, r = n.length; ++i < r;) t.push(bk(n[i])); return t } }; n.layout.chord = function () { function l() { var k = {}, d = [], it = n.range(u), g = [], y, i, nt, l, v, w, b; for (r = [], f = [], y = 0, l = -1; ++l < u;) { for (i = 0, v = -1; ++v < u;) i += e[l][v]; d.push(i); g.push(n.range(u)); y += i } for (s && it.sort(function (n, t) { return s(d[n], d[t]) }), h && g.forEach(function (n, t) { n.sort(function (n, i) { return h(e[t][n], e[t][i]) }) }), y = (2 * t - o * u) / y, i = 0, l = -1; ++l < u;) { for (nt = i, v = -1; ++v < u;) { var p = it[l], tt = g[p][v], rt = e[p][tt], ut = i, ft = i += rt * y; k[p + "-" + tt] = { index: p, subindex: tt, startAngle: ut, endAngle: ft, value: rt } } f[p] = { index: p, startAngle: nt, endAngle: i, value: (i - nt) / y }; i += o } for (l = -1; ++l < u;) for (v = l - 1; ++v < u;) w = k[l + "-" + v], b = k[v + "-" + l], (w.value || b.value) && r.push(w.value < b.value ? { source: b, target: w } : { source: w, target: b }); c && a() } function a() { r.sort(function (n, t) { return c((n.source.value + n.target.value) / 2, (t.source.value + t.target.value) / 2) }) } var i = {}, r, f, e, u, o = 0, s, h, c; return i.matrix = function (n) { return arguments.length ? (u = (e = n) && e.length, r = f = null, i) : e }, i.padding = function (n) { return arguments.length ? (o = n, r = f = null, i) : o }, i.sortGroups = function (n) { return arguments.length ? (s = n, r = f = null, i) : s }, i.sortSubgroups = function (n) { return arguments.length ? (h = n, r = null, i) : h }, i.sortChords = function (n) { return arguments.length ? (c = n, r && a(), i) : c }, i.chords = function () { return r || l(), r }, i.groups = function () { return f || l(), f }, i }; n.layout.force = function () { function b(n) { return function (t, i, r, u) { var e; if (t.point !== n) { var o = t.cx - n.x, s = t.cy - n.y, f = 1 / Math.sqrt(o * o + s * s); if ((u - i) * f < w) return e = t.charge * f * f, n.px -= o * e, n.py -= s * e, !0; t.point && isFinite(f) && (e = t.pointCharge * f * f, n.px -= o * e, n.py -= s * e) } return !t.charge } } function k(i) { i.px = n.event.x; i.py = n.event.y; t.resume() } var t = {}, h = n.dispatch("start", "tick", "end"), f = [1, 1], c, r, l = .9, o = ga, s = nv, e = -30, p = .1, w = .8, i = [], u = [], a, v, y; return t.tick = function () { if ((r *= .99) < .005) return h.end({ type: "end", alpha: r = 0 }), !0; for (var nt = i.length, it = u.length, tt, t, k, g, d, s, c, w, o = 0; o < it; ++o) t = u[o], k = t.source, g = t.target, c = g.x - k.x, w = g.y - k.y, (d = c * c + w * w) && (d = r * v[o] * ((d = Math.sqrt(d)) - a[o]) / d, c *= d, w *= d, g.x -= c * (s = k.weight / (g.weight + k.weight)), g.y -= w * s, k.x += c * (s = 1 - s), k.y += w * s); if ((s = r * p) && (c = f[0] / 2, w = f[1] / 2, o = -1, s)) while (++o < nt) t = i[o], t.x += (c - t.x) * s, t.y += (w - t.y) * s; if (e) for (da(tt = n.geom.quadtree(i), r, y), o = -1; ++o < nt;) (t = i[o]).fixed || tt.visit(b(t)); for (o = -1; ++o < nt;) t = i[o], t.fixed ? (t.x = t.px, t.y = t.py) : (t.x -= (t.px - (t.px = t.x)) * l, t.y -= (t.py - (t.py = t.y)) * l); h.tick({ type: "tick", alpha: r }) }, t.nodes = function (n) { return arguments.length ? (i = n, t) : i }, t.links = function (n) { return arguments.length ? (u = n, t) : u }, t.size = function (n) { return arguments.length ? (f = n, t) : f }, t.linkDistance = function (n) { return arguments.length ? (o = typeof n == "function" ? n : +n, t) : o }, t.distance = t.linkDistance, t.linkStrength = function (n) { return arguments.length ? (s = typeof n == "function" ? n : +n, t) : s }, t.friction = function (n) { return arguments.length ? (l = +n, t) : l }, t.charge = function (n) { return arguments.length ? (e = typeof n == "function" ? n : +n, t) : e }, t.gravity = function (n) { return arguments.length ? (p = +n, t) : p }, t.theta = function (n) { return arguments.length ? (w = +n, t) : w }, t.alpha = function (i) { return arguments.length ? (i = +i, r ? r = i > 0 ? i : 0 : i > 0 && (h.start({ type: "start", alpha: r = i }), n.timer(t.tick)), t) : r }, t.start = function () { function w(t, i) { for (var r = d(n), u = -1, e = r.length, f; ++u < e;) if (!isNaN(f = r[u][t])) return f; return Math.random() * i } function d() { if (!l) { for (l = [], h = 0; h < p; ++h) l[h] = []; for (h = 0; h < c; ++h) { var t = u[h]; l[t.source.index].push(t.target); l[t.target.index].push(t.source) } } return l[n] } for (var h, p = i.length, c = u.length, b = f[0], k = f[1], l, r, n = 0; n < p; ++n) (r = i[n]).index = n, r.weight = 0; for (n = 0; n < c; ++n) r = u[n], typeof r.source == "number" && (r.source = i[r.source]), typeof r.target == "number" && (r.target = i[r.target]), ++r.source.weight, ++r.target.weight; for (n = 0; n < p; ++n) r = i[n], isNaN(r.x) && (r.x = w("x", b)), isNaN(r.y) && (r.y = w("y", k)), isNaN(r.px) && (r.px = r.x), isNaN(r.py) && (r.py = r.y); if (a = [], typeof o == "function") for (n = 0; n < c; ++n) a[n] = +o.call(this, u[n], n); else for (n = 0; n < c; ++n) a[n] = o; if (v = [], typeof s == "function") for (n = 0; n < c; ++n) v[n] = +s.call(this, u[n], n); else for (n = 0; n < c; ++n) v[n] = s; if (y = [], typeof e == "function") for (n = 0; n < p; ++n) y[n] = +e.call(this, i[n], n); else for (n = 0; n < p; ++n) y[n] = e; return t.resume() }, t.resume = function () { return t.alpha(.1) }, t.stop = function () { return t.alpha(0) }, t.drag = function () { if (c || (c = n.behavior.drag().origin(d).on("dragstart.force", dk).on("drag.force", k).on("dragend.force", gk)), !arguments.length) return c; this.on("mouseover.force", nd).on("mouseout.force", td).call(c) }, n.rebind(t, h, "on") }; ga = 20; nv = 1; n.layout.hierarchy = function () { function u(f, e, o) { var h = r.call(n, f, e); if (f.depth = e, o.push(f), h && (l = h.length)) { for (var c = -1, l, a = f.children = [], v = 0, y = e + 1, s; ++c < l;) s = u(h[c], y, o), s.parent = f, a.push(s), v += s.value; i && a.sort(i); t && (f.value = v) } else t && (f.value = +t.call(n, f, e) || 0); return f } function f(i, r) { var e = i.children, u = 0, o, s, h; if (e && (s = e.length)) for (o = -1, h = r + 1; ++o < s;) u += f(e[o], h); else t && (u = +t.call(n, i, r) || 0); return t && (i.value = u), u } function n(n) { var t = []; return u(n, 0, t), t } var i = ud, r = id, t = rd; return n.sort = function (t) { return arguments.length ? (i = t, n) : i }, n.children = function (t) { return arguments.length ? (r = t, n) : r }, n.value = function (i) { return arguments.length ? (t = i, n) : t }, n.revalue = function (n) { return f(n, 0), n }, n }; n.layout.partition = function () { function u(n, t, i, r) { var f = n.children, e, o, s, h; if (n.x = t, n.y = n.depth * r, n.dx = i, n.dy = r, f && (o = f.length)) for (e = -1, i = n.value ? i / n.value : 0; ++e < o;) u(s = f[e], t, h = s.value * i, r), t += h } function f(n) { var t = n.children, i = 0, r, u; if (t && (u = t.length)) for (r = -1; ++r < u;) i = Math.max(i, f(t[r])); return 1 + i } function i(n, i) { var e = r.call(this, n, i); return u(e[0], 0, t[0], t[1] / f(e[0])), e } var r = n.layout.hierarchy(), t = [1, 1]; return i.size = function (n) { return arguments.length ? (t = n, i) : t }, tr(i, r) }; n.layout.pie = function () { function i(t) { var o = t.map(function (n, t) { return +e.call(i, n, t) }), s = +(typeof u == "function" ? u.apply(this, arguments) : u), l = ((typeof f == "function" ? f.apply(this, arguments) : f) - s) / n.sum(o), c = n.range(t.length), h; return r != null && c.sort(r === ns ? function (n, t) { return o[t] - o[n] } : function (n, i) { return r(t[n], t[i]) }), h = [], c.forEach(function (n) { var i; h[n] = { data: t[n], value: i = o[n], startAngle: s, endAngle: s += i * l } }), h } var e = Number, r = ns, u = 0, f = 2 * t; return i.value = function (n) { return arguments.length ? (e = n, i) : e }, i.sort = function (n) { return arguments.length ? (r = n, i) : r }, i.startAngle = function (n) { return arguments.length ? (u = n, i) : u }, i.endAngle = function (n) { return arguments.length ? (f = n, i) : f }, i }; ns = {}; n.layout.stack = function () { function t(s, h) { var l = s.map(function (n, i) { return r.call(t, n, i) }), a = l.map(function (n) { return n.map(function (n, i) { return [e.call(t, n, i), o.call(t, n, i)] }) }), y = u.call(t, a, h); l = n.permute(l, y); a = n.permute(a, y); for (var w = f.call(t, a, h), b = l.length, k = l[0].length, v, p, c = 0; c < k; ++c) for (i.call(t, l[0][c], p = w[c], a[0][c][1]), v = 1; v < b; ++v) i.call(t, l[v][c], p += a[v - 1][c][1], a[v][c][1]); return s } var r = d, u = ts, f = is, i = sd, e = ed, o = od; return t.values = function (n) { return arguments.length ? (r = n, t) : r }, t.order = function (n) { return arguments.length ? (u = typeof n == "function" ? n : tv.get(n) || ts, t) : u }, t.offset = function (n) { return arguments.length ? (f = typeof n == "function" ? n : iv.get(n) || is, t) : f }, t.x = function (n) { return arguments.length ? (e = n, t) : e }, t.y = function (n) { return arguments.length ? (o = n, t) : o }, t.out = function (n) { return arguments.length ? (i = n, t) : i }, t }; tv = n.map({ "inside-out": function (t) { for (var u = t.length, i, f = t.map(hd), e = t.map(cd), l = n.range(u).sort(function (n, t) { return f[n] - f[t] }), o = 0, s = 0, h = [], c = [], r = 0; r < u; ++r) i = l[r], o < s ? (o += e[i], h.push(i)) : (s += e[i], c.push(i)); return c.reverse().concat(h) }, reverse: function (t) { return n.range(t.length).reverse() }, "default": ts }); iv = n.map({ silhouette: function (n) { for (var s = n.length, f = n[0].length, e = [], u = 0, r, i, o = [], t = 0; t < f; ++t) { for (r = 0, i = 0; r < s; r++) i += n[r][t][1]; i > u && (u = i); e.push(i) } for (t = 0; t < f; ++t) o[t] = (u - e[t]) / 2; return o }, wiggle: function (n) { var a = n.length, h = n[0], v = h.length, i, t, r, u, c, l, f, e, o, s = []; for (s[0] = e = o = 0, t = 1; t < v; ++t) { for (i = 0, u = 0; i < a; ++i) u += n[i][t][1]; for (i = 0, c = 0, f = h[t][0] - h[t - 1][0]; i < a; ++i) { for (r = 0, l = (n[i][t][1] - n[i][t - 1][1]) / (2 * f) ; r < i; ++r) l += (n[r][t][1] - n[r][t - 1][1]) / f; c += l * n[i][t][1] } s[t] = e -= u ? c / u * f : 0; e < o && (o = e) } for (t = 0; t < v; ++t) s[t] -= o; return s }, expand: function (n) { for (var r = n.length, f = n[0].length, o = 1 / r, t, u, e = [], i = 0; i < f; ++i) { for (t = 0, u = 0; t < r; t++) u += n[t][i][1]; if (u) for (t = 0; t < r; t++) n[t][i][1] /= u; else for (t = 0; t < r; t++) n[t][i][1] = o } for (i = 0; i < f; ++i) e[i] = 0; return e }, zero: is }); n.layout.histogram = function () { function t(t, f) { for (var l = [], s = t.map(r, this), a = u.call(this, s, f), h = e.call(this, a, s, f), o, f = -1, y = s.length, v = h.length - 1, p = i ? 1 : 1 / y, c; ++f < v;) o = l[f] = [], o.dx = h[f + 1] - (o.x = h[f]), o.y = 0; if (v > 0) for (f = -1; ++f < y;) c = s[f], c >= a[0] && c <= a[1] && (o = l[n.bisect(h, c, 1, v) - 1], o.y += p, o.push(t[f])); return l } var i = !0, r = Number, u = vd, e = ad; return t.value = function (n) { return arguments.length ? (r = n, t) : r }, t.range = function (n) { return arguments.length ? (u = f(n), t) : u }, t.bins = function (n) { return arguments.length ? (e = typeof n == "number" ? function (t) { return rv(t, n) } : f(n), t) : e }, t.frequency = function (n) { return arguments.length ? (i = !!n, t) : i }, t }; n.layout.tree = function () { function i(n, i) { function h(n, i) { var f = n.children, r = n._tree, o; if (f && (s = f.length)) { for (var s, c = f[0], e, l = c, u, v = -1; ++v < s;) u = f[v], h(u, e), l = a(u, e, l), e = u; bd(n); o = .5 * (c._tree.prelim + u._tree.prelim); i ? (r.prelim = i._tree.prelim + t(n, i), r.mod = r.prelim - o) : r.prelim = o } else i && (r.prelim = i._tree.prelim + t(n, i)) } function c(n, t) { var i, r, u; if (n.x = n._tree.prelim + t, i = n.children, i && (u = i.length)) for (r = -1, t += n._tree.mod; ++r < u;) c(i[r], t) } function a(n, i, r) { if (i) { for (var f = n, e = n, u = i, o = n.parent.children[0], h = f._tree.mod, c = e._tree.mod, l = u._tree.mod, a = o._tree.mod, s; u = us(u), f = rs(f), u && f;) o = rs(o), e = us(e), e._tree.ancestor = n, s = u._tree.prelim + l - f._tree.prelim - h + t(u, f), s > 0 && (kd(dd(u, n, r), n, s), h += s, c += s), l += u._tree.mod, h += f._tree.mod, a += o._tree.mod, c += e._tree.mod; u && !us(e) && (e._tree.thread = u, e._tree.mod += l - c); f && !rs(o) && (o._tree.thread = f, o._tree.mod += h - a, r = n) } return r } var s = u.call(this, n, i), f = s[0]; pt(f, function (n, t) { n._tree = { ancestor: n, prelim: 0, mod: 0, change: 0, shift: 0, number: t ? t._tree.number + 1 : 0 } }); h(f); c(f, -f._tree.prelim); var e = vu(f, pd), o = vu(f, yd), v = vu(f, wd), l = e.x - t(e, o) / 2, y = o.x + t(o, e) / 2, p = v.depth || 1; return pt(f, function (n) { n.x = (n.x - l) / (y - l) * r[0]; n.y = n.depth / p * r[1]; delete n._tree }), s } var u = n.layout.hierarchy().sort(null).value(null), t = uv, r = [1, 1]; return i.separation = function (n) { return arguments.length ? (t = n, i) : t }, i.size = function (n) { return arguments.length ? (r = n, i) : r }, tr(i, u) }; n.layout.pack = function () { function t(n, t) { var c = u.call(this, n, t), f = c[0], h; f.x = 0; f.y = 0; pt(f, function (n) { n.r = Math.sqrt(n.value) }); pt(f, ov); var e = r[0], o = r[1], s = Math.max(2 * f.r / e, 2 * f.r / o); return i > 0 && (h = i * s / 2, pt(f, function (n) { n.r += h }), pt(f, ov), pt(f, function (n) { n.r -= h }), s = Math.max(2 * f.r / e, 2 * f.r / o)), sv(f, e / 2, o / 2, 1 / s), c } var u = n.layout.hierarchy().sort(gd), i = 0, r = [1, 1]; return t.size = function (n) { return arguments.length ? (r = n, t) : r }, t.padding = function (n) { return arguments.length ? (i = +n, t) : i }, tr(t, u) }; n.layout.cluster = function () { function i(n, i) { var h = u.call(this, n, i), f = h[0], e, l = 0; pt(f, function (n) { var i = n.children; i && i.length ? (n.x = rg(i), n.y = ig(i)) : (n.x = e ? l += t(n, e) : 0, n.y = 0, e = n) }); var o = cv(f), s = lv(f), c = o.x - t(o, s) / 2, a = s.x + t(s, o) / 2; return pt(f, function (n) { n.x = (n.x - c) / (a - c) * r[0]; n.y = (1 - (f.y ? n.y / f.y : 1)) * r[1] }), h } var u = n.layout.hierarchy().sort(null).value(null), t = uv, r = [1, 1]; return i.separation = function (n) { return arguments.length ? (t = n, i) : t }, i.size = function (n) { return arguments.length ? (r = n, i) : r }, tr(i, u) }; n.layout.treemap = function () { function c(n, t) { for (var r = -1, f = n.length, u, i; ++r < f;) i = (u = n[r]).value * (t < 0 ? 0 : t), u.area = isNaN(i) || i <= 0 ? 0 : i } function v(n) { var u = n.children; if (u && u.length) { var r = s(n), t = [], f = u.slice(), h, o = Infinity, a, e = i === "slice" ? r.dx : i === "dice" ? r.dy : i === "slice-dice" ? n.depth & 1 ? r.dy : r.dx : Math.min(r.dx, r.dy), y; for (c(f, r.dx * r.dy / n.value), t.area = 0; (y = f.length) > 0;) t.push(h = f[y - 1]), t.area += h.area, i !== "squarify" || (a = p(t, e)) <= o ? (f.pop(), o = a) : (t.area -= t.pop().area, l(t, e, r, !1), e = Math.min(r.dx, r.dy), t.length = t.area = 0, o = Infinity); t.length && (l(t, e, r, !0), t.length = t.area = 0); u.forEach(v) } } function y(n) { var u = n.children; if (u && u.length) { var i = s(n), f = u.slice(), r, t = []; for (c(f, i.dx * i.dy / n.value), t.area = 0; r = f.pop() ;) t.push(r), t.area += r.area, r.z != null && (l(t, r.z ? i.dx : i.dy, i, !f.length), t.length = t.area = 0); u.forEach(y) } } function p(n, t) { for (var i = n.area, r, u = 0, f = Infinity, o = -1, s = n.length; ++o < s;) (r = n[o].area) && (r < f && (f = r), r > u && (u = r)); return i *= i, t *= t, i ? Math.max(t * u * e / i, i / (t * f * e)) : Infinity } function l(n, t, i, u) { var h = -1, c = n.length, o = i.x, s = i.y, e = t ? r(n.area / t) : 0, f; if (t == i.dx) { for ((u || e > i.dy) && (e = i.dy) ; ++h < c;) f = n[h], f.x = o, f.y = s, f.dy = e, o += f.dx = Math.min(i.x + i.dx - o, e ? r(f.area / e) : 0); f.z = !0; f.dx += i.x + i.dx - o; i.y += e; i.dy -= e } else { for ((u || e > i.dx) && (e = i.dx) ; ++h < c;) f = n[h], f.x = o, f.y = s, f.dx = e, s += f.dy = Math.min(i.y + i.dy - s, e ? r(f.area / e) : 0); f.z = !1; f.dy += i.y + i.dy - s; i.x += e; i.dx -= e } } function t(n) { var i = u || o(n), t = i[0]; return t.x = 0, t.y = 0, t.dx = f[0], t.dy = f[1], u && o.revalue(t), c([t], t.dx * t.dy / t.value), (u ? y : v)(t), h && (u = i), i } var o = n.layout.hierarchy(), r = Math.round, f = [1, 1], a = null, s = es, h = !1, u, i = "squarify", e = .5 * (1 + Math.sqrt(5)); return t.size = function (n) { return arguments.length ? (f = n, t) : f }, t.padding = function (n) { function u(i) { var r = n.call(t, i, i.depth); return r == null ? es(i) : av(i, typeof r == "number" ? [r, r, r, r] : r) } function i(t) { return av(t, n) } if (!arguments.length) return a; var r; return s = (a = n) == null ? es : (r = typeof n) == "function" ? u : r === "number" ? (n = [n, n, n, n], i) : i, t }, t.round = function (n) { return arguments.length ? (r = n ? Math.round : Number, t) : r != Number }, t.sticky = function (n) { return arguments.length ? (h = n, u = null, t) : h }, t.ratio = function (n) { return arguments.length ? (e = n, t) : e }, t.mode = function (n) { return arguments.length ? (i = n + "", t) : i }, tr(t, o) }; n.random = { normal: function (n, t) { var i = arguments.length; return i < 2 && (t = 1), i < 1 && (n = 0), function () { var r, u, i; do r = Math.random() * 2 - 1, u = Math.random() * 2 - 1, i = r * r + u * u; while (!i || i > 1); return n + t * r * Math.sqrt(-2 * Math.log(i) / i) } }, logNormal: function () { var t = n.random.normal.apply(n, arguments); return function () { return Math.exp(t()) } }, irwinHall: function (n) { return function () { for (var t = 0, i = 0; i < n; i++) t += Math.random(); return t / n } } }; n.scale = {}; n.scale.linear = function () { return vv([0, 1], [0, 1], nr, !1) }; n.scale.log = function () { return bv(n.scale.linear().domain([0, Math.LN10]), 10, dv, gv) }; kv = n.format(".0e"); n.scale.pow = function () { return ny(n.scale.linear(), 1) }; n.scale.sqrt = function () { return n.scale.pow().exponent(.5) }; n.scale.ordinal = function () { return ty([], { t: "range", a: [[]] }) }; n.scale.category10 = function () { return n.scale.ordinal().range(sg) }; n.scale.category20 = function () { return n.scale.ordinal().range(hg) }; n.scale.category20b = function () { return n.scale.ordinal().range(cg) }; n.scale.category20c = function () { return n.scale.ordinal().range(lg) }; var sg = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"], hg = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c", "#98df8a", "#d62728", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b", "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7", "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"], cg = ["#393b79", "#5254a3", "#6b6ecf", "#9c9ede", "#637939", "#8ca252", "#b5cf6b", "#cedb9c", "#8c6d31", "#bd9e39", "#e7ba52", "#e7cb94", "#843c39", "#ad494a", "#d6616b", "#e7969c", "#7b4173", "#a55194", "#ce6dbd", "#de9ed6"], lg = ["#3182bd", "#6baed6", "#9ecae1", "#c6dbef", "#e6550d", "#fd8d3c", "#fdae6b", "#fdd0a2", "#31a354", "#74c476", "#a1d99b", "#c7e9c0", "#756bb1", "#9e9ac8", "#bcbddc", "#dadaeb", "#636363", "#969696", "#bdbdbd", "#d9d9d9"]; n.scale.quantile = function () { return iy([], []) }; n.scale.quantize = function () { return ry(0, 1, [0, 1]) }; n.scale.threshold = function () { return uy([.5], [0, 1]) }; n.scale.identity = function () { return fy([0, 1]) }; n.svg.arc = function () { function n() { var f = i.apply(this, arguments), n = r.apply(this, arguments), o = u.apply(this, arguments) + gt, s = e.apply(this, arguments) + gt, h = (s < o && (h = o, o = s, s = h), s - o), c = h < t ? "0" : "1", l = Math.cos(o), a = Math.sin(o), v = Math.cos(s), y = Math.sin(s); return h >= ey ? f ? "M0," + n + "A" + n + "," + n + " 0 1,1 0," + -n + "A" + n + "," + n + " 0 1,1 0," + n + "M0," + f + "A" + f + "," + f + " 0 1,0 0," + -f + "A" + f + "," + f + " 0 1,0 0," + f + "Z" : "M0," + n + "A" + n + "," + n + " 0 1,1 0," + -n + "A" + n + "," + n + " 0 1,1 0," + n + "Z" : f ? "M" + n * l + "," + n * a + "A" + n + "," + n + " 0 " + c + ",1 " + n * v + "," + n * y + "L" + f * v + "," + f * y + "A" + f + "," + f + " 0 " + c + ",0 " + f * l + "," + f * a + "Z" : "M" + n * l + "," + n * a + "A" + n + "," + n + " 0 " + c + ",1 " + n * v + "," + n * y + "L0,0Z" } var i = ag, r = vg, u = oy, e = sy; return n.innerRadius = function (t) { return arguments.length ? (i = f(t), n) : i }, n.outerRadius = function (t) { return arguments.length ? (r = f(t), n) : r }, n.startAngle = function (t) { return arguments.length ? (u = f(t), n) : u }, n.endAngle = function (t) { return arguments.length ? (e = f(t), n) : e }, n.centroid = function () { var n = (i.apply(this, arguments) + r.apply(this, arguments)) / 2, t = (u.apply(this, arguments) + e.apply(this, arguments)) / 2 + gt; return [Math.cos(t) * n, Math.sin(t) * n] }, n }; gt = -t / 2; ey = 2 * t - 1e-6; n.svg.line.radial = function () { var n = na(hy); return n.radius = n.x, delete n.x, n.angle = n.y, delete n.y, n }; ao.reverse = vo; vo.reverse = ao; n.svg.area = function () { return cy(d) }; n.svg.area.radial = function () { var n = cy(hy); return n.radius = n.x, delete n.x, n.innerRadius = n.x0, delete n.x0, n.outerRadius = n.x1, delete n.x1, n.angle = n.y, delete n.y, n.startAngle = n.y0, delete n.y0, n.endAngle = n.y1, delete n.y1, n }; n.svg.chord = function () { function n(n, t) { var u = h(this, i, n, t), f = h(this, r, n, t); return "M" + u.p0 + c(u.r, u.p1, u.a1 - u.a0) + (l(u, f) ? s(u.r, u.p1, u.r, u.p0) : s(u.r, u.p1, f.r, f.p0) + c(f.r, f.p1, f.a1 - f.a0) + s(f.r, f.p1, u.r, u.p0)) + "Z" } function h(n, t, i, r) { var s = t.call(n, i, r), f = u.call(n, s, r), h = e.call(n, s, r) + gt, c = o.call(n, s, r) + gt; return { r: f, a0: h, a1: c, p0: [f * Math.cos(h), f * Math.sin(h)], p1: [f * Math.cos(c), f * Math.sin(c)] } } function l(n, t) { return n.a0 == t.a0 && n.a1 == t.a1 } function c(n, i, r) { return "A" + n + "," + n + " 0 " + +(r > t) + ",1 " + i } function s(n, t, i, r) { return "Q 0,0 " + r } var i = de, r = ge, u = yg, e = oy, o = sy; return n.radius = function (t) { return arguments.length ? (u = f(t), n) : u }, n.source = function (t) { return arguments.length ? (i = f(t), n) : i }, n.target = function (t) { return arguments.length ? (r = f(t), n) : r }, n.startAngle = function (t) { return arguments.length ? (e = f(t), n) : e }, n.endAngle = function (t) { return arguments.length ? (o = f(t), n) : o }, n }; n.svg.diagonal = function () { function n(n, u) { var e = t.call(this, n, u), o = i.call(this, n, u), s = (e.y + o.y) / 2, f = [e, { x: e.x, y: s }, { x: o.x, y: s }, o]; return f = f.map(r), "M" + f[0] + "C" + f[1] + " " + f[2] + " " + f[3] } var t = de, i = ge, r = ly; return n.source = function (i) { return arguments.length ? (t = f(i), n) : t }, n.target = function (t) { return arguments.length ? (i = f(t), n) : i }, n.projection = function (t) { return arguments.length ? (r = t, n) : r }, n }; n.svg.diagonal.radial = function () { var t = n.svg.diagonal(), i = ly, r = t.projection; return t.projection = function (n) { return arguments.length ? r(pg(i = n)) : i }, t }; n.svg.symbol = function () { function n(n, r) { return (cs.get(t.call(this, n, r)) || ay)(i.call(this, n, r)) } var t = bg, i = wg; return n.type = function (i) { return arguments.length ? (t = f(i), n) : t }, n.size = function (t) { return arguments.length ? (i = f(t), n) : i }, n }; cs = n.map({ circle: ay, cross: function (n) { var t = Math.sqrt(n / 5) / 2; return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z" }, diamond: function (n) { var t = Math.sqrt(n / (2 * ls)), i = t * ls; return "M0," + -t + "L" + i + ",0 0," + t + " " + -i + ",0Z" }, square: function (n) { var t = Math.sqrt(n) / 2; return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z" }, "triangle-down": function (n) { var t = Math.sqrt(n / rr), i = t * rr / 2; return "M0," + i + "L" + t + "," + -i + " " + -t + "," + -i + "Z" }, "triangle-up": function (n) { var t = Math.sqrt(n / rr), i = t * rr / 2; return "M0," + -i + "L" + t + "," + i + " " + -t + "," + i + "Z" } }); n.svg.symbolTypes = cs.keys(); rr = Math.sqrt(3); ls = Math.tan(30 * i); var s = [], vy = 0, fr, bu = { ease: uk, delay: 0, duration: 250 }; s.call = u.call; s.empty = u.empty; s.node = u.node; n.transition = function (n) { return arguments.length ? fr ? n.transition() : n : ui.transition() }; n.transition.prototype = s; s.select = function (n) { var u = this.id, o = [], f, i, t, e, s; for (typeof n != "function" && (n = af(n)), e = -1, s = this.length; ++e < s;) { o.push(f = []); for (var h = this[e], r = -1, c = h.length; ++r < c;) (t = h[r]) && (i = n.call(t, t.__data__, r)) ? ("__data__" in t && (i.__data__ = t.__data__), ku(i, r, u, t.__transition__[u]), f.push(i)) : f.push(null) } return ur(o, u) }; s.selectAll = function (n) { var r = this.id, o = [], s, u, t, h, c, f, l, i, v; for (typeof n != "function" && (n = lh(n)), f = -1, l = this.length; ++f < l;) for (var a = this[f], e = -1, y = a.length; ++e < y;) if (t = a[e]) for (c = t.__transition__[r], u = n.call(t, t.__data__, e), o.push(s = []), i = -1, v = u.length; ++i < v;) ku(h = u[i], i, r, c), s.push(h); return ur(o, r) }; s.filter = function (n) { var u = [], f, e, t, i, o; for (typeof n != "function" && (n = dh(n)), i = 0, o = this.length; i < o; i++) { u.push(f = []); for (var e = this[i], r = 0, s = e.length; r < s; r++) (t = e[r]) && n.call(t, t.__data__, r) && f.push(t) } return ur(u, this.id, this.time).ease(this.ease()) }; s.tween = function (n, t) { var i = this.id; return arguments.length < 2 ? this.node().__transition__[i].tween.get(n) : bt(this, t == null ? function (t) { t.__transition__[i].tween.remove(n) } : function (r) { r.__transition__[i].tween.set(n, t) }) }; s.attr = function (t, i) { function f() { this.removeAttribute(r) } function e() { this.removeAttributeNS(r.space, r.local) } if (arguments.length < 2) { for (i in t) this.attr(i, t[i]); return this } var u = go(t), r = n.ns.qualify(t); return as(this, "attr." + t, i, function (n) { function t() { var t = this.getAttribute(r), i; return t !== n && (i = u(t, n), function (n) { this.setAttribute(r, i(n)) }) } function i() { var t = this.getAttributeNS(r.space, r.local), i; return t !== n && (i = u(t, n), function (n) { this.setAttributeNS(r.space, r.local, i(n)) }) } return n == null ? r.local ? e : f : (n += "", r.local ? i : t) }) }; s.attrTween = function (t, i) { function u(n, t) { var u = i.call(this, n, t, this.getAttribute(r)); return u && function (n) { this.setAttribute(r, u(n)) } } function f(n, t) { var u = i.call(this, n, t, this.getAttributeNS(r.space, r.local)); return u && function (n) { this.setAttributeNS(r.space, r.local, u(n)) } } var r = n.ns.qualify(t); return this.tween("attr." + t, r.local ? f : u) }; s.style = function (n, t, i) { function f() { this.style.removeProperty(n) } var r = arguments.length, u; if (r < 3) { if (typeof n != "string") { r < 2 && (t = ""); for (i in n) this.style(i, n[i], t); return this } i = "" } return u = go(n), as(this, "style." + n, t, function (t) { function r() { var r = c.getComputedStyle(this, null).getPropertyValue(n), f; return r !== t && (f = u(r, t), function (t) { this.style.setProperty(n, f(t), i) }) } return t == null ? f : (t += "", r) }) }; s.styleTween = function (n, t, i) { return arguments.length < 3 && (i = ""), this.tween("style." + n, function (r, u) { var f = t.call(this, r, u, c.getComputedStyle(this, null).getPropertyValue(n)); return f && function (t) { this.style.setProperty(n, f(t), i) } }) }; s.text = function (n) { return as(this, "text", n, kg) }; s.remove = function () { return this.each("end.transition", function () { var n; !this.__transition__ && (n = this.parentNode) && n.removeChild(this) }) }; s.ease = function (t) { var i = this.id; return arguments.length < 1 ? this.node().__transition__[i].ease : (typeof t != "function" && (t = n.ease.apply(n, arguments)), bt(this, function (n) { n.__transition__[i].ease = t })) }; s.delay = function (n) { var t = this.id; return bt(this, typeof n == "function" ? function (i, r, u) { i.__transition__[t].delay = n.call(i, i.__data__, r, u) | 0 } : (n |= 0, function (i) { i.__transition__[t].delay = n })) }; s.duration = function (n) { var t = this.id; return bt(this, typeof n == "function" ? function (i, r, u) { i.__transition__[t].duration = Math.max(1, n.call(i, i.__data__, r, u) | 0) } : (n = Math.max(1, n | 0), function (i) { i.__transition__[t].duration = n })) }; s.each = function (n, t) { var i = this.id, r, u; return arguments.length < 2 ? (r = bu, u = fr, fr = i, bt(this, function (t, r, u) { bu = t.__transition__[i]; n.call(t, t.__data__, r, u) }), bu = r, fr = u) : bt(this, function (r) { r.__transition__[i].event.on(n, t) }), this }; s.transition = function () { for (var s = this.id, u = ++vy, f = [], e, o, n, t, r = 0, h = this.length; r < h; r++) { f.push(e = []); for (var o = this[r], i = 0, c = o.length; i < c; i++) (n = o[i]) && (t = Object.create(n.__transition__[s]), t.delay += t.duration, ku(n, i, u, t)), e.push(n) } return ur(f, u) }; n.svg.axis = function () { function i(i) { i.each(function () { var ut = n.select(this), ot = s == null ? r.ticks ? r.ticks.apply(r, o) : r.domain() : s, lt = h == null ? r.tickFormat ? r.tickFormat.apply(r, o) : String : h, at = dg(r, ot, l), ft = ut.selectAll(".tick.minor").data(at, String), p = ft.enter().insert("line", ".tick").attr("class", "tick minor").style("opacity", 1e-6), vt = n.transition(ft.exit()).style("opacity", 1e-6).remove(), w = n.transition(ft).style("opacity", 1), b = ut.selectAll(".tick.major").data(ot, String), y = b.enter().insert("g", "path").attr("class", "tick major").style("opacity", 1e-6), yt = n.transition(b.exit()).style("opacity", 1e-6).remove(), k = n.transition(b).style("opacity", 1), i, a = yu(r), st = ut.selectAll(".domain").data([0]), d = (st.enter().append("path").attr("class", "domain"), n.transition(st)), v = r.copy(), ht = this.__chart__ || v, ct, et; this.__chart__ = v; y.append("line"); y.append("text"); var g = y.select("line"), nt = k.select("line"), tt = b.select("text").text(lt), it = y.select("text"), rt = k.select("text"); switch (c) { case "bottom": i = py; p.attr("y2", f); w.attr("x2", 0).attr("y2", f); g.attr("y2", t); it.attr("y", Math.max(t, 0) + u); nt.attr("x2", 0).attr("y2", t); rt.attr("x", 0).attr("y", Math.max(t, 0) + u); tt.attr("dy", ".71em").style("text-anchor", "middle"); d.attr("d", "M" + a[0] + "," + e + "V0H" + a[1] + "V" + e); break; case "top": i = py; p.attr("y2", -f); w.attr("x2", 0).attr("y2", -f); g.attr("y2", -t); it.attr("y", -(Math.max(t, 0) + u)); nt.attr("x2", 0).attr("y2", -t); rt.attr("x", 0).attr("y", -(Math.max(t, 0) + u)); tt.attr("dy", "0em").style("text-anchor", "middle"); d.attr("d", "M" + a[0] + "," + -e + "V0H" + a[1] + "V" + -e); break; case "left": i = wy; p.attr("x2", -f); w.attr("x2", -f).attr("y2", 0); g.attr("x2", -t); it.attr("x", -(Math.max(t, 0) + u)); nt.attr("x2", -t).attr("y2", 0); rt.attr("x", -(Math.max(t, 0) + u)).attr("y", 0); tt.attr("dy", ".32em").style("text-anchor", "end"); d.attr("d", "M" + -e + "," + a[0] + "H0V" + a[1] + "H" + -e); break; case "right": i = wy; p.attr("x2", f); w.attr("x2", f).attr("y2", 0); g.attr("x2", t); it.attr("x", Math.max(t, 0) + u); nt.attr("x2", t).attr("y2", 0); rt.attr("x", Math.max(t, 0) + u).attr("y", 0); tt.attr("dy", ".32em").style("text-anchor", "start"); d.attr("d", "M" + e + "," + a[0] + "H0V" + a[1] + "H" + e) } r.ticks ? (y.call(i, ht), k.call(i, v), yt.call(i, v), p.call(i, ht), w.call(i, v), vt.call(i, v)) : (ct = v.rangeBand() / 2, et = function (n) { return v(n) + ct }, y.call(i, et), k.call(i, et)) }) } var r = n.scale.linear(), c = vs, t = 6, f = 6, e = 6, u = 3, o = [10], s = null, h, l = 0; return i.scale = function (n) { return arguments.length ? (r = n, i) : r }, i.orient = function (n) { return arguments.length ? (c = n in yy ? n + "" : vs, i) : c }, i.ticks = function () { return arguments.length ? (o = arguments, i) : o }, i.tickValues = function (n) { return arguments.length ? (s = n, i) : s }, i.tickFormat = function (n) { return arguments.length ? (h = n, i) : h }, i.tickSize = function (n, r) { if (!arguments.length) return t; var u = arguments.length - 1; return t = +n, f = u > 1 ? +r : t, e = u > 0 ? +arguments[u] : t, i }, i.tickPadding = function (n) { return arguments.length ? (u = +n, i) : u }, i.tickSubdivide = function (n) { return arguments.length ? (l = +n, i) : l }, i }; vs = "bottom"; yy = { top: 1, right: 1, bottom: 1, left: 1 }; n.svg.brush = function () { function u(t) { t.each(function () { var f = n.select(this), o = f.selectAll(".background").data([0]), v = f.selectAll(".extent").data([0]), c = f.selectAll(".resize").data(e, String), t; f.style("pointer-events", "all").on("mousedown.brush", a).on("touchstart.brush", a); o.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"); v.enter().append("rect").attr("class", "extent").style("cursor", "move"); c.enter().append("g").attr("class", function (n) { return "resize " + n }).style("cursor", function (n) { return by[n] }).append("rect").attr("x", function (n) { return /[ew]$/.test(n) ? -3 : null }).attr("y", function (n) { return /^[ns]/.test(n) ? -3 : null }).attr("width", 6).attr("height", 6).style("visibility", "hidden"); c.style("display", u.empty() ? "none" : null); c.exit().remove(); i && (t = yu(i), o.attr("x", t[0]).attr("width", t[1] - t[0]), h(f)); r && (t = yu(r), o.attr("y", t[0]).attr("height", t[1] - t[0]), l(f)); s(f) }) } function s(n) { n.selectAll(".resize").attr("transform", function (n) { return "translate(" + t[+/e$/.test(n)][0] + "," + t[+/^s/.test(n)][1] + ")" }) } function h(n) { n.select(".extent").attr("x", t[0][0]); n.selectAll(".extent,.n>rect,.s>rect").attr("width", t[1][0] - t[0][0]) } function l(n) { n.select(".extent").attr("y", t[0][1]); n.selectAll(".extent,.e>rect,.w>rect").attr("height", t[1][1] - t[0][1]) } function a() { function rt() { var t = n.event.changedTouches; return t ? n.touches(w, t)[0] : n.mouse(w) } function ht() { n.event.keyCode == 32 && (a || (v = null, e[0] -= t[1][0], e[1] -= t[1][1], a = 2), it()) } function ct() { n.event.keyCode == 32 && a == 2 && (e[0] += t[1][0], e[1] += t[1][1], a = 0, it()) } function k() { var u = rt(), f = !1; b && (u[0] += b[0], u[1] += b[1]); a || (n.event.altKey ? (v || (v = [(t[0][0] + t[1][0]) / 2, (t[0][1] + t[1][1]) / 2]), e[0] = t[+(u[0] < v[0])][0], e[1] = t[+(u[1] < v[1])][1]) : v = null); et && ut(u, i, 0) && (h(y), f = !0); ot && ut(u, r, 1) && (l(y), f = !0); f && (s(y), g({ type: "brush", mode: a ? "move" : "resize" })) } function ut(n, i, r) { var l = yu(i), h = l[0], c = l[1], o = e[r], y = t[1][r] - t[0][r], u, s; return a && (h -= o, c -= y + o), u = Math.max(h, Math.min(c, n[r])), a ? s = (u += o) + y : (v && (o = Math.max(h, Math.min(c, 2 * v[r] - u))), o < u ? (s = u, u = o) : s = o), t[0][r] !== u || t[1][r] !== s ? (f = null, t[0][r] = u, t[1][r] = s, !0) : void 0 } function ft() { k(); y.style("pointer-events", "all").selectAll(".resize").style("display", u.empty() ? "none" : null); n.select("body").style("cursor", null); st.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null); g({ type: "brushend" }); it() } var w = this, d = n.select(n.event.target), g = o.of(w, arguments), y = n.select(w), p = d.datum(), et = !/^(n|s)$/.test(p) && i, ot = !/^(e|w)$/.test(p) && r, a = d.classed("extent"), v, e = rt(), b, st = n.select(c).on("mousemove.brush", k).on("mouseup.brush", ft).on("touchmove.brush", k).on("touchend.brush", ft).on("keydown.brush", ht).on("keyup.brush", ct), nt, tt; a ? (e[0] = t[0][0] - e[0], e[1] = t[0][1] - e[1]) : p ? (nt = +/w$/.test(p), tt = +/^n/.test(p), b = [t[1 - nt][0] - e[0], t[1 - tt][1] - e[1]], e[0] = t[nt][0], e[1] = t[tt][1]) : n.event.altKey && (v = e.slice()); y.style("pointer-events", "none").selectAll(".resize").style("display", null); n.select("body").style("cursor", d.style("cursor")); g({ type: "brushstart" }); k(); it() } var o = lf(u, "brushstart", "brush", "brushend"), i = null, r = null, e = du[0], t = [[0, 0], [0, 0]], f; return u.x = function (n) { return arguments.length ? (i = n, e = du[!i << 1 | !r], u) : i }, u.y = function (n) { return arguments.length ? (r = n, e = du[!i << 1 | !r], u) : r }, u.extent = function (n) { var e, o, s, h, c; return arguments.length ? (f = [[0, 0], [0, 0]], i && (e = n[0], o = n[1], r && (e = e[0], o = o[0]), f[0][0] = e, f[1][0] = o, i.invert && (e = i(e), o = i(o)), o < e && (c = e, e = o, o = c), t[0][0] = e | 0, t[1][0] = o | 0), r && (s = n[0], h = n[1], i && (s = s[1], h = h[1]), f[0][1] = s, f[1][1] = h, r.invert && (s = r(s), h = r(h)), h < s && (c = s, s = h, h = c), t[0][1] = s | 0, t[1][1] = h | 0), u) : (n = f || t, i && (e = n[0][0], o = n[1][0], f || (e = t[0][0], o = t[1][0], i.invert && (e = i.invert(e), o = i.invert(o)), o < e && (c = e, e = o, o = c))), r && (s = n[0][1], h = n[1][1], f || (s = t[0][1], h = t[1][1], r.invert && (s = r.invert(s), h = r.invert(h)), h < s && (c = s, s = h, h = c))), i && r ? [[e, s], [o, h]] : i ? [e, o] : r && [s, h]) }, u.clear = function () { return f = null, t[0][0] = t[0][1] = t[1][0] = t[1][1] = 0, u }, u.empty = function () { return i && t[0][0] === t[1][0] || r && t[0][1] === t[1][1] }, n.rebind(u, o, "on") }; by = { n: "ns-resize", e: "ew-resize", s: "ns-resize", w: "ew-resize", nw: "nwse-resize", ne: "nesw-resize", se: "nwse-resize", sw: "nesw-resize" }; du = [["n", "e", "s", "w", "nw", "ne", "se", "sw"], ["e", "w"], ["n", "s"], []]; n.time = {}; y = Date; ky = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; ti.prototype = { getDate: function () { return this._.getUTCDate() }, getDay: function () { return this._.getUTCDay() }, getFullYear: function () { return this._.getUTCFullYear() }, getHours: function () { return this._.getUTCHours() }, getMilliseconds: function () { return this._.getUTCMilliseconds() }, getMinutes: function () { return this._.getUTCMinutes() }, getMonth: function () { return this._.getUTCMonth() }, getSeconds: function () { return this._.getUTCSeconds() }, getTime: function () { return this._.getTime() }, getTimezoneOffset: function () { return 0 }, valueOf: function () { return this._.valueOf() }, setDate: function () { wt.setUTCDate.apply(this._, arguments) }, setDay: function () { wt.setUTCDay.apply(this._, arguments) }, setFullYear: function () { wt.setUTCFullYear.apply(this._, arguments) }, setHours: function () { wt.setUTCHours.apply(this._, arguments) }, setMilliseconds: function () { wt.setUTCMilliseconds.apply(this._, arguments) }, setMinutes: function () { wt.setUTCMinutes.apply(this._, arguments) }, setMonth: function () { wt.setUTCMonth.apply(this._, arguments) }, setSeconds: function () { wt.setUTCSeconds.apply(this._, arguments) }, setTime: function () { wt.setTime.apply(this._, arguments) } }; var wt = Date.prototype, dy = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], gy = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ys = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], ps = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; n.time.year = ii(function (t) { return t = n.time.day(t), t.setMonth(0, 1), t }, function (n, t) { n.setFullYear(n.getFullYear() + t) }, function (n) { return n.getFullYear() }); n.time.years = n.time.year.range; n.time.years.utc = n.time.year.utc.range; n.time.day = ii(function (n) { var t = new y(1970, 0); return t.setFullYear(n.getFullYear(), n.getMonth(), n.getDate()), t }, function (n, t) { n.setDate(n.getDate() + t) }, function (n) { return n.getDate() - 1 }); n.time.days = n.time.day.range; n.time.days.utc = n.time.day.utc.range; n.time.dayOfYear = function (t) { var i = n.time.year(t); return Math.floor((t - i - (t.getTimezoneOffset() - i.getTimezoneOffset()) * 6e4) / 864e5) }; ky.forEach(function (t, i) { t = t.toLowerCase(); i = 7 - i; var r = n.time[t] = ii(function (t) { return (t = n.time.day(t)).setDate(t.getDate() - (t.getDay() + i) % 7), t }, function (n, t) { n.setDate(n.getDate() + Math.floor(t) * 7) }, function (t) { var r = n.time.year(t).getDay(); return Math.floor((n.time.dayOfYear(t) + (r + i) % 7) / 7) - (r !== i) }); n.time[t + "s"] = r.range; n.time[t + "s"].utc = r.utc.range; n.time[t + "OfYear"] = function (t) { var r = n.time.year(t).getDay(); return Math.floor((n.time.dayOfYear(t) + (r + i) % 7) / 7) } }); n.time.week = n.time.sunday; n.time.weeks = n.time.sunday.range; n.time.weeks.utc = n.time.sunday.utc.range; n.time.weekOfYear = n.time.sundayOfYear; n.time.format = function (n) { function t(t) { for (var f = [], r = -1, e = 0, u, o, s; ++r < i;) n.charCodeAt(r) === 37 && (f.push(n.substring(e, r)), (o = tn[u = n.charAt(++r)]) != null && (u = n.charAt(++r)), (s = rf[u]) && (u = s(t, o == null ? u === "e" ? " " : "0" : o)), f.push(u), e = r + 1); return f.push(n.substring(e, r)), f.join("") } var i = n.length; return t.parse = function (t) { var i = { y: 1900, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0 }, u = nf(i, n, t, 0), r; return u != t.length ? null : ("p" in i && (i.H = i.H % 12 + i.p * 12), r = new y, r.setFullYear(i.y, i.m, i.d), r.setHours(i.H, i.M, i.S, i.L), r) }, t.toString = function () { return n }, t }; var tp = tf(dy), ip = tf(gy), rp = tf(ys), gg = np(ys), up = tf(ps), nn = np(ps), tn = { "-": "", _: " ", "0": "0" }, rf = { a: function (n) { return gy[n.getDay()] }, A: function (n) { return dy[n.getDay()] }, b: function (n) { return ps[n.getMonth()] }, B: function (n) { return ys[n.getMonth()] }, c: n.time.format("%a %b %e %X %Y"), d: function (n, t) { return k(n.getDate(), t, 2) }, e: function (n, t) { return k(n.getDate(), t, 2) }, H: function (n, t) { return k(n.getHours(), t, 2) }, I: function (n, t) { return k(n.getHours() % 12 || 12, t, 2) }, j: function (t, i) { return k(1 + n.time.dayOfYear(t), i, 3) }, L: function (n, t) { return k(n.getMilliseconds(), t, 3) }, m: function (n, t) { return k(n.getMonth() + 1, t, 2) }, M: function (n, t) { return k(n.getMinutes(), t, 2) }, p: function (n) { return n.getHours() >= 12 ? "PM" : "AM" }, S: function (n, t) { return k(n.getSeconds(), t, 2) }, U: function (t, i) { return k(n.time.sundayOfYear(t), i, 2) }, w: function (n) { return n.getDay() }, W: function (t, i) { return k(n.time.mondayOfYear(t), i, 2) }, x: n.time.format("%m/%d/%Y"), X: n.time.format("%H:%M:%S"), y: function (n, t) { return k(n.getFullYear() % 100, t, 2) }, Y: function (n, t) { return k(n.getFullYear() % 1e4, t, 4) }, Z: dn, "%": function () { return "%" } }, rn = { a: un, A: fn, b: en, B: on, c: sn, d: fp, e: fp, H: ep, I: ep, L: bn, m: yn, M: pn, p: kn, S: wn, x: hn, X: cn, y: an, Y: ln }; p = /^\s*\d+/; op = n.map({ am: 0, pm: 1 }); n.time.format.utc = function (t) { function r(n) { try { y = ti; var t = new y; return t._ = n, i(t) } finally { y = Date } } var i = n.time.format(t); return r.parse = function (n) { try { y = ti; var t = i.parse(n); return t && t._ } finally { y = Date } }, r.toString = i.toString, r }; ws = n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ"); n.time.format.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? bs : ws; bs.parse = function (n) { var t = new Date(n); return isNaN(t) ? null : t }; bs.toString = ws.toString; n.time.second = ii(function (n) { return new y(Math.floor(n / 1e3) * 1e3) }, function (n, t) { n.setTime(n.getTime() + Math.floor(t) * 1e3) }, function (n) { return n.getSeconds() }); n.time.seconds = n.time.second.range; n.time.seconds.utc = n.time.second.utc.range; n.time.minute = ii(function (n) { return new y(Math.floor(n / 6e4) * 6e4) }, function (n, t) { n.setTime(n.getTime() + Math.floor(t) * 6e4) }, function (n) { return n.getMinutes() }); n.time.minutes = n.time.minute.range; n.time.minutes.utc = n.time.minute.utc.range; n.time.hour = ii(function (n) { var t = n.getTimezoneOffset() / 60; return new y((Math.floor(n / 36e5 - t) + t) * 36e5) }, function (n, t) { n.setTime(n.getTime() + Math.floor(t) * 36e5) }, function (n) { return n.getHours() }); n.time.hours = n.time.hour.range; n.time.hours.utc = n.time.hour.utc.range; n.time.month = ii(function (t) { return t = n.time.day(t), t.setDate(1), t }, function (n, t) { n.setMonth(n.getMonth() + t) }, function (n) { return n.getMonth() }); n.time.months = n.time.month.range; n.time.months.utc = n.time.month.utc.range; var uf = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6], nh = [[n.time.second, 1], [n.time.second, 5], [n.time.second, 15], [n.time.second, 30], [n.time.minute, 1], [n.time.minute, 5], [n.time.minute, 15], [n.time.minute, 30], [n.time.hour, 1], [n.time.hour, 3], [n.time.hour, 6], [n.time.hour, 12], [n.time.day, 1], [n.time.day, 2], [n.time.week, 1], [n.time.month, 1], [n.time.month, 3], [n.time.year, 1]], ttt = [[n.time.format("%Y"), yi], [n.time.format("%B"), function (n) { return n.getMonth() }], [n.time.format("%b %d"), function (n) { return n.getDate() != 1 }], [n.time.format("%a %d"), function (n) { return n.getDay() && n.getDate() != 1 }], [n.time.format("%I %p"), function (n) { return n.getHours() }], [n.time.format("%I:%M"), function (n) { return n.getMinutes() }], [n.time.format(":%S"), function (n) { return n.getSeconds() }], [n.time.format(".%L"), function (n) { return n.getMilliseconds() }]], hp = n.scale.linear(), itt = sp(ttt); nh.year = function (n, t) { return hp.domain(n.map(ntt)).ticks(t).map(gs) }; n.time.scale = function () { return ks(n.scale.linear(), nh, itt) }; var cp = nh.map(function (n) { return [n[0].utc, n[1]] }), rtt = [[n.time.format.utc("%Y"), yi], [n.time.format.utc("%B"), function (n) { return n.getUTCMonth() }], [n.time.format.utc("%b %d"), function (n) { return n.getUTCDate() != 1 }], [n.time.format.utc("%a %d"), function (n) { return n.getUTCDay() && n.getUTCDate() != 1 }], [n.time.format.utc("%I %p"), function (n) { return n.getUTCHours() }], [n.time.format.utc("%I:%M"), function (n) { return n.getUTCMinutes() }], [n.time.format.utc(":%S"), function (n) { return n.getUTCSeconds() }], [n.time.format.utc(".%L"), function (n) { return n.getUTCMilliseconds() }]], utt = sp(rtt); return cp.year = function (n, t) { return hp.domain(n.map(ftt)).ticks(t).map(th) }, n.time.scale.utc = function () { return ks(n.scale.linear(), cp, utt) }, n.text = function () { return n.xhr.apply(n, arguments).response(ett) }, n.json = function (t, i) { return n.xhr(t, "application/json", i).response(ott) }, n.html = function (t, i) { return n.xhr(t, "text/html", i).response(stt) }, n.xml = function () { return n.xhr.apply(n, arguments).response(htt) }, n }();
//# sourceMappingURL=d3.v3.min.js.map