(function () { function i(n) { return n[0] } function r(n) { return n[1] } function u(n, t, i) { return i == "offset" ? function (i) { return "translate(0," + (i + (i < 0) - n) * t + ")" } : function (i) { return (i < 0 ? "scale(1,-1)" : "") + "translate(0," + (i - n) * t + ")" } } d3.horizon = function () { function f(i) { i.each(function (i) { var w = d3.select(this), ot = 2 * e + 1, b = Infinity, k = -Infinity, r = -Infinity, d, g, f, ut = i.map(function (n, t) { var i = v.call(this, n, t), u = y.call(this, n, t); return i < b && (b = i), i > k && (k = i), -u > r && (r = -u), u > r && (r = u), [i, u] }), nt = d3.scale.linear().domain([b, k]).range([0, s]), tt = d3.scale.linear().domain([0, r]).range([0, o * e]), p = u(e, o, l), it; this.__chart__ ? (d = this.__chart__.x, g = this.__chart__.y, t0 = this.__chart__.t, f = this.__chart__.id) : (d = nt.copy(), g = tt.copy(), t0 = p, f = ++t); it = w.selectAll("defs").data([null]); it.enter().append("defs").append("clipPath").attr("id", "d3_horizon_clip" + f).append("rect").attr("width", s).attr("height", o); it.select("rect").transition().duration(h).attr("width", s).attr("height", o); w.selectAll("g").data([null]).enter().append("g").attr("clip-path", "url(#d3_horizon_clip" + f + ")"); var rt = w.select("g").selectAll("path").data(d3.range(-1, -e - 1, -1).concat(d3.range(1, e + 1)), Number), et = n.interpolate(a).x(function (n) { return d(n[0]) }).y0(o * e).y1(function (n) { return o * e - g(n[1]) })(ut), ft = n.x(function (n) { return nt(n[0]) }).y1(function (n) { return o * e - tt(n[1]) })(ut); rt.enter().append("path").style("fill", c).attr("transform", t0).attr("d", et); rt.transition().duration(h).style("fill", c).attr("transform", p).attr("d", ft); rt.exit().transition().duration(h).attr("transform", p).attr("d", ft).remove(); this.__chart__ = { x: nt, y: tt, t: p, id: f } }); d3.timer.flush() } var e = 1, l = "offset", a = "linear", v = i, y = r, s = 960, o = 40, h = 0, c = d3.scale.linear().domain([-1, 0, 1]).range(["#d62728", "#fff", "#1f77b4"]); return f.duration = function (n) { return arguments.length ? (h = +n, f) : h }, f.bands = function (n) { return arguments.length ? (e = +n, c.domain([-e, 0, e]), f) : e }, f.mode = function (n) { return arguments.length ? (l = n + "", f) : l }, f.colors = function (n) { return arguments.length ? (c.range(n), f) : c.range() }, f.interpolate = function (n) { return arguments.length ? (a = n + "", f) : a }, f.x = function (n) { return arguments.length ? (v = n, f) : v }, f.y = function (n) { return arguments.length ? (y = n, f) : y }, f.width = function (n) { return arguments.length ? (s = +n, f) : s }, f.height = function (n) { return arguments.length ? (o = +n, f) : o }, f }; var n = d3.svg.area(), t = 0 })();
//# sourceMappingURL=horizon.min.js.map