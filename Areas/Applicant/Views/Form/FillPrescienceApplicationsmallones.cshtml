@using Abundance_Nk.Web.Models
@model Abundance_Nk.Web.Areas.Applicant.ViewModels.PostJambViewModel

@{
    ViewBag.Title = "Post JAMB Invoice";
}


<script src="~/Scripts/jquery-1.11.1.min.js"></script>
<link href="~/Scripts/DropZone/dropzone.css" rel="stylesheet" />
<script src="~/Scripts/DropZone/dropzone.js"></script>
<div>

    <script type="text/javascript">

        var personId;
        var formNumber;
        var personImageUrl;
        var hasPassport;
        $(document).ready(function () {

            formNumber = $("#ApplicationForm_Number").val();
            hasPassport = $("#HasJambPassport").val();
            $('#loading').hide();

            if (formNumber != null) {
                $('#submitBtn').show();
            }
            if (hasPassport>0) {
                $('#submitBtn').show();
            }

            var navListItems = $('ul.setup-panel li a'),
                allWells = $('.setup-content');
            allWells.hide();

            navListItems.click(function (e) {
                e.preventDefault();
                var $target = $($(this).attr('href')),
                    $item = $(this).closest('li'),
                    $clickId = $target[0].id;
                var programmeId = $("#@Html.IdFor(m => m.AppliedCourse.Programme.Id)").val();

                if ($clickId == "step-1") {

                   // if (!$item.hasClass('disabled')) {
                        navListItems.closest('li').removeClass('active');
                        $item.addClass('active');
                        allWells.hide();
                        $target.show();
                   // }
                } else if ($clickId == "step-2") {

                    var firstSittingOLevelResultDetailArray = populateFirstSittingResultDetail();
                    var secondSittingOLevelResultDetailArray = populateSecondSittingResultDetail();
                    if (firstSittingOLevelResultDetailArray.lenght > 0 || secondSittingOLevelResultDetailArray.length > 0) {
                       // if (!$item.hasClass('disabled')) {
                            navListItems.closest('li').removeClass('active');
                            $item.addClass('active');
                            allWells.hide();
                            $target.show();
                        //}
                        //else {

                        //    alert("Please fill all the fields!");
                        //}
                    }
                }
                else if ($clickId == "step-3") {
                    navListItems.closest('li').removeClass('active');
                    $item.addClass('active');
                    allWells.hide();
                    $target.show();
                }
                else if ($clickId == "step-4") {
                    navListItems.closest('li').removeClass('active');
                    $item.addClass('active');
                    allWells.hide();
                    $target.show();
                }
                else {

                    alert("Please fill all the fields!");
                }
            });

            $('ul.setup-panel li.active a').trigger('click');

            // Disabling clicks //

            $('#activate-step-1').on('click', function (e) {
                $('ul.setup-panel li:eq(2)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-1"]').trigger('click');

            });

          

            $('#activate-step-2').on('click', function (e) {
                $('ul.setup-panel li:eq(2)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-2"]').trigger('click');

            });

            $('#activate-step-3').on('click', function (e) {
                $('ul.setup-panel li:eq(3)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-3"]').trigger('click');

            });
            $('#activate-step-4').on('click', function (e) {
                $('ul.setup-panel li:eq(4)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-4"]').trigger('click');

            });

            $('#previous-step-1').on('click', function (e) {

              
                    $('ul.setup-panel li:eq(1)').removeClass('disabled');
                    $('ul.setup-panel li a[href="#step-1"]').trigger('click');
               

            });

            $('#previous-step-3').on('click', function (e) {
                $('ul.setup-panel li:eq(3)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-2"]').trigger('click');

            });
            $('#previous-step-4').on('click', function (e) {
                $('ul.setup-panel li:eq(3)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-3"]').trigger('click');

            });


            var src = $('#Person_ImageFileUrl').attr('src');
            if (src == undefined) {
                $('#Person_ImageFileUrl').attr('src', '/Content/Images/default_avatar.png');
            }

            $("#Person_State_Id").change(function () {
                $("#Person_LocalGovernment_Id").empty();
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("GetLocalGovernmentsByState")', //we are calling json method
                    dataType: 'json',
                    data: { id: $("#Person_State_Id").val() },
                    success: function (lgas) {
                        $("#Person_LocalGovernment_Id").append('<option value="' + 0 + '">-- Select --</option>');

                        $.each(lgas, function (i, lga) {
                            $("#Person_LocalGovernment_Id").append('<option value="' + lga.Value + '">' + lga.Text + '</option>');
                        });
                    },
                    error: function (ex) {
                        alert('Failed to retrieve lgas.' + ex);
                    }
                });

                return false;
            });
            $("#Person_MonthOfBirth_Id").change(function () {
                $("#Person_DayOfBirth_Id").empty();
                var selectedMonth = $("#Person_MonthOfBirth_Id").val();
                var selectedYear = $("#Person_YearOfBirth_Id").val();

                if (selectedYear == '') {
                    alert('Please select Year of Birth!');
                    return;
                }

                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("GetDayOfBirthBy")', // we are calling json method
                    dataType: 'json',
                    data: { monthId: selectedMonth, yearId: selectedYear },
                    success: function (days) {
                        $("#Person_DayOfBirth_Id").append('<option value="' + 0 + '">--DD--</option>');

                        $.each(days, function (i, day) {
                            $("#Person_DayOfBirth_Id").append('<option value="' + day.Value + '">' + day.Text + '</option>');
                        });
                    },

                    beforeSend: function () {
                        $('#spDob').show();
                    },
                    complete: function () {
                        $('#spDob').hide();
                    },

                    error: function (ex) {
                        if (selectedMonth == '') {
                            return;
                        } else {
                            alert('Failed to retrieve days.' + ex);
                        }
                    }
                });

                return false;
            });
          

           
            initSimpleFileUploadForCredential();
            $("#cr-start-upload").on('click', function () {
                if (jqXHRData) {
                    jqXHRData.submit();
                }
                return false;
            });

            $("#cu-credential-simple-upload").on('change', function () {
                $("#crx-file-path").val(this.files[0].name);
            });

            function initSimpleFileUploadForCredential() {
                'use strict';

                $('#cu-credential-simple-upload').fileupload({
                    url: '@Url.Content("~/Applicant/Form/UploadCredentialFile")',
                    dataType: 'json',

                    add: function (e, data) {
                        jqXHRData = data;
                    },
                    send: function (e) {
                        $('#fileUploadProgress2').show();
                    },
                    done: function (event, data) {
                        if (data.result.isUploaded) {
                            //alert("success");
                        } else {
                            $("#crx-file-path").val("");
                            alert(data.result.message);
                        }

                        $('#scannedCredential').attr('src', data.result.imageUrl);
                        $('#fileUploadProgress2').hide();
                    },
                    fail: function (event, data) {
                        if (data.files[0].error) {
                            alert(data.files[0].error);
                        }
                    }
                });
            }

            checkPhoneNumbers();

            $("#Sponsor_MobilePhone").on("change", function () {
                checkPhoneNumbers();
            });

            $("#Person_MobilePhone").on("change", function () {
                checkPhoneNumbers();
            });
        });

        (function ($) {

            // Browser supports HTML5 multiple file?
            var multipleSupport = typeof $('<input/>')[0].multiple !== 'undefined',
                isIE = /msie/i.test(navigator.userAgent);

            $.fn.customFile = function () {

                return this.each(function () {

                    var $file = $(this).addClass('custom-file-upload-hidden'), // the original file input
                        $wrap = $('<div class="file-upload-wrapper">'),
                        $input = $('<input type="text" class="file-upload-input" />'),
                        // Button that will be used in non-IE browsers
                        $button = $('<button type="button" class="file-upload-button">Select a File</button>'),
                        // Hack for IE
                        $label = $('<label class="file-upload-button" for="' + $file[0].id + '">Select a File</label>');

                    // Hide by shifting to the left so we
                    // can still trigger events
                    $file.css({
                        position: 'absolute',
                        left: '-9999px'
                    });

                    $wrap.insertAfter($file)
                        .append($file, $input, (isIE ? $label : $button));

                    // Prevent focus
                    $file.attr('tabIndex', -1);
                    $button.attr('tabIndex', -1);

                    $button.click(function () {
                        $file.focus().click(); // Open dialog
                    });

                    $file.change(function () {

                        var files = [], fileArr, filename;

                        // If multiple is supported then extract
                        // all filenames from the file array
                        if (multipleSupport) {
                            fileArr = $file[0].files;
                            for (var i = 0, len = fileArr.length; i < len; i++) {
                                files.push(fileArr[i].name);
                            }
                            filename = files.join(', ');

                            // If not supported then just take the value
                            // and remove the path to just show the filename
                        } else {
                            filename = $file.val().split('\\').pop();
                        }

                        $input.val(filename) // Set the value
                            .attr('title', filename) // Show filename in title tootlip
                            .focus(); // Regain focus

                    });

                    $input.on({
                        blur: function () { $file.trigger('blur'); },
                        keydown: function (e) {
                            if (e.which === 13) { // Enter
                                if (!isIE) { $file.trigger('click'); }
                            } else if (e.which === 8 || e.which === 46) { // Backspace & Del
                                // On some browsers the value is read-only
                                // with this trick we remove the old input and add
                                // a clean clone with all the original events attached
                                $file.replaceWith($file = $file.clone(true));
                                $file.trigger('change');
                                $input.val('');
                            } else if (e.which === 9) { // TAB
                                return;
                            } else { // All other keys
                                return false;
                            }
                        }
                    });

                });

            };

            // Old browser fallback
            if (!multipleSupport) {
                $(document).on('change', 'input.customfile', function () {

                    var $this = $(this),
                        // Create a unique ID so we
                        // can attach the label to the input
                        uniqId = 'customfile_' + (new Date()).getTime(),
                        $wrap = $this.parent(),

                        // Filter empty input
                        $inputs = $wrap.siblings().find('.file-upload-input')
                            .filter(function () { return !this.value }),

                        $file = $('<input type="file" id="' + uniqId + '" name="' + $this.attr('name') + '"/>');

                    setTimeout(function () {
                        // Add a new input
                        if ($this.val()) {
                            if (!$inputs.length) {
                                $wrap.after($file);
                                $file.customFile();
                            }
                            // Remove and reorganize inputs
                        } else {
                            $inputs.parent().remove();
                            $wrap.appendTo($wrap.parent());
                            $wrap.find('input').focus();
                        }
                    }, 1);

                });
            }

        }(jQuery));
        $('input[type=file]').customFile();

        function populateFirstSittingResultDetail() {
            var firstSittingOLevelResultDetailArray = [];
            var array = $('#firstSittingTable tr:gt(0)').map(function () {
                return {
                    SubjectId: $(this.cells[0]).find("select").val(),
                    SubjectName: "",
                    GradeId: $(this.cells[1]).find("select").val(),
                    GradeName: ""
                };
            });

            for (var i = 0; i < array.length; i++) {
                var myArray = { "SubjectId": array[i].SubjectId, "SubjectName": array[i].SubjectName, "GradeId": array[i].GradeId, "GradeName": array[i].GradeName };
                firstSittingOLevelResultDetailArray.push(myArray);
            }

            return firstSittingOLevelResultDetailArray;
        }

        function checkPhoneNumbers() {
            if ($("#Sponsor_MobilePhone").val() != undefined || $("#Sponsor_MobilePhone").val() != "" || $("#Person_MobilePhone").val() != undefined || $("#Person_MobilePhone").val() != "") {
                if ($("#Person_MobilePhone").val() == $("#Sponsor_MobilePhone").val()) {
                    $("#submit").attr("disabled", "disabled");
                    alert("Your phone number and the next of kin phone number cannot be the same.");
                } else {
                    $("#submit").attr("disabled", false);
                }
            }
        }
        function populateSecondSittingResultDetail() {
            var secondSittingOLevelResultDetailArray = [];
            var array2 = $('#secondSittingTable tr:gt(0)').map(function () {
                return {
                    SubjectId: $(this.cells[0]).find("select").val(),
                    SubjectName: "",
                    GradeId: $(this.cells[1]).find("select").val(),
                    GradeName: ""
                };
            });

            for (var i = 0; i < array2.length; i++) {
                var myArray = { "SubjectId": array2[i].SubjectId, "SubjectName": array2[i].SubjectName, "GradeId": array2[i].GradeId, "GradeName": array2[i].GradeName };
                secondSittingOLevelResultDetailArray.push(myArray);
            }

            return secondSittingOLevelResultDetailArray;
        }
        function showLoading() {
            $('#loading').show();
        }


        function PreparePreview() {
            $('#sexname').text($('#SexId option:selected').text());
            $('#Dob').text($('#DayId option:selected').text() + "/" + $('#MonthId :selected').text() + "/" + $('#YearId :selected').text());
            $('#LgaName').text($('#LgaId option:selected').text());
            $('#HometownName').text($('#HomeTownId option:selected').text());
            $('#Religionname').text($('#ReligionId option:selected').text());
            $('#HomeaddressName').text($('#HomeaddressId').val());
            $('#abiilityName').text($('#AbilityId option:selected').text());
            $('#otherabilityname').text($('#OtherId').val());
            $('#ExtraCurricullarActivitiesname').text($('#ExtracuricularId').val());
            $('#Sponsorname').text($('#SponsorNameid').val());
            $('#Contactaddress').text($('#ContactaddressId').val());
            $('#nextofkinaddress').text($('#PhoneId').val());
            $('#sponsorrelationsipname').text($('#relationshipId option:selected').text());
            //$('#').text($('#').val());
            //$('#').text($('#').val());
            //$('#').text($('#').val());
            //$('#').text($('#').val());
            //$('#').text($('#').val());
            
        }
    </script>
    @if (TempData["Message"] != null)
    {
        @Html.Partial("_Message", TempData["Message"])
    }
</div>
<div class="container">
    <div class="row pt-4">
        <div class="col-md-8 pl-0 pr-0">
            <div class="card">

                <div class="container">
                    <div class="row form-group">
                        <div class="col-xs-12 pl-3 pt-3">
                            <ul class="nav nav-tabs setup-panel">
                                <li class="nav-item active">
                                    <a class="nav-link" href="#step-1">BIO DATA </a>
                                </li>

                                <li class="nav-item disabled">
                                    <a class="nav-link" href="#step-2">O/LEVEL DETAILS </a>
                                </li>
                                <li class="nav-item disabled">
                                    <a class="nav-link" href="#step-3">OTHER DETAILS </a>
                                </li>
                                <li class="nav-item disabled">
                                    <a class="nav-link" href="#step-4">PREVIEW </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    @using (Html.BeginForm("FillPrescienceApplicationsmallones", "Form", FormMethod.Post, new {  enctype = "multipart/form-data" }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true)

                        <div class="row setup-content pr-4 pl-4 pb-4 pt-0" id="step-1">
                            <div class="col-xs-12">
                                <div>


                                    @Html.HiddenFor(model => model.Person.Id)


                                    @Html.HiddenFor(model => model.Person.DateEntered)
                                    @Html.HiddenFor(model => model.Person.FullName)
                                    @Html.HiddenFor(model => model.PassportUrl, new { Id = "passportImageId" })

                                
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h4>Bio Data</h4>
                                            </div>
                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.LastName)
                                                @Html.TextBoxFor(model => model.Person.LastName, new { @class = "form-control text-uppercase", @readonly = "readonly" })
                                                @*@Html.ValidationMessageFor(model => model.Person.LastName)*@
                                            </div>
                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.FirstName)
                                                @Html.TextBoxFor(model => model.Person.FirstName, new { @class = "form-control text-uppercase", @readonly = "readonly" })
                                                @*@Html.ValidationMessageFor(model => model.Person.FirstName)*@
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.OtherName, new { @class = "control-label " })
                                                @Html.TextBoxFor(model => model.Person.OtherName, new { @class = "form-control text-uppercase", @readonly = "readonly" })
                                                @*@Html.ValidationMessageFor(model => model.Person.OtherName)*@
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.Sex.Id, new { @class = "control-label " })
                                                @Html.DropDownListFor(f => f.Person.Sex.Id, (IEnumerable<SelectListItem>)ViewBag.SexId, new { @class = "form-control" ,@id= "SexId" })
                                                @*@Html.ValidationMessageFor(model => model.Person.Sex.Id)*@
                                            </div>


                                            <div class="col-md-6 form-group">
                                                <div class="form-inline">
                                                    <div class="form-inline" style="color: black">
                                                        @Html.LabelFor(model => model.Person.DateOfBirth, new { @class = "control-label " })
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div>

                                                        @Html.DropDownListFor(m => m.Person.YearOfBirth.Id, (IEnumerable<SelectListItem>)ViewBag.YearOfBirthId, new { @class = "form-control pl-2 mr-0", @id = "YearId" })
                                                        @Html.DropDownListFor(m => m.Person.MonthOfBirth.Id, (IEnumerable<SelectListItem>)ViewBag.MonthOfBirthId, new { @class = "form-control pl-2 ml-0 mr-0", @id = "MonthId"})
                                                        @Html.DropDownListFor(m => m.Person.DayOfBirth.Id, (IEnumerable<SelectListItem>)ViewBag.DayOfBirthId, new { @class = "form-control ml-0" , @id = "DayId"})
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.State.Id, new { @class = "control-label " })
                                                @Html.DropDownListFor(f => f.Person.State.Id, (IEnumerable<SelectListItem>)ViewBag.StateId, new { @class = "form-control", required = "required", @id = "StateId" })
                                                @*@Html.ValidationMessageFor(model => model.Person.State.Id)*@
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.LocalGovernment.Id, new { @class = "control-label " })
                                                @Html.DropDownListFor(f => f.Person.LocalGovernment.Id, (IEnumerable<SelectListItem>)ViewBag.LgaId, new { @class = "form-control", @id = "LgaId" })
                                                @*@Html.ValidationMessageFor(model => model.Person.LocalGovernment.Id)*@
                                            </div>



                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.HomeTown, new { @class = "control-label " })
                                                @Html.TextBoxFor(model => model.Person.HomeTown, new { @class = "form-control text-uppercase", max = "50", @id = "HomeTownId" })
                                                @*@Html.ValidationMessageFor(model => model.Person.HomeTown)*@
                                            </div>

                                            <div class="col-md-12 form-group">
                                                @Html.LabelFor(model => model.Person.HomeAddress, new { @class = "control-label " })
                                                @Html.TextBoxFor(model => model.Person.HomeAddress, new { @class = "form-control text-uppercase", max = "250", @id = "HomeaddressId" })
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.MobilePhone, new { @class = "control-label " })
                                                @Html.TextBoxFor(model => model.Person.MobilePhone, new { @class = "form-control", @readonly = "readonly", max = "15", min = "11", type = "number", @id = "PhoneId" })
                                                @*@Html.ValidationMessageFor(model => model.Person.MobilePhone)*@
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.Email, new { @class = "control-label " })
                                                @Html.TextBoxFor(model => model.Person.Email, new { @class = "form-control text-uppercase", @readonly = "readonly", max = "50", @id = "EmailId" })
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Person.Religion.Id, new { @class = "control-label " })
                                                @Html.DropDownListFor(model => model.Person.Religion.Id, (IEnumerable<SelectListItem>)ViewBag.ReligionId, new { @class = "form-control", @id = "ReligionId" })
                                                @*@Html.ValidationMessageFor(model => model.Person.Religion.Id)*@
                                            </div>

                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Applicant.Ability.Id, new { @class = "control-label " })
                                                @Html.DropDownListFor(model => model.Applicant.Ability.Id, (IEnumerable<SelectListItem>)ViewBag.AbilityId, new { @class = "form-control", @id = "AbilityId" })
                                            </div>
                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Applicant.OtherAbility)
                                                @Html.TextBoxFor(model => model.Applicant.OtherAbility, new { @class = "form-control text-uppercase", @id = "OtherId" })
                                            </div>
                                            <div class="col-md-6 form-group">
                                                @Html.LabelFor(model => model.Applicant.ExtraCurricullarActivities)
                                                @Html.TextBoxFor(model => model.Applicant.ExtraCurricullarActivities, new { @class = "form-control text-uppercase" , @id = "ExtracuricularId"})
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12 text-right">
                                        <a class="btn btn-primary pull-right" style="color: white" id="activate-step-2">NEXT</a>
                                    </div>

                                </div>
                            </div>
                        </div>


                        <div class="row setup-content pr-4 pl-4 pb-4 pt-0" id="step-2">
                            <div class="col-md-12">
                                <div class="col-md-12 pb-5" style="height: 700px; overflow-y: auto;">
                                    <div class="col-md-12">
                                        <h4>O-Level Information</h4>
                                    </div>
                                    <div class="row mt-3">
                                        <div id="accordion" style="width:100%">

                                            <div class="card">
                                                <div class="card-header">
                                                    <a class="card-link" data-toggle="collapse" href="#collapseOne">
                                                        First Sitting
                                                    </a>
                                                </div>
                                                <div id="collapseOne" class="collapse" data-parent="#accordion">
                                                    <div class="card-body">
                                                        <div class="col-md-12 card pt-2">
                                                            <p style="font-size:14px"><b>First Sitting</b></p>
                                                            <hr class="no-top-padding" />
                                                            @Html.HiddenFor(model => model.FirstSittingOLevelResult.Id)
                                                            <div class="row">
                                                                <div class="form-group col-md-4">
                                                                    @Html.LabelFor(model => model.FirstSittingOLevelResult.Type.Id, "Type", new { @class = "control-label" })
                                                                    <div class="">
                                                                        @Html.DropDownListFor(model => model.FirstSittingOLevelResult.Type.Id, (IEnumerable<SelectListItem>)ViewBag.FirstSittingOLevelTypeId, new { @class = "form-control olevel" })
                                                                        @Html.ValidationMessageFor(model => model.FirstSittingOLevelResult.Type.Id)
                                                                    </div>
                                                                </div>

                                                                <div class="form-group col-md-4">
                                                                    @Html.LabelFor(model => model.FirstSittingOLevelResult.ExamNumber, new { @class = "control-label" })
                                                                    <div class="">
                                                                        @Html.TextBoxFor(model => model.FirstSittingOLevelResult.ExamNumber, new { @class = "form-control" })
                                                                        @Html.ValidationMessageFor(model => model.FirstSittingOLevelResult.ExamNumber)
                                                                    </div>
                                                                </div>

                                                                <div class="form-group col-md-4">
                                                                    @Html.LabelFor(model => model.FirstSittingOLevelResult.ExamYear, new { @class = "control-label" })
                                                                    <div class="">
                                                                        @Html.DropDownListFor(model => model.FirstSittingOLevelResult.ExamYear, (IEnumerable<SelectListItem>)ViewBag.FirstSittingExamYearId, new { @class = "form-control olevel" })
                                                                        @Html.ValidationMessageFor(model => model.FirstSittingOLevelResult.ExamYear)
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <table id="firstSittingTable" class="table table-condensed table-responsive" style="background-color: whitesmoke">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            Subject
                                                                        </th>
                                                                        <th>
                                                                            Grade
                                                                        </th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @for (int i = 0; i < 9; i++)
                                                                    {
                                                                        <tr>
                                                                            <td>
                                                                                @Html.HiddenFor(model => model.FirstSittingOLevelResultDetails[i].Id)
                                                                                @Html.HiddenFor(model => model.FirstSittingOLevelResultDetails[i].Subject.Name)
                                                                                @Html.DropDownListFor(model => model.FirstSittingOLevelResultDetails[i].Subject.Id, (IEnumerable<SelectListItem>)ViewData["FirstSittingOLevelSubjectId" + i], new { @class = "form-control olevel" })
                                                                            </td>
                                                                            <td>

                                                                                @Html.HiddenFor(model => model.FirstSittingOLevelResultDetails[i].Grade.Name)
                                                                                @Html.DropDownListFor(model => model.FirstSittingOLevelResultDetails[i].Grade.Id, (IEnumerable<SelectListItem>)ViewData["FirstSittingOLevelGradeId" + i], new { @class = "form-control olevel" })
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                            <div class="card">
                                                <div class="card-header">
                                                    <a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
                                                        Second Sitting
                                                    </a>
                                                </div>



                                                <div id="collapseTwo" class="collapse" data-parent="#accordion">
                                                    <div class="card-body">
                                                        <div class="col-md-12 card pt-2">
                                                            <p style="font-size:14px"><b>Second Sitting</b></p>
                                                            <hr class="no-top-padding" />
                                                            @Html.HiddenFor(model => model.SecondSittingOLevelResult.Id)
                                                            <div class="row">
                                                                <div class="form-group col-md-4">

                                                                    @Html.LabelFor(model => model.SecondSittingOLevelResult.Type.Id, "Type", new { @class = "control-label" })
                                                                    <div class="">
                                                                        @Html.DropDownListFor(model => model.SecondSittingOLevelResult.Type.Id, (IEnumerable<SelectListItem>)ViewBag.SecondSittingOLevelTypeId, new { @class = "form-control olevel" })
                                                                    </div>
                                                                </div>

                                                                <div class="form-group col-md-4">
                                                                    @Html.LabelFor(model => model.SecondSittingOLevelResult.ExamNumber, new { @class = "control-label" })
                                                                    <div class="">
                                                                        @Html.TextBoxFor(model => model.SecondSittingOLevelResult.ExamNumber, new { @class = "form-control" })
                                                                    </div>
                                                                </div>

                                                                <div class="form-group col-md-4">
                                                                    @Html.LabelFor(model => model.SecondSittingOLevelResult.ExamYear, new { @class = "control-label" })
                                                                    <div class="">
                                                                        @Html.DropDownListFor(model => model.SecondSittingOLevelResult.ExamYear, (IEnumerable<SelectListItem>)ViewBag.SecondSittingExamYearId, new { @class = "form-control olevel" })
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table id="secondSittingTable" class="table table-condensed table-responsive" style="background-color: whitesmoke">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            Subject
                                                                        </th>
                                                                        <th>
                                                                            Grade
                                                                        </th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @for (int i = 0; i < 9; i++)
                                                                    {
                                                                        <tr>
                                                                            <td>
                                                                                @Html.HiddenFor(model => model.SecondSittingOLevelResultDetails[i].Id)
                                                                                @Html.HiddenFor(model => model.SecondSittingOLevelResultDetails[i].Subject.Name)
                                                                                @Html.DropDownListFor(model => model.SecondSittingOLevelResultDetails[i].Subject.Id, (IEnumerable<SelectListItem>)ViewData["SecondSittingOLevelSubjectId" + i], new { @class = "form-control olevel" })
                                                                            </td>
                                                                            <td>
                                                                                @Html.HiddenFor(model => model.SecondSittingOLevelResultDetails[i].Grade.Name)
                                                                                @Html.DropDownListFor(model => model.SecondSittingOLevelResultDetails[i].Grade.Id, (IEnumerable<SelectListItem>)ViewData["SecondSittingOLevelGradeId" + i], new { @class = "form-control olevel" })
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>



                                        </div>


                                        <!--col-md-6 end form 1-->
                                        <!-- beginning of form 2-->

                                    </div>

                                    <!--row-->
                                    <div class="col-md-12 text-right">
                                        <a id="previous-step-1" class="btn btn-primary pull-left" style="color: white">Previous</a>
                                        <a id="activate-step-3" class="btn btn-primary pull-right" style="color: white">Next</a>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="row setup-content pr-4 pl-4 pb-4 pt-0" id="step-3">
                            <div class="col-xs-12">
                                <div class="col-md-12 well" style="">
                                    <h4>Other Information</h4>
                                    <div class="row">
                                        <div class="col-md-12 form-group">
                                            @Html.LabelFor(model => model.Sponsor.Name)
                                            @Html.TextBoxFor(model => model.Sponsor.Name, new { @class = "form-control text-uppercase", max = "50", @id = "SponsorNameid" })
                                            @*@Html.ValidationMessageFor(model => model.Sponsor.Name)*@
                                        </div>

                                        <div class="col-md-6 form-group">
                                            @Html.LabelFor(model => model.Sponsor.Relationship.Id, new { @class = "control-label " })
                                            @Html.DropDownListFor(model => model.Sponsor.Relationship.Id, (IEnumerable<SelectListItem>)ViewBag.RelationshipId, new { @class = "form-control", @id = "relationshipId" })
                                            @*@Html.ValidationMessageFor(model => model.Sponsor.Relationship.Id)*@
                                        </div>

                                        <div class="col-md-6 form-group">
                                            @Html.LabelFor(model => model.Sponsor.MobilePhone, new { @class = "control-label " })
                                            @Html.TextBoxFor(model => model.Sponsor.MobilePhone, new { @class = "form-control" , @id = "PhoneId"})
                                            @*@Html.ValidationMessageFor(model => model.Sponsor.MobilePhone)*@
                                        </div>

                                        <div class="col-md-12 form-group">
                                            @Html.LabelFor(model => model.Sponsor.ContactAddress, new { @class = "control-label " })
                                            @Html.TextBoxFor(model => model.Sponsor.ContactAddress, new { @class = "form-control text-uppercase", max = "350", @id = "ContactaddressId" })
                                            @*@Html.ValidationMessageFor(model => model.Sponsor.ContactAddress)*@
                                        </div>
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    @if (Model.Person.ImageFileUrl != null)
                                                                {
                                                        <div class="card-img">
                                                            <img id="Person_ImageFileUrl" name="Person.ImageFileUrl" src="@Url.Content(Model.Person.ImageFileUrl)" height="100" width="100">
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                        <img id="Person_ImageFileUrl" name="Person.ImageFileUrl" height="100" width="100">
                                                    }

                                                    <div id="dropzone">
                                                        <form class="dropzone needsclick" id="demo-upload" action="/"></form>
                                                    </div>
                                                    <div class="custom-file-upload">
                                                        <div class="col-md-12">
                                                            <div id="dropzone">
                                                                <form class="dropzone needsclick" id="demo-upload" action="/"></form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>

                                    </div>

                                    <div class="col-md-12 text-right">
                                        <a id="previous-step-3" class="btn btn-primary pull-left" style="color: white">Previous</a>
                                        @*<button class="btn btn-primary pull-right" @*style="display: none"*@ @*id="submitBtn" onclick="showLoading()">Submit</button>*@
                                        <a id="activate-step-4" class="btn btn-primary pull-right" style="color: white" onclick="PreparePreview()">Preview</a>
                                        <span class="pull-right" style="display: none;" id="loading"> <img src="~/Content/Images/bx_loader.gif" /></span>

                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row setup-content pr-4 pl-4 pb-4 pt-0" id="step-4">
                            <div class="col-xs-12">
                                <div class="col-md-12 well" style="">
                                    <h4>Preview </h4>


                                    <div class="row">
                                        <div class="col-md-12">

                                            <div class="panel panel-default">
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="col-md-12 ">
                                                           
                                                            <div class="col-md-10">
                                                                

                                                                <div id="slip">
                                                                 
                                                                        <center>
                                                                            <div class="alert alert-success fade in nomargin" style="background-color: #b78825">


                                                                                <h2><b>Pre-Science Application Form</b></h2>



                                                                            </div>

                                                                            <br />
                                                                        </center>

                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading">
                                                                                <div style="font-size: x-large">Bio Data</div>

                                                                            </div>

                                                                            <div class="panel-body">
                                                                                <div class="row">
                                                                                    <div class="col-md-6 custom-text-black">
                                                                                    </div>
                                                                                    <div class="col-md-6">
                                                                                        @*<img src="@Url.Content('~' + Model.Person.ImageFileUrl)" alt=" " style="max-width: 150px" id="imagepreview" />*@
                                                                                        <img id="Person_ImageFileUrl" name="Person.ImageFileUrl" height="100" width="100">
                                                                                        @*<img src="@Url.Content(@Model.PassportUrl)" alt=" " style=" max-width:150px" />*@
                                                                                    </div>
                                                                                </div>

                                                                                <br />

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                                <label class="control-label ">
                                                                                                    LastName
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                @Html.DisplayFor(model => model.Person.LastName)
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                               
                                                                                                <label class="control-label ">
                                                                                                    FirstName
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                @Html.DisplayFor(model => model.Person.FirstName)
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    OtherName
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                @Html.DisplayFor(model => model.Person.OtherName)
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    Sex
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="sexname"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                             
                                                                                                <label class="control-label ">
                                                                                                    DateOfBirth
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                             <p id="Dob"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    State
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                @Html.DisplayFor(model => model.Person.State.Name)
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    LocalGovernment
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="LgaName"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    HomeTown
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                <p id="HometownName"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    MobilePhone
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                @Html.DisplayFor(model => model.Person.MobilePhone)
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                             
                                                                                                <label class="control-label ">
                                                                                                    Email
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                                @Html.DisplayFor(model => model.Person.Email)
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                               
                                                                                                <label class="control-label ">
                                                                                                    Religion
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                              <p id="Religionname"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    HomeAddress
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="HomeaddressName"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    Ability
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="abiilityName"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    OtherAbility
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="otherabilityname"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                              
                                                                                                <label class="control-label ">
                                                                                                    ExtraCurricullarActivities
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                             <p id="ExtraCurricullarActivitiesname"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading">
                                                                                <div style="font-size: x-large">Next of Kin</div>
                                                                            </div>
                                                                            <div class="panel-body">
                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                               
                                                                                                <label class="control-label ">
                                                                                                    Sponsor Name
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="Sponsorname"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                               
                                                                                                <label class="control-label ">
                                                                                                    Contact Address
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                             <p id="Contactaddress"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row">
                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                               
                                                                                                <label class="control-label ">
                                                                                                    Mobile Phone
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                              <p id="nextofkinaddress"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="col-md-6">
                                                                                        <div class="form-group margin-bottom-0">
                                                                                            <div class="col-md-4">
                                                                                               
                                                                                                <label class="control-label ">
                                                                                                    Sponsor Relationship
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-md-8 text-bold custom-text-black">
                                                                                               <p id="sponsorrelationsipname"></p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>


                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading">
                                                                                <div style="font-size: x-large">O-Level Result</div>
                                                                            </div>
                                                                            <div class="panel-body">

                                                                                <div class="row">
                                                                                    <div class="col-md-6 custom-text-black">
                                                                                        <h5>First Sitting</h5>
                                                                                        <hr class="no-top-padding" />

                                                                                       
                                                                                    </div>

                                                                                    <div class="col-md-6 custom-text-black">
                                                                                        <h5>Second Sitting</h5>
                                                                                        <hr class="no-top-padding" />

                                                                                       
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>






                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading">
                                                                                <div style="font-size: x-large">Declaration</div>
                                                                            </div>
                                                                            <div class="panel-body">
                                                                                <div class="row">
                                                                                    <div class="col-md-12">
                                                                                        <blockquote>
                                                                                            @*<i class="fa fa-quote-left"></i>*@
                                                                                            <p>
                                                                                                I hereby acknowledge by ticking this check box that if it is discovered at any time that I do not possess any of the qualifications which I claim
                                                                                                I have obtained, I will be expelled from the university and shall not be re-admitted for the same or any other programme, even if I have upgraded my previous qualifications or possess additional qualifications.
                                                                                            </p>
                                                                                           
                                                                                        </blockquote>

                                                                                        <div class="ckbox ckbox-default">
                                                                                            <input type="checkbox" id="checkboxDefault" />
                                                                                            <label for="checkboxDefault"><b style="font-size: 13pt">I Agree</b></label>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-actions no-color">

                                                                            @*<input class="btn btn-default btn-bordered" type="submit" name="submit" id="submit" value="Submit" /> |*@

                                                                            @*<button class="btn btn-white btn-lg" type="submit" name="submit" id="submit"><i class="fa fa-save mr5"></i> Submit</button>*@
                                                                           
                                                                            <div id="busy" style="display: none">Processing ...</div>
                                                                        </div>

                                                                        <br />


                                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                  

                                    <div class="col-md-12 text-right">
                                        <a id="previous-step-4" class="btn btn-primary pull-left" style="color: white">Previous</a>
                                        <button class="btn btn-primary pull-right" @*id="submitBtn"*@ type="submit">Submit</button>
                                        
                                        <span class="pull-right" style="display: none;" id="loading"> <img src="~/Content/Images/bx_loader.gif" /></span>

                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="col-md-4 bg-warning hidden-md-down">

            
        </div>
    </div>
</div>
